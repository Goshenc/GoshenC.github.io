<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SQLiteç”¨æ³•</title>
      <link href="/2025/03/15/SQLite%E7%94%A8%E6%B3%95/"/>
      <url>/2025/03/15/SQLite%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>SQLite æ˜¯ä¸€ç§è½»é‡çº§çš„åµŒå…¥å¼æ•°æ®åº“ï¼Œåœ¨ Android ä¸­ç”¨äºå­˜å‚¨ç»“æ„åŒ–æ•°æ®ã€‚ä½ å¯ä»¥é€šè¿‡ <code>SQLiteOpenHelper</code> æ¥ç®¡ç†æ•°æ®åº“çš„åˆ›å»ºã€å‡çº§ã€å’Œç‰ˆæœ¬ç®¡ç†ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ SQLite çš„åŸºæœ¬æ­¥éª¤ï¼š</p><h2 id="1-åˆ›å»ºæ•°æ®åº“å’Œè¡¨"><a href="#1-åˆ›å»ºæ•°æ®åº“å’Œè¡¨" class="headerlink" title="1. åˆ›å»ºæ•°æ®åº“å’Œè¡¨"></a><strong>1. åˆ›å»ºæ•°æ®åº“å’Œè¡¨</strong></h2><p>ä½¿ç”¨ <code>SQLiteOpenHelper</code> åˆ›å»ºæ•°æ®åº“ä»¥åŠè¡¨ç»“æ„ã€‚è¿™ä¸ªç±»ä¼šå¸®åŠ©ä½ åˆ›å»ºæ•°æ®åº“ã€æ‰§è¡Œè¡¨çš„å‡çº§ã€é™çº§ç­‰æ“ä½œã€‚</p><h3 id="åˆ›å»º-SQLiteOpenHelper-ç±»"><a href="#åˆ›å»º-SQLiteOpenHelper-ç±»" class="headerlink" title="åˆ›å»º SQLiteOpenHelper ç±»"></a><strong>åˆ›å»º SQLiteOpenHelper ç±»</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘import android.content.Context</span><br><span class="line">import android.database.sqlite.SQLiteDatabase</span><br><span class="line">import android.database.sqlite.SQLiteOpenHelper</span><br><span class="line"></span><br><span class="line">class MyDatabaseHelper(context: Context) : SQLiteOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION) &#123;</span><br><span class="line"></span><br><span class="line">    companion object &#123;</span><br><span class="line">        private const val DATABASE_NAME = &quot;my_database.db&quot; // æ•°æ®åº“åç§°</span><br><span class="line">        private const val DATABASE_VERSION = 1 // æ•°æ®åº“ç‰ˆæœ¬å·</span><br><span class="line">        private const val TABLE_NAME = &quot;users&quot; // è¡¨åç§°</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(db: SQLiteDatabase) &#123;</span><br><span class="line">        // åˆ›å»ºæ•°æ®åº“è¡¨</span><br><span class="line">        val createTableQuery = &quot;&quot;&quot;</span><br><span class="line">            CREATE TABLE $TABLE_NAME (</span><br><span class="line">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span><br><span class="line">                name TEXT NOT NULL,</span><br><span class="line">                age INTEGER</span><br><span class="line">            )</span><br><span class="line">        &quot;&quot;&quot;.trimIndent()</span><br><span class="line">        db.execSQL(createTableQuery)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) &#123;</span><br><span class="line">        // å¦‚æœæ•°æ®åº“ç‰ˆæœ¬å˜åŒ–æ—¶ï¼Œåˆ é™¤æ—§è¡¨å¹¶åˆ›å»ºæ–°è¡¨</span><br><span class="line">        db.execSQL(&quot;DROP TABLE IF EXISTS $TABLE_NAME&quot;)</span><br><span class="line">        onCreate(db)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>onCreate</code></strong>ï¼šå½“æ•°æ®åº“é¦–æ¬¡åˆ›å»ºæ—¶æ‰§è¡Œã€‚é€šå¸¸åœ¨è¿™é‡Œåˆ›å»ºè¡¨å’Œåˆå§‹åŒ–æ•°æ®ã€‚</li><li><strong><code>onUpgrade</code></strong>ï¼šå½“æ•°æ®åº“ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œè¡¨çš„è¿ç§»æˆ–åˆ é™¤ã€‚</li></ul><h2 id="2-æ’å…¥æ•°æ®"><a href="#2-æ’å…¥æ•°æ®" class="headerlink" title="2. æ’å…¥æ•°æ®"></a><strong>2. æ’å…¥æ•°æ®</strong></h2><p>æ’å…¥æ•°æ®éœ€è¦é€šè¿‡ <code>SQLiteDatabase.insert()</code> æ–¹æ³•æ¥å®ç°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘import android.content.ContentValues</span><br><span class="line"></span><br><span class="line">fun insertUser(context: Context, name: String, age: Int) &#123;</span><br><span class="line">    val dbHelper = MyDatabaseHelper(context)</span><br><span class="line">    val db = dbHelper.writableDatabase</span><br><span class="line"></span><br><span class="line">    val values = ContentValues().apply &#123;</span><br><span class="line">        put(&quot;name&quot;, name)</span><br><span class="line">        put(&quot;age&quot;, age)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    db.insert(&quot;users&quot;, null, values)</span><br><span class="line">    db.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>ContentValues</code></strong>ï¼šæ˜¯ç”¨äºå­˜å‚¨è¦æ’å…¥çš„æ•°æ®çš„å®¹å™¨ã€‚é€šè¿‡ <code>put</code> æ–¹æ³•å°†åˆ—åå’Œå€¼æ·»åŠ åˆ° <code>ContentValues</code> ä¸­ã€‚</li><li><strong><code>insert</code></strong>ï¼šæ’å…¥æ•°æ®çš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆ—ä¸ºç©ºæ—¶æ’å…¥çš„é»˜è®¤å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ <code>ContentValues</code>ã€‚</li></ul><h2 id="3-æŸ¥è¯¢æ•°æ®"><a href="#3-æŸ¥è¯¢æ•°æ®" class="headerlink" title="3. æŸ¥è¯¢æ•°æ®"></a><strong>3. æŸ¥è¯¢æ•°æ®</strong></h2><p>æŸ¥è¯¢æ•°æ®ä½¿ç”¨ <code>SQLiteDatabase.query()</code> æˆ– <code>SQLiteDatabase.rawQuery()</code> æ–¹æ³•ã€‚</p><h3 id="ä½¿ç”¨-query-æ–¹æ³•"><a href="#ä½¿ç”¨-query-æ–¹æ³•" class="headerlink" title="ä½¿ç”¨ query() æ–¹æ³•"></a>ä½¿ç”¨ <code>query()</code> æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘import android.database.Cursor</span><br><span class="line"></span><br><span class="line">fun queryUsers(context: Context): List&lt;User&gt; &#123;</span><br><span class="line">    val dbHelper = MyDatabaseHelper(context)</span><br><span class="line">    val db = dbHelper.readableDatabase</span><br><span class="line"></span><br><span class="line">    val cursor: Cursor = db.query(</span><br><span class="line">        &quot;users&quot;, // è¡¨å</span><br><span class="line">        arrayOf(&quot;id&quot;, &quot;name&quot;, &quot;age&quot;), // åˆ—å</span><br><span class="line">        null, // WHERE å­å¥</span><br><span class="line">        null, // WHERE å­å¥çš„å‚æ•°</span><br><span class="line">        null, // GROUP BY å­å¥</span><br><span class="line">        null, // HAVING å­å¥</span><br><span class="line">        null // ORDER BY å­å¥</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    val users = mutableListOf&lt;User&gt;()</span><br><span class="line"></span><br><span class="line">    while (cursor.moveToNext()) &#123;</span><br><span class="line">        val id = cursor.getLong(cursor.getColumnIndexOrThrow(&quot;id&quot;))</span><br><span class="line">        val name = cursor.getString(cursor.getColumnIndexOrThrow(&quot;name&quot;))</span><br><span class="line">        val age = cursor.getInt(cursor.getColumnIndexOrThrow(&quot;age&quot;))</span><br><span class="line"></span><br><span class="line">        users.add(User(id, name, age))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cursor.close()</span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line">    return users</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data class User(val id: Long, val name: String, val age: Int)</span><br></pre></td></tr></table></figure><ul><li><strong><code>query</code></strong>ï¼šç”¨äºæŸ¥è¯¢æ•°æ®åº“ï¼Œè¿”å›ä¸€ä¸ª <code>Cursor</code> å¯¹è±¡ã€‚ä½ å¯ä»¥é€šè¿‡ <code>Cursor</code> éå†ç»“æœé›†ã€‚</li><li><strong><code>getColumnIndexOrThrow()</code></strong>ï¼šæ ¹æ®åˆ—åè·å–åˆ—çš„ç´¢å¼•ï¼Œ<code>getString()</code>, <code>getInt()</code> ç­‰æ–¹æ³•ç”¨äºæå–æ•°æ®ã€‚</li></ul><h3 id="ä½¿ç”¨-rawQuery-æ–¹æ³•"><a href="#ä½¿ç”¨-rawQuery-æ–¹æ³•" class="headerlink" title="ä½¿ç”¨ rawQuery() æ–¹æ³•"></a>ä½¿ç”¨ <code>rawQuery()</code> æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘fun queryUsersRaw(context: Context): List&lt;User&gt; &#123;</span><br><span class="line">    val dbHelper = MyDatabaseHelper(context)</span><br><span class="line">    val db = dbHelper.readableDatabase</span><br><span class="line"></span><br><span class="line">    val cursor: Cursor = db.rawQuery(&quot;SELECT * FROM users&quot;, null)</span><br><span class="line"></span><br><span class="line">    val users = mutableListOf&lt;User&gt;()</span><br><span class="line"></span><br><span class="line">    while (cursor.moveToNext()) &#123;</span><br><span class="line">        val id = cursor.getLong(cursor.getColumnIndex(&quot;id&quot;))</span><br><span class="line">        val name = cursor.getString(cursor.getColumnIndex(&quot;name&quot;))</span><br><span class="line">        val age = cursor.getInt(cursor.getColumnIndex(&quot;age&quot;))</span><br><span class="line"></span><br><span class="line">        users.add(User(id, name, age))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cursor.close()</span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line">    return users</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>rawQuery()</code></strong>ï¼šæ‰§è¡ŒåŸå§‹çš„ SQL æŸ¥è¯¢è¯­å¥ï¼Œè¿”å›ä¸€ä¸ª <code>Cursor</code>ã€‚</li></ul><h2 id="4-æ›´æ–°æ•°æ®"><a href="#4-æ›´æ–°æ•°æ®" class="headerlink" title="4. æ›´æ–°æ•°æ®"></a><strong>4. æ›´æ–°æ•°æ®</strong></h2><p>æ›´æ–°æ•°æ®ä½¿ç”¨ <code>SQLiteDatabase.update()</code> æ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘import android.content.ContentValues</span><br><span class="line"></span><br><span class="line">fun updateUser(context: Context, id: Long, name: String, age: Int) &#123;</span><br><span class="line">    val dbHelper = MyDatabaseHelper(context)</span><br><span class="line">    val db = dbHelper.writableDatabase</span><br><span class="line"></span><br><span class="line">    val values = ContentValues().apply &#123;</span><br><span class="line">        put(&quot;name&quot;, name)</span><br><span class="line">        put(&quot;age&quot;, age)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    val selection = &quot;id = ?&quot;</span><br><span class="line">    val selectionArgs = arrayOf(id.toString())</span><br><span class="line"></span><br><span class="line">    db.update(&quot;users&quot;, values, selection, selectionArgs)</span><br><span class="line">    db.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>update()</code></strong>ï¼šæ›´æ–°æ•°æ®çš„æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›´æ–°çš„å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ <code>WHERE</code> å­å¥ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ <code>WHERE</code> å­å¥çš„å‚æ•°ã€‚</li></ul><h2 id="5-åˆ é™¤æ•°æ®"><a href="#5-åˆ é™¤æ•°æ®" class="headerlink" title="5. åˆ é™¤æ•°æ®"></a><strong>5. åˆ é™¤æ•°æ®</strong></h2><p>åˆ é™¤æ•°æ®ä½¿ç”¨ <code>SQLiteDatabase.delete()</code> æ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘fun deleteUser(context: Context, id: Long) &#123;</span><br><span class="line">    val dbHelper = MyDatabaseHelper(context)</span><br><span class="line">    val db = dbHelper.writableDatabase</span><br><span class="line"></span><br><span class="line">    val selection = &quot;id = ?&quot;</span><br><span class="line">    val selectionArgs = arrayOf(id.toString())</span><br><span class="line"></span><br><span class="line">    db.delete(&quot;users&quot;, selection, selectionArgs)</span><br><span class="line">    db.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>delete()</code></strong>ï¼šåˆ é™¤æ•°æ®çš„æ–¹æ³•ï¼Œç±»ä¼¼äº <code>update()</code> æ–¹æ³•ï¼Œä¼ å…¥ <code>WHERE</code> å­å¥æ¥æŒ‡å®šåˆ é™¤æ¡ä»¶ã€‚</li></ul><h2 id="6-å…³é—­æ•°æ®åº“è¿æ¥"><a href="#6-å…³é—­æ•°æ®åº“è¿æ¥" class="headerlink" title="6. å…³é—­æ•°æ®åº“è¿æ¥"></a><strong>6. å…³é—­æ•°æ®åº“è¿æ¥</strong></h2><p>æ¯æ¬¡æ“ä½œå®Œæ•°æ®åº“åï¼Œè®°å¾—å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ol><li><strong>åˆ›å»ºæ•°æ®åº“å’Œè¡¨</strong>ï¼šé€šè¿‡ç»§æ‰¿ <code>SQLiteOpenHelper</code> ç±»æ¥åˆ›å»ºæ•°æ®åº“åŠè¡¨ã€‚</li><li><strong>æ’å…¥æ•°æ®</strong>ï¼šä½¿ç”¨ <code>ContentValues</code> ç»“åˆ <code>insert()</code> æ–¹æ³•æ’å…¥æ•°æ®ã€‚</li><li><strong>æŸ¥è¯¢æ•°æ®</strong>ï¼šé€šè¿‡ <code>query()</code> æˆ– <code>rawQuery()</code> æŸ¥è¯¢æ•°æ®ï¼Œè¿”å› <code>Cursor</code> å¯¹è±¡è¿›è¡Œéå†ã€‚</li><li><strong>æ›´æ–°æ•°æ®</strong>ï¼šä½¿ç”¨ <code>update()</code> æ–¹æ³•æ›´æ–°æ•°æ®ã€‚</li><li><strong>åˆ é™¤æ•°æ®</strong>ï¼šä½¿ç”¨ <code>delete()</code> æ–¹æ³•åˆ é™¤æ•°æ®ã€‚</li><li><strong>å…³é—­æ•°æ®åº“è¿æ¥</strong>ï¼šæ“ä½œå®Œæˆåè®°å¾—å…³é—­æ•°æ®åº“ã€‚</li></ol><p>SQLite æä¾›äº†å¼ºå¤§çš„æœ¬åœ°æ•°æ®å­˜å‚¨èƒ½åŠ›ï¼Œé€‚åˆç”¨äºéœ€è¦å­˜å‚¨ç»“æ„åŒ–æ•°æ®çš„åº”ç”¨ã€‚</p><p><strong>å®Œæ•´ç¤ºä¾‹</strong></p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåº”ç”¨éœ€è¦ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯ä¸ªç”¨æˆ·åŒ…å« <code>id</code>ã€<code>name</code> å’Œ <code>email</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè¡¨å¹¶å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><h4 id="1-æ•°æ®åº“åŠ©æ‰‹ç±»"><a href="#1-æ•°æ®åº“åŠ©æ‰‹ç±»" class="headerlink" title="1. æ•°æ®åº“åŠ©æ‰‹ç±»"></a>1. æ•°æ®åº“åŠ©æ‰‹ç±»</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class MyDatabaseHelper(context: Context) : SQLiteOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION) &#123;</span><br><span class="line"></span><br><span class="line">    companion object &#123;</span><br><span class="line">        const val DATABASE_NAME = &quot;my_database.db&quot;</span><br><span class="line">        const val DATABASE_VERSION = 1</span><br><span class="line">        const val TABLE_NAME = &quot;users&quot;</span><br><span class="line">        const val COLUMN_ID = &quot;id&quot;</span><br><span class="line">        const val COLUMN_NAME = &quot;name&quot;</span><br><span class="line">        const val COLUMN_EMAIL = &quot;email&quot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(db: SQLiteDatabase?) &#123;</span><br><span class="line">        val createTableQuery = &quot;&quot;&quot;</span><br><span class="line">            CREATE TABLE $TABLE_NAME (</span><br><span class="line">                $COLUMN_ID INTEGER PRIMARY KEY AUTOINCREMENT,</span><br><span class="line">                $COLUMN_NAME TEXT,</span><br><span class="line">                $COLUMN_EMAIL TEXT</span><br><span class="line">            )</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        db?.execSQL(createTableQuery)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) &#123;</span><br><span class="line">        db?.execSQL(&quot;DROP TABLE IF EXISTS $TABLE_NAME&quot;)</span><br><span class="line">        onCreate(db)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-æ’å…¥æ•°æ®-1"><a href="#2-æ’å…¥æ•°æ®-1" class="headerlink" title="2. æ’å…¥æ•°æ®"></a>2. æ’å…¥æ•°æ®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">val dbHelper = MyDatabaseHelper(context)</span><br><span class="line">val db = dbHelper.writableDatabase</span><br><span class="line">val values = ContentValues().apply &#123;</span><br><span class="line">    put(MyDatabaseHelper.COLUMN_NAME, &quot;John Doe&quot;)</span><br><span class="line">    put(MyDatabaseHelper.COLUMN_EMAIL, &quot;john.doe@example.com&quot;)</span><br><span class="line">&#125;</span><br><span class="line">db.insert(MyDatabaseHelper.TABLE_NAME, null, values)</span><br></pre></td></tr></table></figure><h4 id="3-æŸ¥è¯¢æ•°æ®-1"><a href="#3-æŸ¥è¯¢æ•°æ®-1" class="headerlink" title="3. æŸ¥è¯¢æ•°æ®"></a>3. æŸ¥è¯¢æ•°æ®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">val db = dbHelper.readableDatabase</span><br><span class="line">val cursor = db.query(</span><br><span class="line">    MyDatabaseHelper.TABLE_NAME,</span><br><span class="line">    arrayOf(MyDatabaseHelper.COLUMN_ID, MyDatabaseHelper.COLUMN_NAME, MyDatabaseHelper.COLUMN_EMAIL),</span><br><span class="line">    null, null, null, null, null</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">while (cursor.moveToNext()) &#123;</span><br><span class="line">    val id = cursor.getLong(cursor.getColumnIndex(MyDatabaseHelper.COLUMN_ID))</span><br><span class="line">    val name = cursor.getString(cursor.getColumnIndex(MyDatabaseHelper.COLUMN_NAME))</span><br><span class="line">    val email = cursor.getString(cursor.getColumnIndex(MyDatabaseHelper.COLUMN_EMAIL))</span><br><span class="line">    println(&quot;User: $id, $name, $email&quot;)</span><br><span class="line">&#125;</span><br><span class="line">cursor.close()</span><br></pre></td></tr></table></figure><h4 id="4-æ›´æ–°æ•°æ®-1"><a href="#4-æ›´æ–°æ•°æ®-1" class="headerlink" title="4. æ›´æ–°æ•°æ®"></a>4. æ›´æ–°æ•°æ®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">val values = ContentValues().apply &#123;</span><br><span class="line">    put(MyDatabaseHelper.COLUMN_NAME, &quot;John Smith&quot;)</span><br><span class="line">&#125;</span><br><span class="line">val selection = &quot;$&#123;MyDatabaseHelper.COLUMN_ID&#125; = ?&quot;</span><br><span class="line">val selectionArgs = arrayOf(&quot;1&quot;)</span><br><span class="line"></span><br><span class="line">val db = dbHelper.writableDatabase</span><br><span class="line">db.update(MyDatabaseHelper.TABLE_NAME, values, selection, selectionArgs)</span><br></pre></td></tr></table></figure><h4 id="5-åˆ é™¤æ•°æ®-1"><a href="#5-åˆ é™¤æ•°æ®-1" class="headerlink" title="5. åˆ é™¤æ•°æ®"></a>5. åˆ é™¤æ•°æ®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val selection = &quot;$&#123;MyDatabaseHelper.COLUMN_ID&#125; = ?&quot;</span><br><span class="line">val selectionArgs = arrayOf(&quot;1&quot;)</span><br><span class="line"></span><br><span class="line">val db = dbHelper.writableDatabase</span><br><span class="line">db.delete(MyDatabaseHelper.TABLE_NAME, selection, selectionArgs)</span><br></pre></td></tr></table></figure><h4 id="6-å…³é—­æ•°æ®åº“"><a href="#6-å…³é—­æ•°æ®åº“" class="headerlink" title="6. å…³é—­æ•°æ®åº“"></a>6. å…³é—­æ•°æ®åº“</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.close()</span><br></pre></td></tr></table></figure><hr><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong>SQLiteOpenHelper</strong>ï¼šç®¡ç†æ•°æ®åº“çš„åˆ›å»ºã€å‡çº§ç­‰æ“ä½œã€‚</li><li><strong>SQLiteDatabase</strong>ï¼šç”¨äºæ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œå¦‚æ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ã€‚</li><li><strong>ContentValues</strong>ï¼šç”¨äºå­˜å‚¨è¦æ’å…¥æˆ–æ›´æ–°çš„æ•°æ®ã€‚</li><li><strong>Cursor</strong>ï¼šç”¨äºè®¿é—®æŸ¥è¯¢ç»“æœã€‚</li></ul><p>SQLite æ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆçš„æ–¹å¼æ¥åœ¨ Android ä¸Šè¿›è¡Œæœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œå°¤å…¶é€‚ç”¨äºå­˜å‚¨å°å‹ç»“æ„åŒ–æ•°æ®ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å“çŸ¥è¯†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Room+ViewModel+LiveDataä¸€èµ·ä½¿ç”¨çš„ç”¨æ³•</title>
      <link href="/2025/03/15/Room-ViewModel-LiveData%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8%E7%9A%84%E7%94%A8%E6%B3%95/"/>
      <url>/2025/03/15/Room-ViewModel-LiveData%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8%E7%9A%84%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ <code>Android</code> å¼€å‘ä¸­ï¼Œ<code>Room</code>ã€<code>ViewModel</code> å’Œ <code>LiveData</code> ç»å¸¸ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç° <strong>MVVM æ¶æ„</strong>ï¼Œå¹¶æä¾›æŒä¹…åŒ–æ•°æ®å­˜å‚¨ã€ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çš„æ•°æ®ç®¡ç†å’Œè‡ªåŠ¨æ›´æ–° UI çš„èƒ½åŠ›ã€‚</p><hr><h1 id="ğŸ“Œ-1-ä¸»è¦ä½œç”¨"><a href="#ğŸ“Œ-1-ä¸»è¦ä½œç”¨" class="headerlink" title="ğŸ“Œ 1. ä¸»è¦ä½œç”¨"></a><strong>ğŸ“Œ 1. ä¸»è¦ä½œç”¨</strong></h1><table><thead><tr><th><strong>ç»„ä»¶</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>Roomï¼ˆæ•°æ®åº“ï¼‰</strong></td><td>æä¾› SQLite çš„æŠ½è±¡å±‚ï¼Œç®¡ç†æœ¬åœ°æ•°æ®å­˜å‚¨</td></tr><tr><td><strong>ViewModel</strong></td><td>ç®¡ç† UI ç›¸å…³çš„æ•°æ®ï¼Œç¡®ä¿æ•°æ®åœ¨é…ç½®å˜æ›´ï¼ˆå¦‚æ—‹è½¬å±å¹•ï¼‰æ—¶ä¸ä¼šä¸¢å¤±</td></tr><tr><td><strong>LiveData</strong></td><td>è§‚å¯Ÿæ•°æ®å˜åŒ–ï¼Œå¹¶åœ¨ UI ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…è‡ªåŠ¨æ›´æ–°</td></tr></tbody></table><hr><h1 id="ğŸš€-2-ä½¿ç”¨-Room-ViewModel-LiveData-çš„å®Œæ•´ç¤ºä¾‹"><a href="#ğŸš€-2-ä½¿ç”¨-Room-ViewModel-LiveData-çš„å®Œæ•´ç¤ºä¾‹" class="headerlink" title="ğŸš€ 2. ä½¿ç”¨ Room + ViewModel + LiveData çš„å®Œæ•´ç¤ºä¾‹"></a><strong>ğŸš€ 2. ä½¿ç”¨ <code>Room + ViewModel + LiveData</code> çš„å®Œæ•´ç¤ºä¾‹</strong></h1><h3 id="ğŸ“Œ-åŠŸèƒ½ï¼š"><a href="#ğŸ“Œ-åŠŸèƒ½ï¼š" class="headerlink" title="ğŸ“Œ åŠŸèƒ½ï¼š"></a><strong>ğŸ“Œ åŠŸèƒ½</strong>ï¼š</h3><p>æˆ‘ä»¬å®ç°ä¸€ä¸ª<strong>ç®€å•çš„å¾…åŠäº‹é¡¹ï¼ˆToDo Listï¼‰åº”ç”¨</strong>ï¼Œå¯ä»¥ï¼š</p><ul><li><strong>å¢åˆ æŸ¥æ”¹ä»»åŠ¡</strong>ï¼Œæ•°æ®å­˜å‚¨åœ¨ <code>Room</code> æ•°æ®åº“ä¸­ã€‚</li><li><strong>ä½¿ç”¨ <code>LiveData</code></strong> è®© UI <strong>è‡ªåŠ¨æ›´æ–°</strong>ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨åˆ·æ–°ã€‚</li><li><strong><code>ViewModel</code> è´Ÿè´£ç®¡ç†æ•°æ®</strong>ï¼Œé¿å… <code>Activity</code> ç›´æ¥æ“ä½œæ•°æ®åº“ã€‚</li></ul><hr><h2 id="ğŸ“Œ-3-åˆ›å»º-Room-æ•°æ®åº“"><a href="#ğŸ“Œ-3-åˆ›å»º-Room-æ•°æ®åº“" class="headerlink" title="ğŸ“Œ 3. åˆ›å»º Room æ•°æ®åº“"></a><strong>ğŸ“Œ 3. åˆ›å»º Room æ•°æ®åº“</strong></h2><h3 id="ï¼ˆ1ï¼‰å®šä¹‰-Entityï¼ˆæ•°æ®åº“è¡¨ï¼‰"><a href="#ï¼ˆ1ï¼‰å®šä¹‰-Entityï¼ˆæ•°æ®åº“è¡¨ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰å®šä¹‰ Entityï¼ˆæ•°æ®åº“è¡¨ï¼‰"></a><strong>ï¼ˆ1ï¼‰å®šä¹‰ <code>Entity</code>ï¼ˆæ•°æ®åº“è¡¨ï¼‰</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import androidx.room.Entity</span><br><span class="line">import androidx.room.PrimaryKey</span><br><span class="line"></span><br><span class="line">@Entity(tableName = &quot;todo_table&quot;)</span><br><span class="line">data class Todo(</span><br><span class="line">    @PrimaryKey(autoGenerate = true) val id: Int = 0,</span><br><span class="line">    val task: String,</span><br><span class="line">    val isCompleted: Boolean</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li><code>@Entity</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œè¡¨åæ˜¯ <code>todo_table</code>ã€‚</li><li><code>@PrimaryKey(autoGenerate = true)</code>ï¼š<code>id</code> æ˜¯ä¸»é”®ï¼Œ<code>Room</code> ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚</li></ul><hr><h3 id="ï¼ˆ2ï¼‰åˆ›å»º-DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰"><a href="#ï¼ˆ2ï¼‰åˆ›å»º-DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰åˆ›å»º DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰"></a><strong>ï¼ˆ2ï¼‰åˆ›å»º DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.LiveData</span><br><span class="line">import androidx.room.*</span><br><span class="line"></span><br><span class="line">@Dao</span><br><span class="line">interface TodoDao &#123;</span><br><span class="line">    @Insert(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">    suspend fun insert(todo: Todo)</span><br><span class="line"></span><br><span class="line">    @Update</span><br><span class="line">    suspend fun update(todo: Todo)</span><br><span class="line"></span><br><span class="line">    @Delete</span><br><span class="line">    suspend fun delete(todo: Todo)</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM todo_table ORDER BY id DESC&quot;)</span><br><span class="line">    fun getAllTodos(): LiveData&lt;List&lt;Todo&gt;&gt; // ä½¿ç”¨ LiveData è®© UI è‡ªåŠ¨æ›´æ–°</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>@Dao</code>ï¼šæ•°æ®è®¿é—®å¯¹è±¡ï¼Œå®šä¹‰æ•°æ®åº“æ“ä½œã€‚</li><li><code>@Insert</code> &#x2F; <code>@Update</code> &#x2F; <code>@Delete</code>ï¼šæ“ä½œæ•°æ®åº“çš„åŸºæœ¬å¢ã€åˆ ã€æ”¹ã€‚</li><li><code>getAllTodos()</code> è¿”å› <code>LiveData&lt;List&lt;Todo&gt;&gt;</code>ï¼Œ<strong>Room ä¼šè‡ªåŠ¨ç›‘å¬æ•°æ®å˜åŒ–ï¼Œå¹¶æ›´æ–° UI</strong>ã€‚</li></ul><hr><h3 id="ï¼ˆ3ï¼‰åˆ›å»º-Room-æ•°æ®åº“"><a href="#ï¼ˆ3ï¼‰åˆ›å»º-Room-æ•°æ®åº“" class="headerlink" title="ï¼ˆ3ï¼‰åˆ›å»º Room æ•°æ®åº“"></a><strong>ï¼ˆ3ï¼‰åˆ›å»º Room æ•°æ®åº“</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import android.content.Context</span><br><span class="line">import androidx.room.Database</span><br><span class="line">import androidx.room.Room</span><br><span class="line">import androidx.room.RoomDatabase</span><br><span class="line"></span><br><span class="line">@Database(entities = [Todo::class], version = 1, exportSchema = false)</span><br><span class="line">abstract class TodoDatabase : RoomDatabase() &#123;</span><br><span class="line">    abstract fun todoDao(): TodoDao</span><br><span class="line"></span><br><span class="line">    companion object &#123;</span><br><span class="line">        @Volatile</span><br><span class="line">        private var INSTANCE: TodoDatabase? = null</span><br><span class="line"></span><br><span class="line">        fun getDatabase(context: Context): TodoDatabase &#123;</span><br><span class="line">            return INSTANCE ?: synchronized(this) &#123;</span><br><span class="line">                val instance = Room.databaseBuilder(</span><br><span class="line">                    context.applicationContext,</span><br><span class="line">                    TodoDatabase::class.java,</span><br><span class="line">                    &quot;todo_database&quot;</span><br><span class="line">                ).build()</span><br><span class="line">                INSTANCE = instance</span><br><span class="line">                instance</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>@Database(entities = [Todo::class], version = 1)</code>ï¼šå®šä¹‰æ•°æ®åº“ï¼ŒåŒ…å« <code>Todo</code> è¡¨ã€‚</li><li><code>synchronized(this)</code>ï¼šä¿è¯æ•°æ®åº“å®ä¾‹çš„çº¿ç¨‹å®‰å…¨ã€‚</li><li><code>Room.databaseBuilder()</code>ï¼šæ„å»º <code>Room</code> æ•°æ®åº“å®ä¾‹ã€‚</li></ul><hr><h2 id="ğŸ“Œ-4-åˆ›å»º-Repository"><a href="#ğŸ“Œ-4-åˆ›å»º-Repository" class="headerlink" title="ğŸ“Œ 4. åˆ›å»º Repository"></a><strong>ğŸ“Œ 4. åˆ›å»º Repository</strong></h2><p><code>Repository</code> è´Ÿè´£å¤„ç† <code>DAO</code> æ“ä½œï¼Œé¿å… <code>ViewModel</code> ç›´æ¥æ“ä½œæ•°æ®åº“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.LiveData</span><br><span class="line"></span><br><span class="line">class TodoRepository(private val todoDao: TodoDao) &#123;</span><br><span class="line">    val allTodos: LiveData&lt;List&lt;Todo&gt;&gt; = todoDao.getAllTodos()</span><br><span class="line"></span><br><span class="line">    suspend fun insert(todo: Todo) &#123;</span><br><span class="line">        todoDao.insert(todo)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    suspend fun update(todo: Todo) &#123;</span><br><span class="line">        todoDao.update(todo)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    suspend fun delete(todo: Todo) &#123;</span><br><span class="line">        todoDao.delete(todo)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>Repository</code> å°è£… <code>DAO</code>ï¼Œ<strong>ViewModel åªéœ€è¦è°ƒç”¨ <code>Repository</code>ï¼Œè€Œä¸ç›´æ¥æ“ä½œ <code>Room</code></strong>ã€‚</li></ul><hr><h2 id="ğŸ“Œ-5-åˆ›å»º-ViewModel"><a href="#ğŸ“Œ-5-åˆ›å»º-ViewModel" class="headerlink" title="ğŸ“Œ 5. åˆ›å»º ViewModel"></a><strong>ğŸ“Œ 5. åˆ›å»º ViewModel</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.*</span><br><span class="line">import kotlinx.coroutines.launch</span><br><span class="line"></span><br><span class="line">class TodoViewModel(private val repository: TodoRepository) : ViewModel() &#123;</span><br><span class="line">    val allTodos: LiveData&lt;List&lt;Todo&gt;&gt; = repository.allTodos</span><br><span class="line"></span><br><span class="line">    fun insert(todo: Todo) = viewModelScope.launch &#123;</span><br><span class="line">        repository.insert(todo)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun update(todo: Todo) = viewModelScope.launch &#123;</span><br><span class="line">        repository.update(todo)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun delete(todo: Todo) = viewModelScope.launch &#123;</span><br><span class="line">        repository.delete(todo)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>viewModelScope.launch &#123;&#125;</code> è®©æ•°æ®åº“æ“ä½œåœ¨ <strong>åå°çº¿ç¨‹æ‰§è¡Œ</strong>ï¼ˆ<code>suspend</code> éœ€è¦ <code>Coroutine</code>ï¼‰ã€‚</li><li><code>LiveData&lt;List&lt;Todo&gt;&gt;</code> ç¡®ä¿ UI è‡ªåŠ¨æ›´æ–°ã€‚</li></ul><hr><h2 id="ğŸ“Œ-6-åˆ›å»º-ViewModelFactory"><a href="#ğŸ“Œ-6-åˆ›å»º-ViewModelFactory" class="headerlink" title="ğŸ“Œ 6. åˆ›å»º ViewModelFactory"></a><strong>ğŸ“Œ 6. åˆ›å»º ViewModelFactory</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.ViewModel</span><br><span class="line">import androidx.lifecycle.ViewModelProvider</span><br><span class="line"></span><br><span class="line">class TodoViewModelFactory(private val repository: TodoRepository) : ViewModelProvider.Factory &#123;</span><br><span class="line">    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T &#123;</span><br><span class="line">        if (modelClass.isAssignableFrom(TodoViewModel::class.java)) &#123;</span><br><span class="line">            @Suppress(&quot;UNCHECKED_CAST&quot;)</span><br><span class="line">            return TodoViewModel(repository) as T</span><br><span class="line">        &#125;</span><br><span class="line">        throw IllegalArgumentException(&quot;Unknown ViewModel class&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>ViewModelFactory</code> ç”¨äº <strong>ä¼ é€’ <code>Repository</code></strong>ï¼Œè®© <code>ViewModel</code> ä½¿ç”¨ <code>Room</code>ã€‚</li></ul><hr><h2 id="ğŸ“Œ-7-åœ¨-Activity-é‡Œä½¿ç”¨"><a href="#ğŸ“Œ-7-åœ¨-Activity-é‡Œä½¿ç”¨" class="headerlink" title="ğŸ“Œ 7. åœ¨ Activity é‡Œä½¿ç”¨"></a><strong>ğŸ“Œ 7. åœ¨ <code>Activity</code> é‡Œä½¿ç”¨</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private lateinit var todoViewModel: TodoViewModel</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        // è·å–æ•°æ®åº“å®ä¾‹å’Œ DAO</span><br><span class="line">        val database = TodoDatabase.getDatabase(this)</span><br><span class="line">        val repository = TodoRepository(database.todoDao())</span><br><span class="line"></span><br><span class="line">        // åˆ›å»º ViewModel</span><br><span class="line">        val factory = TodoViewModelFactory(repository)</span><br><span class="line">        todoViewModel = ViewModelProvider(this, factory).get(TodoViewModel::class.java)</span><br><span class="line"></span><br><span class="line">        // ç›‘å¬ LiveDataï¼Œæ›´æ–° UI</span><br><span class="line">        todoViewModel.allTodos.observe(this) &#123; todos -&gt;</span><br><span class="line">            // æ›´æ–° RecyclerView æˆ– UI</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ·»åŠ ä»»åŠ¡</span><br><span class="line">        buttonAdd.setOnClickListener &#123;</span><br><span class="line">            val newTodo = Todo(task = &quot;New Task&quot;, isCompleted = false)</span><br><span class="line">            todoViewModel.insert(newTodo)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>getDatabase(this)</code> è·å–æ•°æ®åº“å®ä¾‹ã€‚</li><li><code>ViewModelProvider(this, factory)</code> åˆ›å»º <code>ViewModel</code>ã€‚</li><li><code>LiveData.observe()</code> ç›‘å¬æ•°æ®å˜åŒ–ï¼Œ<strong>UI è‡ªåŠ¨æ›´æ–°</strong>ã€‚</li></ul><hr><h1 id="ğŸ“Œ-8-æ€»ç»“"><a href="#ğŸ“Œ-8-æ€»ç»“" class="headerlink" title="ğŸ“Œ 8. æ€»ç»“"></a><strong>ğŸ“Œ 8. æ€»ç»“</strong></h1><p>âœ… <strong>Room è´Ÿè´£å­˜å‚¨æ•°æ®</strong>ï¼Œ<code>DAO</code> è´Ÿè´£æ•°æ®åº“æ“ä½œã€‚<br> âœ… <strong>ViewModel è´Ÿè´£æŒä¹…åŒ–æ•°æ®</strong>ï¼Œé¿å…å› å±å¹•æ—‹è½¬å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚<br> âœ… <strong>LiveData è®© UI è‡ªåŠ¨æ›´æ–°</strong>ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ·æ–°æ•°æ®ã€‚<br> âœ… <strong>Repository ä½œä¸ºæ•°æ®ä¸­ä»‹</strong>ï¼Œé¿å… <code>ViewModel</code> ç›´æ¥æ“ä½œ <code>Room</code>ã€‚</p><p>ğŸ“Œ <strong>æœ€ç»ˆæ•ˆæœ</strong>ï¼š</p><ol><li><strong>æ•°æ®åº“å˜æ›´æ—¶ï¼ŒUI è‡ªåŠ¨æ›´æ–°</strong>ï¼ˆ<code>LiveData</code>ï¼‰ã€‚</li><li><strong>ViewModel è®©æ•°æ®åœ¨ Activity&#x2F;Fragment ç”Ÿå‘½å‘¨æœŸå†…æŒä¹…åŒ–</strong>ã€‚</li><li><strong>Repository è®©æ•°æ®ç®¡ç†æ›´æ¸…æ™°</strong>ï¼Œé¿å… <code>ViewModel</code> ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚</li></ol><p>ğŸ’¡ <strong>è¿™æ ·ï¼Œæˆ‘ä»¬çš„ <code>MVVM + Room</code> æ¶æ„æ›´åŠ æ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§æ›´å¼ºï¼</strong> ğŸš€</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å“çŸ¥è¯†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ViewModelç”¨æ³•</title>
      <link href="/2025/03/15/ViewModel%E7%94%A8%E6%B3%95/"/>
      <url>/2025/03/15/ViewModel%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><code>ViewModel</code> æ˜¯ Android æ¶æ„ç»„ä»¶ä¹‹ä¸€ï¼Œ<strong>ç”¨äºç®¡ç† UI ç›¸å…³çš„æ•°æ®</strong>ï¼Œå¹¶åœ¨ <strong>é…ç½®æ›´æ”¹ï¼ˆå¦‚å±å¹•æ—‹è½¬ï¼‰æ—¶ä¿æŒæ•°æ®ä¸ä¸¢å¤±</strong>ã€‚</p><hr><h2 id="ğŸ”¹-1-æ·»åŠ -ViewModel-ä¾èµ–"><a href="#ğŸ”¹-1-æ·»åŠ -ViewModel-ä¾èµ–" class="headerlink" title="ğŸ”¹ 1. æ·»åŠ  ViewModel ä¾èµ–"></a><strong>ğŸ”¹ 1. æ·»åŠ  ViewModel ä¾èµ–</strong></h2><p>åœ¨ <code>build.gradle.kts</code>ï¼ˆæ¨¡å—çº§ï¼‰ä¸­æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.2&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-2-åˆ›å»º-ViewModel"><a href="#ğŸ”¹-2-åˆ›å»º-ViewModel" class="headerlink" title="ğŸ”¹ 2. åˆ›å»º ViewModel"></a><strong>ğŸ”¹ 2. åˆ›å»º ViewModel</strong></h2><h3 id="ï¼ˆ1ï¼‰åŸºç¡€-ViewModel"><a href="#ï¼ˆ1ï¼‰åŸºç¡€-ViewModel" class="headerlink" title="ï¼ˆ1ï¼‰åŸºç¡€ ViewModel"></a><strong>ï¼ˆ1ï¼‰åŸºç¡€ ViewModel</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.ViewModel</span><br><span class="line"></span><br><span class="line">class CounterViewModel : ViewModel() &#123;</span><br><span class="line">    var count = 0 // ViewModel å˜é‡ï¼ˆActivity é‡å»ºåä¸ä¼šä¸¢å¤±ï¼‰</span><br><span class="line"></span><br><span class="line">    fun increment() &#123;</span><br><span class="line">        count++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¹-3-åœ¨-Activity-Fragment-ä¸­ä½¿ç”¨"><a href="#ğŸ”¹-3-åœ¨-Activity-Fragment-ä¸­ä½¿ç”¨" class="headerlink" title="ğŸ”¹ 3. åœ¨ Activity&#x2F;Fragment ä¸­ä½¿ç”¨"></a><strong>ğŸ”¹ 3. åœ¨ Activity&#x2F;Fragment ä¸­ä½¿ç”¨</strong></h2><h3 id="ï¼ˆ1ï¼‰Activity-è·å–-ViewModel"><a href="#ï¼ˆ1ï¼‰Activity-è·å–-ViewModel" class="headerlink" title="ï¼ˆ1ï¼‰Activity è·å– ViewModel"></a><strong>ï¼ˆ1ï¼‰Activity è·å– ViewModel</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import android.os.Bundle</span><br><span class="line">import android.widget.TextView</span><br><span class="line">import androidx.activity.viewModels</span><br><span class="line">import androidx.appcompat.app.AppCompatActivity</span><br><span class="line"></span><br><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private val counterViewModel: CounterViewModel by viewModels() // é€šè¿‡ viewModels() è·å– ViewModel</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        val textView: TextView = findViewById(R.id.counterText)</span><br><span class="line">        val button: Button = findViewById(R.id.incrementButton)</span><br><span class="line"></span><br><span class="line">        // æ˜¾ç¤ºå½“å‰è®¡æ•°</span><br><span class="line">        textView.text = counterViewModel.count.toString()</span><br><span class="line"></span><br><span class="line">        // ç‚¹å‡»æŒ‰é’®å¢åŠ è®¡æ•°</span><br><span class="line">        button.setOnClickListener &#123;</span><br><span class="line">            counterViewModel.increment()</span><br><span class="line">            textView.text = counterViewModel.count.toString()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>å³ä½¿æ—‹è½¬å±å¹•ï¼Œ<code>count</code> ä¹Ÿä¸ä¼šé‡ç½®</strong>ã€‚</p><hr><h2 id="ğŸ”¹-4-ViewModel-LiveData-ç›‘å¬æ•°æ®å˜åŒ–"><a href="#ğŸ”¹-4-ViewModel-LiveData-ç›‘å¬æ•°æ®å˜åŒ–" class="headerlink" title="ğŸ”¹ 4. ViewModel + LiveData ç›‘å¬æ•°æ®å˜åŒ–"></a><strong>ğŸ”¹ 4. ViewModel + LiveData ç›‘å¬æ•°æ®å˜åŒ–</strong></h2><p>ä½¿ç”¨ <code>LiveData</code>ï¼Œ<strong>UI ä¼šè‡ªåŠ¨æ›´æ–°</strong>ï¼š</p><h3 id="ï¼ˆ1ï¼‰ViewModelï¼ˆä½¿ç”¨-LiveDataï¼‰"><a href="#ï¼ˆ1ï¼‰ViewModelï¼ˆä½¿ç”¨-LiveDataï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰ViewModelï¼ˆä½¿ç”¨ LiveDataï¼‰"></a><strong>ï¼ˆ1ï¼‰ViewModelï¼ˆä½¿ç”¨ <code>LiveData</code>ï¼‰</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.LiveData</span><br><span class="line">import androidx.lifecycle.MutableLiveData</span><br><span class="line">import androidx.lifecycle.ViewModel</span><br><span class="line"></span><br><span class="line">class CounterViewModel : ViewModel() &#123;</span><br><span class="line">    private val _count = MutableLiveData(0) // å¯å˜ LiveData</span><br><span class="line">    val count: LiveData&lt;Int&gt; = _count // åªæš´éœ²ä¸å¯å˜ LiveData</span><br><span class="line"></span><br><span class="line">    fun increment() &#123;</span><br><span class="line">        _count.value = (_count.value ?: 0) + 1 // æ›´æ–°æ•°æ®</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰Activity-è§‚å¯Ÿ-LiveData"><a href="#ï¼ˆ2ï¼‰Activity-è§‚å¯Ÿ-LiveData" class="headerlink" title="ï¼ˆ2ï¼‰Activity è§‚å¯Ÿ LiveData"></a><strong>ï¼ˆ2ï¼‰Activity è§‚å¯Ÿ LiveData</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private val counterViewModel: CounterViewModel by viewModels()</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        val textView: TextView = findViewById(R.id.counterText)</span><br><span class="line">        val button: Button = findViewById(R.id.incrementButton)</span><br><span class="line"></span><br><span class="line">        // è§‚å¯Ÿ LiveDataï¼Œè‡ªåŠ¨æ›´æ–° UI</span><br><span class="line">        counterViewModel.count.observe(this) &#123; newCount -&gt;</span><br><span class="line">            textView.text = newCount.toString()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        button.setOnClickListener &#123;</span><br><span class="line">            counterViewModel.increment()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong><code>LiveData</code> ç¡®ä¿æ•°æ®å˜åŒ–æ—¶ï¼ŒUI ä¼šè‡ªåŠ¨æ›´æ–°</strong>ã€‚</p><hr><h2 id="ğŸ”¹-5-å¤„ç†-ViewModel-ä¾èµ–ï¼ˆå¸¦å‚æ•°çš„-ViewModelï¼‰"><a href="#ğŸ”¹-5-å¤„ç†-ViewModel-ä¾èµ–ï¼ˆå¸¦å‚æ•°çš„-ViewModelï¼‰" class="headerlink" title="ğŸ”¹ 5. å¤„ç† ViewModel ä¾èµ–ï¼ˆå¸¦å‚æ•°çš„ ViewModelï¼‰"></a><strong>ğŸ”¹ 5. å¤„ç† ViewModel ä¾èµ–ï¼ˆå¸¦å‚æ•°çš„ ViewModelï¼‰</strong></h2><h3 id="ï¼ˆ1ï¼‰ViewModel-éœ€è¦å‚æ•°"><a href="#ï¼ˆ1ï¼‰ViewModel-éœ€è¦å‚æ•°" class="headerlink" title="ï¼ˆ1ï¼‰ViewModel éœ€è¦å‚æ•°"></a><strong>ï¼ˆ1ï¼‰ViewModel éœ€è¦å‚æ•°</strong></h3><p>å¦‚æœ <code>ViewModel</code> éœ€è¦å‚æ•°ï¼ˆå¦‚ <code>Repository</code>ï¼‰ï¼Œéœ€è¦åˆ›å»º <code>ViewModelProvider.Factory</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class CounterViewModel(private val startValue: Int) : ViewModel() &#123;</span><br><span class="line">    private val _count = MutableLiveData(startValue)</span><br><span class="line">    val count: LiveData&lt;Int&gt; = _count</span><br><span class="line"></span><br><span class="line">    fun increment() &#123;</span><br><span class="line">        _count.value = (_count.value ?: 0) + 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰ ViewModelFactory</span><br><span class="line">class CounterViewModelFactory(private val startValue: Int) : ViewModelProvider.Factory &#123;</span><br><span class="line">    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T &#123;</span><br><span class="line">        if (modelClass.isAssignableFrom(CounterViewModel::class.java)) &#123;</span><br><span class="line">            @Suppress(&quot;UNCHECKED_CAST&quot;)</span><br><span class="line">            return CounterViewModel(startValue) as T</span><br><span class="line">        &#125;</span><br><span class="line">        throw IllegalArgumentException(&quot;Unknown ViewModel class&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰Activity-è·å–å¸¦å‚æ•°çš„-ViewModel"><a href="#ï¼ˆ2ï¼‰Activity-è·å–å¸¦å‚æ•°çš„-ViewModel" class="headerlink" title="ï¼ˆ2ï¼‰Activity è·å–å¸¦å‚æ•°çš„ ViewModel"></a><strong>ï¼ˆ2ï¼‰Activity è·å–å¸¦å‚æ•°çš„ ViewModel</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private val counterViewModel: CounterViewModel by viewModels &#123;</span><br><span class="line">        CounterViewModelFactory(5) // ä¼ å…¥åˆå§‹å€¼ 5</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        val textView: TextView = findViewById(R.id.counterText)</span><br><span class="line">        val button: Button = findViewById(R.id.incrementButton)</span><br><span class="line"></span><br><span class="line">        counterViewModel.count.observe(this) &#123; newCount -&gt;</span><br><span class="line">            textView.text = newCount.toString()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        button.setOnClickListener &#123;</span><br><span class="line">            counterViewModel.increment()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>æ”¯æŒå¸¦å‚æ•°çš„ ViewModelï¼ˆå¦‚ä»æ•°æ®åº“æˆ–ç½‘ç»œè·å–åˆå§‹æ•°æ®ï¼‰</strong>ã€‚</p><hr><h2 id="ğŸ”¹-6-ViewModel-Room-æŒä¹…åŒ–æ•°æ®åº“æ•°æ®"><a href="#ğŸ”¹-6-ViewModel-Room-æŒä¹…åŒ–æ•°æ®åº“æ•°æ®" class="headerlink" title="ğŸ”¹ 6. ViewModel + Room æŒä¹…åŒ–æ•°æ®åº“æ•°æ®"></a><strong>ğŸ”¹ 6. ViewModel + Room æŒä¹…åŒ–æ•°æ®åº“æ•°æ®</strong></h2><p>å¦‚æœä½ ä½¿ç”¨ <code>Room</code> å­˜å‚¨æ•°æ®ï¼Œ<code>ViewModel</code> å¯ä»¥ç›´æ¥ä» <code>Room</code> è·å– <code>LiveData</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">interface DiaryDao &#123;</span><br><span class="line">    @Query(&quot;SELECT * FROM diary_entries ORDER BY date DESC&quot;)</span><br><span class="line">    fun getAllDiaries(): LiveData&lt;List&lt;DiaryEntry&gt;&gt; // LiveData ç›‘å¬æ•°æ®åº“</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class DiaryViewModel(private val diaryDao: DiaryDao) : ViewModel() &#123;</span><br><span class="line">    val diaryList: LiveData&lt;List&lt;DiaryEntry&gt;&gt; = diaryDao.getAllDiaries()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>Fragment</code> è§‚å¯Ÿæ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">diaryViewModel.diaryList.observe(viewLifecycleOwner) &#123; diaryList -&gt;</span><br><span class="line">    diaryAdapter.submitList(diaryList) // æ›´æ–° UI</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>Room + ViewModel + LiveData ç¡®ä¿æ•°æ®æŒä¹…åŒ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–° UI</strong>ã€‚</p><hr><h2 id="ğŸ”¹-7-ViewModel-Kotlin-Flowï¼ˆåç¨‹ï¼‰"><a href="#ğŸ”¹-7-ViewModel-Kotlin-Flowï¼ˆåç¨‹ï¼‰" class="headerlink" title="ğŸ”¹ 7. ViewModel + Kotlin Flowï¼ˆåç¨‹ï¼‰"></a><strong>ğŸ”¹ 7. ViewModel + Kotlin Flowï¼ˆåç¨‹ï¼‰</strong></h2><p>å¦‚æœä½ ç”¨ <code>Flow</code>ï¼Œå¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class DiaryViewModel(private val diaryDao: DiaryDao) : ViewModel() &#123;</span><br><span class="line">    val diaryListFlow = diaryDao.getAllDiariesFlow()</span><br><span class="line">        .stateIn(viewModelScope, SharingStarted.Lazily, emptyList()) // è½¬ä¸º StateFlow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>Fragment</code> ä¸­ <code>collect</code> æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lifecycleScope.launch &#123;</span><br><span class="line">    viewModel.diaryListFlow.collect &#123; diaryList -&gt;</span><br><span class="line">        diaryAdapter.submitList(diaryList)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong><code>Flow</code> æ›´é€‚åˆå¤æ‚æ•°æ®æµï¼ˆå¦‚æ•°æ®åº“ã€ç½‘ç»œè¯·æ±‚ï¼‰</strong>ã€‚</p><hr><h2 id="ğŸ”¹-8-ViewModel-ç”Ÿå‘½å‘¨æœŸ"><a href="#ğŸ”¹-8-ViewModel-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ğŸ”¹ 8. ViewModel ç”Ÿå‘½å‘¨æœŸ"></a><strong>ğŸ”¹ 8. ViewModel ç”Ÿå‘½å‘¨æœŸ</strong></h2><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>ViewModel ä½œç”¨</strong></th></tr></thead><tbody><tr><td>æ—‹è½¬å±å¹•</td><td>ä¿æŒæ•°æ®ä¸ä¸¢å¤±</td></tr><tr><td>App è¿›åå°</td><td>ViewModel å¯èƒ½è¢«é”€æ¯ï¼ˆå¯ç”¨ <code>SavedStateHandle</code> å¤„ç†ï¼‰</td></tr><tr><td>Fragment åˆ‡æ¢</td><td>å…±äº« <code>ViewModel</code> ä»¥ä¿ç•™æ•°æ®</td></tr></tbody></table><hr><h2 id="ğŸ”¹-æ€»ç»“"><a href="#ğŸ”¹-æ€»ç»“" class="headerlink" title="ğŸ”¹ æ€»ç»“"></a><strong>ğŸ”¹ æ€»ç»“</strong></h2><p>âœ… <code>ViewModel</code> <strong>ç”¨äºç®¡ç† UI ç›¸å…³æ•°æ®ï¼Œé¿å…å› å±å¹•æ—‹è½¬å¯¼è‡´æ•°æ®ä¸¢å¤±</strong>ã€‚<br> âœ… æ­é… <code>LiveData</code> <strong>è‡ªåŠ¨é€šçŸ¥ UI å˜åŒ–</strong>ã€‚<br> âœ… <code>ViewModel</code> + <code>Room</code> <strong>å¯ä»¥è‡ªåŠ¨ç›‘å¬æ•°æ®åº“å˜åŒ–</strong>ã€‚<br> âœ… <code>ViewModel</code> + <code>Flow</code> <strong>é€‚åˆå¤æ‚æ•°æ®æµå¤„ç†</strong>ã€‚<br> âœ… <code>ViewModelFactory</code> <strong>ç”¨äºåˆ›å»ºå¸¦å‚æ•°çš„ ViewModel</strong>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å“çŸ¥è¯†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Roomç”¨æ³•</title>
      <link href="/2025/03/15/Room%E7%94%A8%E6%B3%95/"/>
      <url>/2025/03/15/Room%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>Room æ˜¯ Android å®˜æ–¹æ¨èçš„æ•°æ®åº“æ¡†æ¶ï¼Œå®ƒæ˜¯ SQLite çš„æŠ½è±¡å°è£…ï¼Œæä¾›äº†æ›´ä¾¿æ·çš„æ•°æ®åº“æ“ä½œæ–¹å¼ï¼Œæ”¯æŒ Kotlin åç¨‹å’Œ LiveDataã€‚ä»¥ä¸‹æ˜¯ Room çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼š</p><hr><h2 id="1-æ·»åŠ -Room-ä¾èµ–"><a href="#1-æ·»åŠ -Room-ä¾èµ–" class="headerlink" title="1. æ·»åŠ  Room ä¾èµ–"></a><strong>1. æ·»åŠ  Room ä¾èµ–</strong></h2><p>åœ¨ <code>build.gradle.kts</code>ï¼ˆæ¨¡å—çº§ï¼‰ä¸­æ·»åŠ  Room ç›¸å…³ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    val room_version = &quot;2.6.1&quot; // ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">    implementation(&quot;androidx.room:room-runtime:$room_version&quot;)</span><br><span class="line">    kapt(&quot;androidx.room:room-compiler:$room_version&quot;) // ç”¨äºæ³¨è§£å¤„ç†å™¨</span><br><span class="line"></span><br><span class="line">    implementation(&quot;androidx.room:room-ktx:$room_version&quot;) // æ”¯æŒ Kotlin åç¨‹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœé¡¹ç›®ä½¿ç”¨ Kotlin Symbol Processing (KSP) ä»£æ›¿ kaptï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ksp(&quot;androidx.room:room-compiler:$room_version&quot;)</span><br></pre></td></tr></table></figure><hr><h2 id="2-åˆ›å»ºæ•°æ®åº“å®ä½“ï¼ˆEntityï¼‰"><a href="#2-åˆ›å»ºæ•°æ®åº“å®ä½“ï¼ˆEntityï¼‰" class="headerlink" title="2. åˆ›å»ºæ•°æ®åº“å®ä½“ï¼ˆEntityï¼‰"></a><strong>2. åˆ›å»ºæ•°æ®åº“å®ä½“ï¼ˆEntityï¼‰</strong></h2><p>ä½¿ç”¨ <code>@Entity</code> æ³¨è§£å®šä¹‰æ•°æ®åº“è¡¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import androidx.room.Entity</span><br><span class="line">import androidx.room.PrimaryKey</span><br><span class="line"></span><br><span class="line">@Entity(tableName = &quot;diary_entries&quot;) // æŒ‡å®šè¡¨å</span><br><span class="line">data class DiaryEntry(</span><br><span class="line">    @PrimaryKey(autoGenerate = true) val id: Int = 0, // ä¸»é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆ</span><br><span class="line">    val title: String,</span><br><span class="line">    val content: String,</span><br><span class="line">    val date: Long, // ä»¥æ—¶é—´æˆ³å½¢å¼å­˜å‚¨æ—¥æœŸ</span><br><span class="line">    val weather: String? = null</span><br><span class="line">)</span><br></pre></td></tr></table></figure><hr><h2 id="3-åˆ›å»º-DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰"><a href="#3-åˆ›å»º-DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰" class="headerlink" title="3. åˆ›å»º DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰"></a><strong>3. åˆ›å»º DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰</strong></h2><p>DAO è´Ÿè´£æ•°æ®åº“çš„ CRUD æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import androidx.room.*</span><br><span class="line"></span><br><span class="line">@Dao</span><br><span class="line">interface DiaryDao &#123;</span><br><span class="line">    @Insert(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">    suspend fun insertDiary(entry: DiaryEntry)</span><br><span class="line"></span><br><span class="line">    @Update</span><br><span class="line">    suspend fun updateDiary(entry: DiaryEntry)</span><br><span class="line"></span><br><span class="line">    @Delete</span><br><span class="line">    suspend fun deleteDiary(entry: DiaryEntry)</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM diary_entries ORDER BY date DESC&quot;)</span><br><span class="line">    fun getAllDiaries(): List&lt;DiaryEntry&gt; // ç›´æ¥è¿”å›åˆ—è¡¨ï¼ˆä¸æ¨èï¼Œå»ºè®®ä½¿ç”¨ Flowï¼‰</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM diary_entries WHERE id = :id&quot;)</span><br><span class="line">    suspend fun getDiaryById(id: Int): DiaryEntry?</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM diary_entries WHERE title LIKE &#x27;%&#x27; || :query || &#x27;%&#x27;&quot;)</span><br><span class="line">    fun searchDiaries(query: String): List&lt;DiaryEntry&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ç›‘å¬æ•°æ®å˜åŒ–ï¼Œå¯ä»¥ç”¨ <code>Flow</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Query(&quot;SELECT * FROM diary_entries ORDER BY date DESC&quot;)</span><br><span class="line">fun getAllDiariesFlow(): Flow&lt;List&lt;DiaryEntry&gt;&gt; // ä½¿ç”¨ Flow ä»¥æ”¯æŒå®æ—¶ç›‘å¬</span><br></pre></td></tr></table></figure><hr><h2 id="4-åˆ›å»ºæ•°æ®åº“ï¼ˆDatabaseï¼‰"><a href="#4-åˆ›å»ºæ•°æ®åº“ï¼ˆDatabaseï¼‰" class="headerlink" title="4. åˆ›å»ºæ•°æ®åº“ï¼ˆDatabaseï¼‰"></a><strong>4. åˆ›å»ºæ•°æ®åº“ï¼ˆDatabaseï¼‰</strong></h2><p>ä½¿ç”¨ <code>@Database</code> æ³¨è§£åˆ›å»º Room æ•°æ®åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import android.content.Context</span><br><span class="line">import androidx.room.Database</span><br><span class="line">import androidx.room.Room</span><br><span class="line">import androidx.room.RoomDatabase</span><br><span class="line"></span><br><span class="line">@Database(entities = [DiaryEntry::class], version = 1, exportSchema = false)</span><br><span class="line">abstract class DiaryDatabase : RoomDatabase() &#123;</span><br><span class="line">    abstract fun diaryDao(): DiaryDao</span><br><span class="line"></span><br><span class="line">    companion object &#123;</span><br><span class="line">        @Volatile</span><br><span class="line">        private var INSTANCE: DiaryDatabase? = null</span><br><span class="line"></span><br><span class="line">        fun getDatabase(context: Context): DiaryDatabase &#123;</span><br><span class="line">            return INSTANCE ?: synchronized(this) &#123;</span><br><span class="line">                val instance = Room.databaseBuilder(</span><br><span class="line">                    context.applicationContext,</span><br><span class="line">                    DiaryDatabase::class.java,</span><br><span class="line">                    &quot;diary_database&quot;</span><br><span class="line">                ).build()</span><br><span class="line">                INSTANCE = instance</span><br><span class="line">                instance</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><code>@Volatile</code> ç¡®ä¿å¤šä¸ªçº¿ç¨‹èƒ½æ­£ç¡®è®¿é—® <code>INSTANCE</code>ã€‚</li><li><code>synchronized(this)</code> ç¡®ä¿æ•°æ®åº“å®ä¾‹çš„å•ä¾‹æ¨¡å¼ã€‚</li></ul></blockquote><hr><h2 id="5-åœ¨-ViewModel-ä¸­ä½¿ç”¨"><a href="#5-åœ¨-ViewModel-ä¸­ä½¿ç”¨" class="headerlink" title="5. åœ¨ ViewModel ä¸­ä½¿ç”¨"></a><strong>5. åœ¨ ViewModel ä¸­ä½¿ç”¨</strong></h2><p>åœ¨ <code>ViewModel</code> é‡Œå°è£…æ•°æ®åº“æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.ViewModel</span><br><span class="line">import kotlinx.coroutines.flow.Flow</span><br><span class="line"></span><br><span class="line">class DiaryViewModel(private val diaryDao: DiaryDao) : ViewModel() &#123;</span><br><span class="line">    val allDiaries: Flow&lt;List&lt;DiaryEntry&gt;&gt; = diaryDao.getAllDiariesFlow()</span><br><span class="line"></span><br><span class="line">    suspend fun addDiary(entry: DiaryEntry) &#123;</span><br><span class="line">        diaryDao.insertDiary(entry)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    suspend fun deleteDiary(entry: DiaryEntry) &#123;</span><br><span class="line">        diaryDao.deleteDiary(entry)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>viewmodel</code> ç›®å½•ä¸‹æ–°å»º <code>DiaryViewModelFactory.kt</code> æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import androidx.lifecycle.ViewModel</span><br><span class="line">import androidx.lifecycle.ViewModelProvider</span><br><span class="line">import com.example.uibestpractice.data.DiaryDao // æ›¿æ¢ä¸ºä½ çš„åŒ…å</span><br><span class="line"></span><br><span class="line">class DiaryViewModelFactory(private val diaryDao: DiaryDao) : ViewModelProvider.Factory &#123;</span><br><span class="line">    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T &#123;</span><br><span class="line">        if (modelClass.isAssignableFrom(DiaryViewModel::class.java)) &#123;</span><br><span class="line">            return DiaryViewModel(diaryDao) as T</span><br><span class="line">        &#125;</span><br><span class="line">        throw IllegalArgumentException(&quot;Unknown ViewModel class&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-åœ¨-Activity-Fragment-ä¸­ä½¿ç”¨"><a href="#6-åœ¨-Activity-Fragment-ä¸­ä½¿ç”¨" class="headerlink" title="6. åœ¨ Activity&#x2F;Fragment ä¸­ä½¿ç”¨"></a><strong>6. åœ¨ Activity&#x2F;Fragment ä¸­ä½¿ç”¨</strong></h2><p>åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> é‡Œä½¿ç”¨ ViewModelï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import android.os.Bundle</span><br><span class="line">import androidx.activity.viewModels</span><br><span class="line">import androidx.appcompat.app.AppCompatActivity</span><br><span class="line">import androidx.lifecycle.lifecycleScope</span><br><span class="line">import kotlinx.coroutines.launch</span><br><span class="line"></span><br><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private val diaryViewModel: DiaryViewModel by viewModels &#123;</span><br><span class="line">        DiaryViewModelFactory(DiaryDatabase.getDatabase(this).diaryDao())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line"></span><br><span class="line">        // ç›‘å¬æ•°æ®åº“å˜åŒ–</span><br><span class="line">        lifecycleScope.launch &#123;</span><br><span class="line">            diaryViewModel.allDiaries.collect &#123; diaryList -&gt;</span><br><span class="line">                // æ›´æ–° UI</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun addDiaryEntry() &#123;</span><br><span class="line">        lifecycleScope.launch &#123;</span><br><span class="line">            val newEntry = DiaryEntry(title = &quot;æ–°æ—¥è®°&quot;, content = &quot;ä»Šå¤©å¾ˆå¼€å¿ƒï¼&quot;, date = System.currentTimeMillis())</span><br><span class="line">            diaryViewModel.addDiary(newEntry)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="7-çº¿ç¨‹è°ƒåº¦ï¼ˆåç¨‹ï¼‰"><a href="#7-çº¿ç¨‹è°ƒåº¦ï¼ˆåç¨‹ï¼‰" class="headerlink" title="7. çº¿ç¨‹è°ƒåº¦ï¼ˆåç¨‹ï¼‰"></a><strong>7. çº¿ç¨‹è°ƒåº¦ï¼ˆåç¨‹ï¼‰</strong></h2><p>Room å…è®¸åœ¨ <code>suspend</code> å‡½æ•°ä¸­è°ƒç”¨æ•°æ®åº“æ“ä½œï¼ŒKotlin åç¨‹ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° IO çº¿ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">suspend fun insertDiary(entry: DiaryEntry) &#123;</span><br><span class="line">    diaryDao.insertDiary(entry) // Room åœ¨ IO çº¿ç¨‹æ‰§è¡Œ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äº <strong>ä¸æ”¯æŒåç¨‹çš„å‡½æ•°</strong>ï¼ˆå¦‚ <code>getAllDiaries()</code>ï¼‰ï¼Œåº”ä½¿ç”¨ <code>withContext(Dispatchers.IO)</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fun getAllDiariesBlocking(): List&lt;DiaryEntry&gt; &#123;</span><br><span class="line">    return runBlocking &#123; withContext(Dispatchers.IO) &#123; diaryDao.getAllDiaries() &#125; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><p>Room æä¾›äº† <strong>ç®€å•ã€å®‰å…¨ã€é«˜æ•ˆ</strong> çš„æ•°æ®åº“ç®¡ç†ï¼š</p><ol><li><strong>Entity</strong>ï¼ˆè¡¨ï¼‰ â†’ <code>@Entity</code></li><li><strong>DAO</strong>ï¼ˆæ•°æ®æ“ä½œï¼‰ â†’ <code>@Dao</code></li><li><strong>Database</strong>ï¼ˆæ•°æ®åº“å®ä¾‹ï¼‰ â†’ <code>@Database</code></li><li><strong>ViewModel</strong>ï¼ˆå°è£…ä¸šåŠ¡é€»è¾‘ï¼‰</li><li><strong>Activity&#x2F;Fragment</strong>ï¼ˆUI å±‚ä½¿ç”¨æ•°æ®åº“ï¼‰</li></ol><p>ä½ å¯ä»¥ç»“åˆ <code>Flow</code> è¿›è¡Œ <strong>å®æ—¶ç›‘å¬</strong>ï¼Œç»“åˆ <strong>Kotlin åç¨‹</strong> è¿›è¡Œ <strong>å¼‚æ­¥å¤„ç†</strong>ï¼Œä½¿æ•°æ®åº“æ“ä½œæ›´åŠ æµç•…é«˜æ•ˆã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å“çŸ¥è¯†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>startActivityå’ŒregisterForActivityResultçš„ç”¨æ³•</title>
      <link href="/2025/03/14/startActivity%E5%92%8CregisterForActivityResult%E7%9A%84%E7%94%A8%E6%B3%95/"/>
      <url>/2025/03/14/startActivity%E5%92%8CregisterForActivityResult%E7%9A%84%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Android Kotlin å¼€å‘ä¸­ï¼Œ<code>startActivity</code> å’Œ <code>registerForActivityResult</code> æ˜¯å¯åŠ¨æ–° Activity å¹¶å¤„ç†è¿”å›ç»“æœçš„ä¸¤ç§æ–¹å¼ã€‚</p><hr><h2 id="1-ä½¿ç”¨-startActivity"><a href="#1-ä½¿ç”¨-startActivity" class="headerlink" title="1. ä½¿ç”¨ startActivity"></a>1. ä½¿ç”¨ <code>startActivity</code></h2><p><code>startActivity</code> é€‚ç”¨äº <strong>ä¸éœ€è¦è·å–è¿”å›å€¼</strong> çš„æƒ…å†µï¼Œä¾‹å¦‚ä» <code>MainActivity</code> è·³è½¬åˆ° <code>SecondActivity</code>ï¼š</p><h3 id="ç¤ºä¾‹ï¼šå¯åŠ¨æ–°-Activity"><a href="#ç¤ºä¾‹ï¼šå¯åŠ¨æ–°-Activity" class="headerlink" title="ç¤ºä¾‹ï¼šå¯åŠ¨æ–° Activity"></a><strong>ç¤ºä¾‹ï¼šå¯åŠ¨æ–° Activity</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val intent = Intent(this, SecondActivity::class.java)</span><br><span class="line">startActivity(intent)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ éœ€è¦ä¼ é€’æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val intent = Intent(this, SecondActivity::class.java).apply &#123;</span><br><span class="line">    putExtra(&quot;key&quot;, &quot;Hello, SecondActivity!&quot;)</span><br><span class="line">&#125;</span><br><span class="line">startActivity(intent)</span><br></pre></td></tr></table></figure><p>åœ¨ <code>SecondActivity</code> ä¸­è·å–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val data = intent.getStringExtra(&quot;key&quot;)</span><br></pre></td></tr></table></figure><hr><h2 id="2-ä½¿ç”¨-registerForActivityResult"><a href="#2-ä½¿ç”¨-registerForActivityResult" class="headerlink" title="2. ä½¿ç”¨ registerForActivityResult"></a>2. ä½¿ç”¨ <code>registerForActivityResult</code></h2><p><code>registerForActivityResult</code> é€‚ç”¨äº <strong>éœ€è¦ä»å­ Activity è¿”å›æ•°æ®</strong> çš„æƒ…å†µï¼Œæ¯”å¦‚ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–‡ä»¶æˆ–æ‹ç…§åè¿”å›å›¾ç‰‡ã€‚</p><h3 id="ç¤ºä¾‹ï¼šå¯åŠ¨-Activity-å¹¶è·å–è¿”å›å€¼"><a href="#ç¤ºä¾‹ï¼šå¯åŠ¨-Activity-å¹¶è·å–è¿”å›å€¼" class="headerlink" title="ç¤ºä¾‹ï¼šå¯åŠ¨ Activity å¹¶è·å–è¿”å›å€¼"></a><strong>ç¤ºä¾‹ï¼šå¯åŠ¨ Activity å¹¶è·å–è¿”å›å€¼</strong></h3><p>å…ˆåœ¨ä¸» Activity ä¸­æ³¨å†Œä¸€ä¸ª <code>ActivityResultLauncher</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">private val launcher=registerForActivityResult(ActivityResultContracts.StartActivityForResult())&#123; result -&gt;</span><br><span class="line">    if (result.resultCode == Activity.RESULT_OK) &#123;</span><br><span class="line">        val data = result.data?.getStringExtra(&quot;result_key&quot;)</span><br><span class="line">        Toast.makeText(this, &quot;æ”¶åˆ°è¿”å›å€¼: $data&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨ <code>launcher.launch(intent)</code> å¯åŠ¨æ–° Activityï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val intent = Intent(this, SecondActivity::class.java)</span><br><span class="line">launcher.launch(intent)</span><br></pre></td></tr></table></figure><h3 id="åœ¨-SecondActivity-å¤„ç†è¿”å›æ•°æ®"><a href="#åœ¨-SecondActivity-å¤„ç†è¿”å›æ•°æ®" class="headerlink" title="åœ¨ SecondActivity å¤„ç†è¿”å›æ•°æ®"></a><strong>åœ¨ SecondActivity å¤„ç†è¿”å›æ•°æ®</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val resultIntent = Intent().apply &#123;</span><br><span class="line">    putExtra(&quot;result_key&quot;, &quot;è¿”å›çš„æ•°æ®&quot;)</span><br><span class="line">&#125;</span><br><span class="line">setResult(Activity.RESULT_OK, resultIntent)</span><br><span class="line">finish()</span><br></pre></td></tr></table></figure><hr><h2 id="3-startActivityForResult-å·²åºŸå¼ƒ"><a href="#3-startActivityForResult-å·²åºŸå¼ƒ" class="headerlink" title="3. startActivityForResult å·²åºŸå¼ƒ"></a>3. <code>startActivityForResult</code> å·²åºŸå¼ƒ</h2><p><code>startActivityForResult</code> åœ¨ API 30ï¼ˆAndroid 11ï¼‰å¼€å§‹è¢« <strong>å¼ƒç”¨</strong>ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ <code>registerForActivityResult</code> ä»£æ›¿ã€‚</p><p>å¦‚æœä½ çš„ä»£ç ä»ç„¶ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">startActivityForResult(intent, REQUEST_CODE)</span><br></pre></td></tr></table></figure><p>åˆ™åº”æ”¹ç”¨ <code>registerForActivityResult</code>ã€‚</p><hr><h2 id="4-å…¶ä»–-ActivityResultContracts"><a href="#4-å…¶ä»–-ActivityResultContracts" class="headerlink" title="4. å…¶ä»– ActivityResultContracts"></a>4. å…¶ä»– <code>ActivityResultContracts</code></h2><p><code>registerForActivityResult</code> è¿˜æ”¯æŒå¤šç§ <code>ActivityResultContracts</code>ï¼Œå¦‚ï¼š</p><ul><li><code>ActivityResultContracts.RequestPermission()</code>ï¼ˆè¯·æ±‚å•ä¸ªæƒé™ï¼‰</li><li><code>ActivityResultContracts.GetContent()</code>ï¼ˆé€‰æ‹©æ–‡ä»¶ï¼‰</li><li><code>ActivityResultContracts.TakePicture()</code>ï¼ˆæ‹ç…§ï¼‰</li></ul><h3 id="ç¤ºä¾‹ï¼šè·å–å›¾ç‰‡"><a href="#ç¤ºä¾‹ï¼šè·å–å›¾ç‰‡" class="headerlink" title="ç¤ºä¾‹ï¼šè·å–å›¾ç‰‡"></a><strong>ç¤ºä¾‹ï¼šè·å–å›¾ç‰‡</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">private val getImage = registerForActivityResult(ActivityResultContracts.GetContent()) &#123; uri: Uri? -&gt;</span><br><span class="line">    uri?.let &#123;</span><br><span class="line">        imageView.setImageURI(it)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">button.setOnClickListener &#123;</span><br><span class="line">    getImage.launch(&quot;image/*&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>æ€»ç»“ï¼š</strong></p><ul><li><code>startActivity()</code> é€‚ç”¨äºæ— è¿”å›å€¼çš„è·³è½¬ã€‚</li><li><code>registerForActivityResult()</code> é€‚ç”¨äºéœ€è¦è·å–è¿”å›å€¼çš„æƒ…å†µï¼Œå¹¶ä¸”æ¯” <code>startActivityForResult()</code> æ›´æ¨èã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å“çŸ¥è¯†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Retrofitç”¨æ³•ç¤ºä¾‹</title>
      <link href="/2025/03/14/Retrofit%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B/"/>
      <url>/2025/03/14/Retrofit%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<ol start="5"><li><ul><li><h1 id="Retrofit-ä½¿ç”¨æŒ‡å—"><a href="#Retrofit-ä½¿ç”¨æŒ‡å—" class="headerlink" title="Retrofit ä½¿ç”¨æŒ‡å—"></a><strong>Retrofit ä½¿ç”¨æŒ‡å—</strong></h1><p><code>Retrofit</code> æ˜¯ Android ä¸Šæœ€å¸¸ç”¨çš„ç½‘ç»œè¯·æ±‚åº“ä¹‹ä¸€ï¼Œå®ƒç®€åŒ–äº† HTTP è¯·æ±‚çš„å¤„ç†ï¼Œæ”¯æŒ <strong>GETã€POSTã€PUTã€DELETE</strong> ç­‰è¯·æ±‚æ–¹å¼ï¼Œå¹¶ä¸”å¯ä»¥é…åˆ <code>Gson</code>ã€<code>Moshi</code> ç­‰è§£æ JSON æ•°æ®ã€‚</p><hr><h2 id="1-æ·»åŠ ä¾èµ–"><a href="#1-æ·»åŠ ä¾èµ–" class="headerlink" title="1. æ·»åŠ ä¾èµ–"></a><strong>1. æ·»åŠ ä¾èµ–</strong></h2><p>åœ¨ <code>build.gradle</code>ï¼ˆModule çº§ï¼‰ä¸­æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation &#x27;com.squareup.retrofit2:retrofit:2.9.0&#x27;</span><br><span class="line">    implementation &#x27;com.squareup.retrofit2:converter-gson:2.9.0&#x27; // Gson è§£æ JSON</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-åˆ›å»º-API-æ¥å£"><a href="#2-åˆ›å»º-API-æ¥å£" class="headerlink" title="2. åˆ›å»º API æ¥å£"></a><strong>2. åˆ›å»º API æ¥å£</strong></h2><p>å®šä¹‰ API æ¥å£ï¼Œä¾‹å¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import retrofit2.Call</span><br><span class="line">import retrofit2.http.GET</span><br><span class="line">import retrofit2.http.Path</span><br><span class="line"></span><br><span class="line">interface ApiService &#123;</span><br><span class="line">    @GET(&quot;users/&#123;id&#125;&quot;)  // å®šä¹‰ GET è¯·æ±‚ï¼Œ&#123;id&#125; æ˜¯åŠ¨æ€è·¯å¾„å‚æ•°</span><br><span class="line">    fun getUser(@Path(&quot;id&quot;) userId: Int): Call&lt;User&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-å®šä¹‰æ•°æ®æ¨¡å‹"><a href="#3-å®šä¹‰æ•°æ®æ¨¡å‹" class="headerlink" title="3. å®šä¹‰æ•°æ®æ¨¡å‹"></a><strong>3. å®šä¹‰æ•°æ®æ¨¡å‹</strong></h2><p>Retrofit éœ€è¦è§£ææœåŠ¡å™¨è¿”å›çš„ JSON æ•°æ®ï¼Œå› æ­¤è¦åˆ›å»ºä¸€ä¸ª <code>data class</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data class User(</span><br><span class="line">    val id: Int,</span><br><span class="line">    val name: String,</span><br><span class="line">    val email: String</span><br><span class="line">)</span><br></pre></td></tr></table></figure><hr><h2 id="4-åˆ›å»º-Retrofit-å®ä¾‹"><a href="#4-åˆ›å»º-Retrofit-å®ä¾‹" class="headerlink" title="4. åˆ›å»º Retrofit å®ä¾‹"></a><strong>4. åˆ›å»º Retrofit å®ä¾‹</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import retrofit2.Retrofit</span><br><span class="line">import retrofit2.converter.gson.GsonConverterFactory</span><br><span class="line"></span><br><span class="line">object RetrofitClient &#123;</span><br><span class="line">    private const val BASE_URL = &quot;https://api.example.com/&quot;</span><br><span class="line"></span><br><span class="line">    val instance: ApiService by lazy &#123;</span><br><span class="line">        Retrofit.Builder()</span><br><span class="line">            .baseUrl(BASE_URL)</span><br><span class="line">            .addConverterFactory(GsonConverterFactory.create()) // è‡ªåŠ¨è§£æ JSON</span><br><span class="line">            .build()</span><br><span class="line">            .create(ApiService::class.java)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-å‘èµ·ç½‘ç»œè¯·æ±‚"><a href="#5-å‘èµ·ç½‘ç»œè¯·æ±‚" class="headerlink" title="5. å‘èµ·ç½‘ç»œè¯·æ±‚"></a><strong>5. å‘èµ·ç½‘ç»œè¯·æ±‚</strong></h2><h3 id="æ–¹å¼-1ï¼šä¼ ç»Ÿçš„åŒæ­¥è¯·æ±‚"><a href="#æ–¹å¼-1ï¼šä¼ ç»Ÿçš„åŒæ­¥è¯·æ±‚" class="headerlink" title="æ–¹å¼ 1ï¼šä¼ ç»Ÿçš„åŒæ­¥è¯·æ±‚"></a><strong>æ–¹å¼ 1ï¼šä¼ ç»Ÿçš„åŒæ­¥è¯·æ±‚</strong></h3><p>åœ¨ä¼ ç»Ÿçš„åŒæ­¥è¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª <code>Call</code> å¯¹è±¡å¹¶ä½¿ç”¨ <code>execute()</code> æˆ– <code>enqueue()</code> æ–¹æ³•å‘èµ·è¯·æ±‚ã€‚</p><h4 id="åŒæ­¥è¯·æ±‚ä»£ç -ä¸æ¨è-ï¼š"><a href="#åŒæ­¥è¯·æ±‚ä»£ç -ä¸æ¨è-ï¼š" class="headerlink" title="åŒæ­¥è¯·æ±‚ä»£ç (ä¸æ¨è)ï¼š"></a>åŒæ­¥è¯·æ±‚ä»£ç (ä¸æ¨è)ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// è·å– ApiService å®ä¾‹</span><br><span class="line">val call = RetrofitClient.instance.getUser(1)  // åˆ›å»º Call å¯¹è±¡</span><br><span class="line"></span><br><span class="line">// å‘èµ·åŒæ­¥è¯·æ±‚</span><br><span class="line">val response = call.execute()  // ä½¿ç”¨ execute() è¿›è¡ŒåŒæ­¥è¯·æ±‚</span><br><span class="line"></span><br><span class="line">if (response.isSuccessful) &#123;</span><br><span class="line">    val user = response.body()</span><br><span class="line">    println(&quot;ç”¨æˆ·ä¿¡æ¯ï¼š$&#123;user?.name&#125;, $&#123;user?.email&#125;&quot;)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    println(&quot;è¯·æ±‚å¤±è´¥: $&#123;response.code()&#125;&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>execute()</code> æ–¹æ³•ä¼šåŒæ­¥é˜»å¡çº¿ç¨‹ï¼Œç›´åˆ°è¯·æ±‚å®Œæˆã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ<em><strong>ä¸å»ºè®®</strong></em>åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´åº”ç”¨çš„å¡é¡¿ã€‚</p><h4 id="å¼‚æ­¥è¯·æ±‚ä»£ç ï¼š"><a href="#å¼‚æ­¥è¯·æ±‚ä»£ç ï¼š" class="headerlink" title="å¼‚æ­¥è¯·æ±‚ä»£ç ï¼š"></a>å¼‚æ­¥è¯·æ±‚ä»£ç ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// è·å– ApiService å®ä¾‹</span><br><span class="line">val call = RetrofitClient.instance.getUser(1)  // åˆ›å»º Call å¯¹è±¡</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ enqueue() å‘èµ·å¼‚æ­¥è¯·æ±‚</span><br><span class="line">call.enqueue(object : retrofit2.Callback&lt;User&gt; &#123;</span><br><span class="line">    override fun onResponse(call: Call&lt;User&gt;, response: retrofit2.Response&lt;User&gt;) &#123;</span><br><span class="line">        if (response.isSuccessful) &#123;</span><br><span class="line">            val user = response.body()</span><br><span class="line">            println(&quot;ç”¨æˆ·ä¿¡æ¯ï¼š$&#123;user?.name&#125;, $&#123;user?.email&#125;&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onFailure(call: Call&lt;User&gt;, t: Throwable) &#123;</span><br><span class="line">        println(&quot;è¯·æ±‚å¤±è´¥: $&#123;t.message&#125;&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨ <code>enqueue()</code> ä¸­ä½¿ç”¨å›è°ƒæ¥å¤„ç†å“åº”ï¼Œå®ƒä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œé€‚åˆåœ¨ UI çº¿ç¨‹ä¸­ä½¿ç”¨ã€‚</p><hr><h3 id="æ–¹å¼-2ï¼šä½¿ç”¨åç¨‹-suspendï¼ˆæ¨èæ–¹å¼ï¼‰"><a href="#æ–¹å¼-2ï¼šä½¿ç”¨åç¨‹-suspendï¼ˆæ¨èæ–¹å¼ï¼‰" class="headerlink" title="æ–¹å¼ 2ï¼šä½¿ç”¨åç¨‹ + suspendï¼ˆæ¨èæ–¹å¼ï¼‰"></a><strong>æ–¹å¼ 2ï¼šä½¿ç”¨åç¨‹ + <code>suspend</code>ï¼ˆæ¨èæ–¹å¼ï¼‰</strong></h3><p>Retrofit ä¹Ÿæ”¯æŒ Kotlin <strong>åç¨‹</strong>ï¼Œè¿™æ ·å¯ä»¥é¿å… <code>enqueue()</code> å›è°ƒå†™æ³•ï¼š</p><h4 id="ä¿®æ”¹-API-æ¥å£ï¼š"><a href="#ä¿®æ”¹-API-æ¥å£ï¼š" class="headerlink" title="ä¿®æ”¹ API æ¥å£ï¼š"></a>ä¿®æ”¹ API æ¥å£ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface ApiService &#123;</span><br><span class="line">    @GET(&quot;users/&#123;id&#125;&quot;)</span><br><span class="line">    suspend fun getUser(@Path(&quot;id&quot;) userId: Int): User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨-ViewModel-é‡Œä½¿ç”¨-suspend-è¯·æ±‚ï¼š"><a href="#åœ¨-ViewModel-é‡Œä½¿ç”¨-suspend-è¯·æ±‚ï¼š" class="headerlink" title="åœ¨ ViewModel é‡Œä½¿ç”¨ suspend è¯·æ±‚ï¼š"></a>åœ¨ ViewModel é‡Œä½¿ç”¨ <code>suspend</code> è¯·æ±‚ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import kotlinx.coroutines.CoroutineScope</span><br><span class="line">import kotlinx.coroutines.Dispatchers</span><br><span class="line">import kotlinx.coroutines.launch</span><br><span class="line"></span><br><span class="line">fun fetchUserData() &#123;</span><br><span class="line">    CoroutineScope(Dispatchers.IO).launch &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            val user = RetrofitClient.instance.getUser(1)</span><br><span class="line">            println(&quot;ç”¨æˆ·ä¿¡æ¯: $&#123;user.name&#125;, $&#123;user.email&#125;&quot;)</span><br><span class="line">        &#125; catch (e: Exception) &#123;</span><br><span class="line">            println(&quot;è¯·æ±‚å¤±è´¥: $&#123;e.message&#125;&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li><strong>æ— å›è°ƒåœ°ç‹±</strong>ï¼Œä»£ç æ›´ç®€æ´ã€‚</li><li><strong>è‡ªåŠ¨å¤„ç†å¼‚æ­¥ä»»åŠ¡</strong>ï¼Œé€‚ç”¨äºç°ä»£ Android å¼€å‘ã€‚</li></ul><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ol><li><p><strong>æ·»åŠ ä¾èµ–</strong> (<code>Retrofit + Gson</code>)ã€‚</p></li><li><p><strong>åˆ›å»º API æ¥å£</strong> (<code>interface ApiService</code>)ã€‚</p></li><li><p><strong>å®šä¹‰æ•°æ®æ¨¡å‹</strong> (<code>data class User</code>)ã€‚</p></li><li><p><strong>åˆ›å»º Retrofit å®ä¾‹</strong> (<code>RetrofitClient</code>)ã€‚</p></li><li><p>å‘èµ·è¯·æ±‚</p><p>ï¼š</p><ul><li><strong>æ–¹å¼ 1</strong>ï¼šä½¿ç”¨ <code>Call</code> å¯¹è±¡ + <code>execute()</code> æˆ– <code>enqueue()</code>ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰ã€‚</li><li><strong>æ–¹å¼ 2</strong>ï¼šä½¿ç”¨ <code>suspend</code> å‡½æ•° + åç¨‹ï¼ˆæ¨èç°ä»£å†™æ³•ï¼‰ã€‚</li></ul></li></ol></li></ul></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å“çŸ¥è¯†ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CMDå‘½ä»¤å¤§å…¨</title>
      <link href="/2025/03/13/CMD%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
      <url>/2025/03/13/CMD%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="CMD-å‘½ä»¤å¤§å…¨ï¼šä»å…¥é—¨åˆ°ç²¾é€š"><a href="#CMD-å‘½ä»¤å¤§å…¨ï¼šä»å…¥é—¨åˆ°ç²¾é€š" class="headerlink" title="CMD å‘½ä»¤å¤§å…¨ï¼šä»å…¥é—¨åˆ°ç²¾é€š"></a>CMD å‘½ä»¤å¤§å…¨ï¼šä»å…¥é—¨åˆ°ç²¾é€š</h1><p>å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰æ˜¯ Windows æ“ä½œç³»ç»Ÿä¸­çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥å‘½ä»¤æ¥æ‰§è¡Œå„ç§ä»»åŠ¡ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œé€‚ç”¨äºç³»ç»Ÿç®¡ç†ã€ç½‘ç»œé…ç½®ã€æ–‡ä»¶æ“ä½œç­‰å¤šç§åœºæ™¯ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¸¸ç”¨çš„ CMD å‘½ä»¤ï¼Œå¸®åŠ©ä½ ä»å…¥é—¨åˆ°ç²¾é€š CMDã€‚<strong>ä¸è¿‡ä¹Ÿå¯ä»¥ç›´æ¥æ‰“helpå¯»æ‰¾å‘½ä»¤çš„ã€‚</strong></p><p>[å‚è€ƒæ¥æº](<a href="https://blog.csdn.net/m0_70474954/article/details/143496800">CMD å‘½ä»¤å¤§å…¨ï¼šä»å…¥é—¨åˆ°ç²¾é€š_cmdå‘½ä»¤-CSDNåšå®¢</a>)</p><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#cmd-%E5%9F%BA%E7%A1%80">CMD åŸºç¡€</a></li><li><a href="#%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4">æ–‡ä»¶å’Œç›®å½•æ“ä½œå‘½ä»¤</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4">ç³»ç»Ÿä¿¡æ¯è·å–å‘½ä»¤</a></li><li><a href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4">ç½‘ç»œé…ç½®å‘½ä»¤</a></li><li><a href="#%E7%A3%81%E7%9B%98%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4">ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤</a></li><li><a href="#%E6%89%B9%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6">æ‰¹å¤„ç†æ–‡ä»¶</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">ç¯å¢ƒå˜é‡</a></li><li><a href="#cmd-%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7">CMD é«˜çº§æŠ€å·§</a></li><li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li></ol><hr><h2 id="CMD-åŸºç¡€"><a href="#CMD-åŸºç¡€" class="headerlink" title="CMD åŸºç¡€"></a>CMD åŸºç¡€</h2><h3 id="1-1-æ‰“å¼€-CMD"><a href="#1-1-æ‰“å¼€-CMD" class="headerlink" title="1.1 æ‰“å¼€ CMD"></a>1.1 æ‰“å¼€ CMD</h3><p>åœ¨ Windows ä¸­ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼š</p><ul><li>æŒ‰ <code>Win + R</code>ï¼Œè¾“å…¥ <code>cmd</code>ï¼Œç„¶åæŒ‰ <code>Enter</code>ã€‚</li><li>åœ¨å¼€å§‹èœå•ä¸­æœç´¢ â€œcmdâ€ æˆ– â€œå‘½ä»¤æç¤ºç¬¦â€ã€‚</li></ul><h3 id="1-2-å¸¸ç”¨å‘½ä»¤æ ¼å¼"><a href="#1-2-å¸¸ç”¨å‘½ä»¤æ ¼å¼" class="headerlink" title="1.2 å¸¸ç”¨å‘½ä»¤æ ¼å¼"></a>1.2 å¸¸ç”¨å‘½ä»¤æ ¼å¼</h3><p>CMD å‘½ä»¤é€šå¸¸éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ [å‚æ•°]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir /w</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>dir</code> æ˜¯å‘½ä»¤ï¼Œ<code>/w</code> æ˜¯å‚æ•°ã€‚</p><hr><h2 id="æ–‡ä»¶å’Œç›®å½•æ“ä½œå‘½ä»¤"><a href="#æ–‡ä»¶å’Œç›®å½•æ“ä½œå‘½ä»¤" class="headerlink" title="æ–‡ä»¶å’Œç›®å½•æ“ä½œå‘½ä»¤"></a>æ–‡ä»¶å’Œç›®å½•æ“ä½œå‘½ä»¤</h2><h3 id="2-1-æŸ¥çœ‹å½“å‰ç›®å½•"><a href="#2-1-æŸ¥çœ‹å½“å‰ç›®å½•" class="headerlink" title="2.1 æŸ¥çœ‹å½“å‰ç›®å½•"></a>2.1 æŸ¥çœ‹å½“å‰ç›®å½•</h3><p>ä½¿ç”¨ <code>cd</code> å‘½ä»¤æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd</span><br></pre></td></tr></table></figure><h3 id="2-2-åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶"><a href="#2-2-åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶" class="headerlink" title="2.2 åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶"></a>2.2 åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>dir</code> å‘½ä»¤åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir</span><br></pre></td></tr></table></figure><h3 id="2-3-è¿›å…¥ç›®å½•"><a href="#2-3-è¿›å…¥ç›®å½•" class="headerlink" title="2.3 è¿›å…¥ç›®å½•"></a>2.3 è¿›å…¥ç›®å½•</h3><p>ä½¿ç”¨ <code>cd [ç›®å½•è·¯å¾„]</code> è¿›å…¥æŒ‡å®šç›®å½•ã€‚ä¾‹å¦‚ï¼Œè¿›å…¥ <code>D:\Documents</code> ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd D:\Documents</span><br></pre></td></tr></table></figure><h3 id="2-4-è¿”å›ä¸Šä¸€çº§ç›®å½•"><a href="#2-4-è¿”å›ä¸Šä¸€çº§ç›®å½•" class="headerlink" title="2.4 è¿”å›ä¸Šä¸€çº§ç›®å½•"></a>2.4 è¿”å›ä¸Šä¸€çº§ç›®å½•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br></pre></td></tr></table></figure><h3 id="2-5-åˆ›å»ºæ–°ç›®å½•"><a href="#2-5-åˆ›å»ºæ–°ç›®å½•" class="headerlink" title="2.5 åˆ›å»ºæ–°ç›®å½•"></a>2.5 åˆ›å»ºæ–°ç›®å½•</h3><p>ä½¿ç”¨ <code>mkdir [ç›®å½•å]</code> åˆ›å»ºæ–°ç›®å½•ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>NewFolder</code> çš„ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir NewFolder</span><br></pre></td></tr></table></figure><h3 id="2-6-åˆ é™¤ç›®å½•"><a href="#2-6-åˆ é™¤ç›®å½•" class="headerlink" title="2.6 åˆ é™¤ç›®å½•"></a>2.6 åˆ é™¤ç›®å½•</h3><p>ä½¿ç”¨ <code>rmdir [ç›®å½•å]</code> åˆ é™¤ç©ºç›®å½•ã€‚å¦‚æœè¦åˆ é™¤éç©ºç›®å½•ï¼Œè¯·ä½¿ç”¨ <code>/s</code> å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir /s [ç›®å½•å]</span><br></pre></td></tr></table></figure><h3 id="2-7-å¤åˆ¶æ–‡ä»¶"><a href="#2-7-å¤åˆ¶æ–‡ä»¶" class="headerlink" title="2.7 å¤åˆ¶æ–‡ä»¶"></a>2.7 å¤åˆ¶æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>copy [æºæ–‡ä»¶è·¯å¾„] [ç›®æ ‡è·¯å¾„]</code> å¤åˆ¶æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå°† <code>file.txt</code> å¤åˆ¶åˆ° <code>D:\Backup</code> ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy file.txt D:\Backup</span><br></pre></td></tr></table></figure><h3 id="2-8-ç§»åŠ¨æ–‡ä»¶"><a href="#2-8-ç§»åŠ¨æ–‡ä»¶" class="headerlink" title="2.8 ç§»åŠ¨æ–‡ä»¶"></a>2.8 ç§»åŠ¨æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>move [æºæ–‡ä»¶è·¯å¾„] [ç›®æ ‡è·¯å¾„]</code> ç§»åŠ¨æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå°† <code>file.txt</code> ç§»åŠ¨åˆ° <code>D:\Documents</code> ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move file.txt D:\Documents</span><br></pre></td></tr></table></figure><h3 id="2-9-åˆ é™¤æ–‡ä»¶"><a href="#2-9-åˆ é™¤æ–‡ä»¶" class="headerlink" title="2.9 åˆ é™¤æ–‡ä»¶"></a>2.9 åˆ é™¤æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>del [æ–‡ä»¶å]</code> åˆ é™¤æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåˆ é™¤ <code>file.txt</code> æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del file.txt</span><br></pre></td></tr></table></figure><h3 id="2-10-é‡å‘½åæ–‡ä»¶"><a href="#2-10-é‡å‘½åæ–‡ä»¶" class="headerlink" title="2.10 é‡å‘½åæ–‡ä»¶"></a>2.10 é‡å‘½åæ–‡ä»¶</h3><p>ä½¿ç”¨ <code>ren [æ—§æ–‡ä»¶å] [æ–°æ–‡ä»¶å]</code> é‡å‘½åæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå°† <code>oldfile.txt</code> é‡å‘½åä¸º <code>newfile.txt</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ren oldfile.txt newfile.txt</span><br></pre></td></tr></table></figure><hr><h2 id="ç³»ç»Ÿä¿¡æ¯è·å–å‘½ä»¤"><a href="#ç³»ç»Ÿä¿¡æ¯è·å–å‘½ä»¤" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯è·å–å‘½ä»¤"></a>ç³»ç»Ÿä¿¡æ¯è·å–å‘½ä»¤</h2><h3 id="3-1-æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"><a href="#3-1-æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="3.1 æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"></a>3.1 æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</h3><p>ä½¿ç”¨ <code>systeminfo</code> æ˜¾ç¤ºè®¡ç®—æœºçš„è¯¦ç»†ä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€å†…å­˜ã€ç½‘ç»œé€‚é…å™¨ç­‰ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systeminfo</span><br></pre></td></tr></table></figure><h3 id="3-2-æŸ¥çœ‹å½“å‰ç”¨æˆ·"><a href="#3-2-æŸ¥çœ‹å½“å‰ç”¨æˆ·" class="headerlink" title="3.2 æŸ¥çœ‹å½“å‰ç”¨æˆ·"></a>3.2 æŸ¥çœ‹å½“å‰ç”¨æˆ·</h3><p>ä½¿ç”¨ <code>whoami</code> æ˜¾ç¤ºå½“å‰ç™»å½•çš„ç”¨æˆ·åç§°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br></pre></td></tr></table></figure><h3 id="3-3-æŸ¥çœ‹è®¡ç®—æœºå"><a href="#3-3-æŸ¥çœ‹è®¡ç®—æœºå" class="headerlink" title="3.3 æŸ¥çœ‹è®¡ç®—æœºå"></a>3.3 æŸ¥çœ‹è®¡ç®—æœºå</h3><p>ä½¿ç”¨ <code>hostname</code> æ˜¾ç¤ºè®¡ç®—æœºçš„ä¸»æœºåï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br></pre></td></tr></table></figure><h3 id="3-4-æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨"><a href="#3-4-æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨" class="headerlink" title="3.4 æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨"></a>3.4 æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨</h3><p>ä½¿ç”¨ <code>tasklist</code> åˆ—å‡ºå½“å‰è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist</span><br></pre></td></tr></table></figure><h3 id="3-5-ç»“æŸè¿›ç¨‹"><a href="#3-5-ç»“æŸè¿›ç¨‹" class="headerlink" title="3.5 ç»“æŸè¿›ç¨‹"></a>3.5 ç»“æŸè¿›ç¨‹</h3><p>ä½¿ç”¨ <code>taskkill /IM [è¿›ç¨‹å] /F</code> å¼ºåˆ¶ç»“æŸæŒ‡å®šè¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œç»“æŸ <code>notepad.exe</code> è¿›ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /IM notepad.exe /F</span><br></pre></td></tr></table></figure><hr><h2 id="ç½‘ç»œé…ç½®å‘½ä»¤"><a href="#ç½‘ç»œé…ç½®å‘½ä»¤" class="headerlink" title="ç½‘ç»œé…ç½®å‘½ä»¤"></a>ç½‘ç»œé…ç½®å‘½ä»¤</h2><h3 id="4-1-æŸ¥çœ‹-IP-é…ç½®"><a href="#4-1-æŸ¥çœ‹-IP-é…ç½®" class="headerlink" title="4.1 æŸ¥çœ‹ IP é…ç½®"></a>4.1 æŸ¥çœ‹ IP é…ç½®</h3><p>ä½¿ç”¨ <code>ipconfig</code> æ˜¾ç¤ºè®¡ç®—æœºçš„ IP åœ°å€ã€å­ç½‘æ©ç å’Œé»˜è®¤ç½‘å…³ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig</span><br></pre></td></tr></table></figure><h3 id="4-2-åˆ·æ–°-IP-åœ°å€"><a href="#4-2-åˆ·æ–°-IP-åœ°å€" class="headerlink" title="4.2 åˆ·æ–° IP åœ°å€"></a>4.2 åˆ·æ–° IP åœ°å€</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡Šæ”¾å¹¶æ›´æ–° DHCP åˆ†é…çš„ IP åœ°å€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /release</span><br><span class="line">ipconfig /renew</span><br></pre></td></tr></table></figure><h3 id="4-3-æŸ¥çœ‹ç½‘ç»œè¿æ¥"><a href="#4-3-æŸ¥çœ‹ç½‘ç»œè¿æ¥" class="headerlink" title="4.3 æŸ¥çœ‹ç½‘ç»œè¿æ¥"></a>4.3 æŸ¥çœ‹ç½‘ç»œè¿æ¥</h3><p>ä½¿ç”¨ <code>netstat</code> æ˜¾ç¤ºå½“å‰æ‰€æœ‰ç½‘ç»œè¿æ¥å’Œç›‘å¬ç«¯å£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat</span><br></pre></td></tr></table></figure><h3 id="4-4-æµ‹è¯•ç½‘ç»œè¿æ¥"><a href="#4-4-æµ‹è¯•ç½‘ç»œè¿æ¥" class="headerlink" title="4.4 æµ‹è¯•ç½‘ç»œè¿æ¥"></a>4.4 æµ‹è¯•ç½‘ç»œè¿æ¥</h3><p>ä½¿ç”¨ <code>ping [IP åœ°å€æˆ–åŸŸå]</code> æµ‹è¯•ç½‘ç»œè¿æ¥ã€‚ä¾‹å¦‚ï¼Œæµ‹è¯•ä¸ Google çš„è¿æ¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.google.com</span><br></pre></td></tr></table></figure><h3 id="4-5-è¿½è¸ªè·¯ç”±"><a href="#4-5-è¿½è¸ªè·¯ç”±" class="headerlink" title="4.5 è¿½è¸ªè·¯ç”±"></a>4.5 è¿½è¸ªè·¯ç”±</h3><p>ä½¿ç”¨ <code>tracert [IP åœ°å€æˆ–åŸŸå]</code> è¿½è¸ªç½‘ç»œè·¯ç”±ã€‚ä¾‹å¦‚ï¼Œè¿½è¸ªåˆ° Google çš„è·¯ç”±ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tracert www.google.com</span><br></pre></td></tr></table></figure><hr><h2 id="ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤"><a href="#ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤" class="headerlink" title="ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤"></a>ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œå‘½ä»¤</h2><h3 id="5-1-æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ"><a href="#5-1-æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ" class="headerlink" title="5.1 æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ"></a>5.1 æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ˜¾ç¤ºæ¯ä¸ªé€»è¾‘ç£ç›˜çš„æ€»å¤§å°å’Œå¯ç”¨ç©ºé—´ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic logicaldisk get size,freespace,caption</span><br></pre></td></tr></table></figure><h3 id="5-2-æ ¼å¼åŒ–ç£ç›˜"><a href="#5-2-æ ¼å¼åŒ–ç£ç›˜" class="headerlink" title="5.2 æ ¼å¼åŒ–ç£ç›˜"></a>5.2 æ ¼å¼åŒ–ç£ç›˜</h3><p>ä½¿ç”¨ <code>format [é©±åŠ¨å™¨:] /FS:[æ–‡ä»¶ç³»ç»Ÿ]</code> æ ¼å¼åŒ–ç£ç›˜ã€‚ä¾‹å¦‚ï¼Œå°† D ç›˜æ ¼å¼åŒ–ä¸º NTFS æ–‡ä»¶ç³»ç»Ÿï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">format D: /FS:NTFS</span><br></pre></td></tr></table></figure><h3 id="5-3-æ£€æŸ¥ç£ç›˜é”™è¯¯"><a href="#5-3-æ£€æŸ¥ç£ç›˜é”™è¯¯" class="headerlink" title="5.3 æ£€æŸ¥ç£ç›˜é”™è¯¯"></a>5.3 æ£€æŸ¥ç£ç›˜é”™è¯¯</h3><p>ä½¿ç”¨ <code>chkdsk [é©±åŠ¨å™¨:]</code> æ£€æŸ¥ç£ç›˜é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œæ£€æŸ¥ C ç›˜é”™è¯¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkdsk C:</span><br></pre></td></tr></table></figure><h3 id="5-4-æ˜¾ç¤ºç£ç›˜åˆ†åŒºä¿¡æ¯"><a href="#5-4-æ˜¾ç¤ºç£ç›˜åˆ†åŒºä¿¡æ¯" class="headerlink" title="5.4 æ˜¾ç¤ºç£ç›˜åˆ†åŒºä¿¡æ¯"></a>5.4 æ˜¾ç¤ºç£ç›˜åˆ†åŒºä¿¡æ¯</h3><p>ä½¿ç”¨ <code>diskpart</code> è¿›å…¥ DiskPart å·¥å…·ï¼Œç„¶ååœ¨æç¤ºç¬¦ä¸‹è¾“å…¥ <code>list disk</code> æŸ¥çœ‹æ‰€æœ‰ç£ç›˜ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskpart</span><br></pre></td></tr></table></figure><hr><h2 id="æ‰¹å¤„ç†æ–‡ä»¶"><a href="#æ‰¹å¤„ç†æ–‡ä»¶" class="headerlink" title="æ‰¹å¤„ç†æ–‡ä»¶"></a>æ‰¹å¤„ç†æ–‡ä»¶</h2><p>æ‰¹å¤„ç†æ–‡ä»¶æ˜¯åŒ…å«å¤šä¸ª CMD å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼Œä¾¿äºä¸€æ¬¡æ€§æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤ã€‚</p><h3 id="6-1-åˆ›å»ºæ‰¹å¤„ç†æ–‡ä»¶"><a href="#6-1-åˆ›å»ºæ‰¹å¤„ç†æ–‡ä»¶" class="headerlink" title="6.1 åˆ›å»ºæ‰¹å¤„ç†æ–‡ä»¶"></a>6.1 åˆ›å»ºæ‰¹å¤„ç†æ–‡ä»¶</h3><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚ Notepadï¼‰åˆ›å»ºä¸€ä¸ª <code>.bat</code> æ–‡ä»¶ï¼Œå¹¶è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">echo Hello, World!</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><h3 id="6-2-è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶"><a href="#6-2-è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶" class="headerlink" title="6.2 è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶"></a>6.2 è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶</h3><p>åŒå‡» <code>.bat</code> æ–‡ä»¶ï¼Œæˆ–åœ¨ CMD ä¸­è¾“å…¥æ–‡ä»¶è·¯å¾„æ¥è¿è¡Œè¯¥æ–‡ä»¶ã€‚</p><hr><h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><h3 id="7-1-æŸ¥çœ‹ç¯å¢ƒå˜é‡"><a href="#7-1-æŸ¥çœ‹ç¯å¢ƒå˜é‡" class="headerlink" title="7.1 æŸ¥çœ‹ç¯å¢ƒå˜é‡"></a>7.1 æŸ¥çœ‹ç¯å¢ƒå˜é‡</h3><p>ä½¿ç”¨ <code>set</code> å‘½ä»¤æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒå˜é‡åŠå…¶å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set</span><br></pre></td></tr></table></figure><h3 id="7-2-è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#7-2-è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="7.2 è®¾ç½®ç¯å¢ƒå˜é‡"></a>7.2 è®¾ç½®ç¯å¢ƒå˜é‡</h3><p>ä½¿ç”¨ <code>set [å˜é‡å]=[å€¼]</code> è®¾ç½®ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®åä¸º <code>MY_VAR</code> çš„ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set MY_VAR=Hello</span><br></pre></td></tr></table></figure><h3 id="7-3-åˆ é™¤ç¯å¢ƒå˜é‡"><a href="#7-3-åˆ é™¤ç¯å¢ƒå˜é‡" class="headerlink" title="7.3 åˆ é™¤ç¯å¢ƒå˜é‡"></a>7.3 åˆ é™¤ç¯å¢ƒå˜é‡</h3><p>å°†ç¯å¢ƒå˜é‡å€¼è®¾ä¸ºç©ºå³å¯åˆ é™¤ã€‚ä¾‹å¦‚ï¼Œåˆ é™¤ <code>MY_VAR</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set MY_VAR=</span><br></pre></td></tr></table></figure><hr><h2 id="CMD-é«˜çº§æŠ€å·§"><a href="#CMD-é«˜çº§æŠ€å·§" class="headerlink" title="CMD é«˜çº§æŠ€å·§"></a>CMD é«˜çº§æŠ€å·§</h2><h3 id="8-1-ä½¿ç”¨ç®¡é“"><a href="#8-1-ä½¿ç”¨ç®¡é“" class="headerlink" title="8.1 ä½¿ç”¨ç®¡é“"></a>8.1 ä½¿ç”¨ç®¡é“</h3><p>ç®¡é“ç¬¦å· <code>|</code> å¯å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä¼ é€’ç»™å¦ä¸€ä¸ªå‘½ä»¤ã€‚ä¾‹å¦‚ï¼ŒæŸ¥æ‰¾è¿›ç¨‹åˆ—è¡¨ä¸­åŒ…å« â€œchromeâ€ çš„è¿›ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist | find &quot;chrome&quot;</span><br></pre></td></tr></table></figure><h3 id="8-2-ä½¿ç”¨é‡å®šå‘"><a href="#8-2-ä½¿ç”¨é‡å®šå‘" class="headerlink" title="8.2 ä½¿ç”¨é‡å®šå‘"></a>8.2 ä½¿ç”¨é‡å®šå‘</h3><p>é‡å®šå‘ç¬¦ <code>&gt;</code> å¯å°†å‘½ä»¤çš„è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚ä¾‹å¦‚ï¼Œå°† <code>dir</code> å‘½ä»¤çš„è¾“å‡ºä¿å­˜åˆ° <code>output.txt</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir &gt; output.txt</span><br></pre></td></tr></table></figure><h3 id="8-3-æ‰¹é‡é‡å‘½åæ–‡ä»¶"><a href="#8-3-æ‰¹é‡é‡å‘½åæ–‡ä»¶" class="headerlink" title="8.3 æ‰¹é‡é‡å‘½åæ–‡ä»¶"></a>8.3 æ‰¹é‡é‡å‘½åæ–‡ä»¶</h3><p>ä½¿ç”¨ <code>for</code> å¾ªç¯æ‰¹é‡é‡å‘½åæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ <code>.txt</code> æ–‡ä»¶é‡å‘½åä¸º <code>.bak</code> æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for %f in (*.txt) do ren &quot;%f&quot; &quot;*.bak&quot;</span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šåœ¨æ‰¹å¤„ç†æ–‡ä»¶ä¸­ä½¿ç”¨ for å¾ªç¯æ—¶ï¼Œéœ€å°† <code>%f</code> æ›¿æ¢ä¸º <code>%%f</code>ã€‚</em></p><hr><h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="9-1-CMD-æ— æ³•è¯†åˆ«å‘½ä»¤"><a href="#9-1-CMD-æ— æ³•è¯†åˆ«å‘½ä»¤" class="headerlink" title="9.1 CMD æ— æ³•è¯†åˆ«å‘½ä»¤"></a>9.1 CMD æ— æ³•è¯†åˆ«å‘½ä»¤</h3><ul><li>å¦‚æœ CMD æç¤º â€œä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤â€ï¼Œå¯èƒ½æ˜¯å› ä¸ºå‘½ä»¤è¾“å…¥é”™è¯¯æˆ–ç›¸åº”ç¨‹åºæœªå®‰è£…ã€‚</li></ul><h3 id="9-2-æƒé™ä¸è¶³"><a href="#9-2-æƒé™ä¸è¶³" class="headerlink" title="9.2 æƒé™ä¸è¶³"></a>9.2 æƒé™ä¸è¶³</h3><ul><li>æŸäº›å‘½ä»¤éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚è¯·å³é”®ç‚¹å‡» CMD å›¾æ ‡ï¼Œé€‰æ‹©â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ã€‚</li></ul><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº† CMD çš„åŸºæœ¬å‘½ä»¤ã€æ–‡ä»¶å’Œç›®å½•æ“ä½œã€ç³»ç»Ÿä¿¡æ¯è·å–ã€ç½‘ç»œé…ç½®ç­‰å†…å®¹ã€‚é€šè¿‡å…·ä½“ç¤ºä¾‹å’Œæ“ä½œè¯´æ˜ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ CMD çš„ä½¿ç”¨ã€‚å¸Œæœ›è¿™ä»½ CMD å‘½ä»¤å¤§å…¨èƒ½å¸®åŠ©ä½ æé«˜å·¥ä½œæ•ˆç‡ï¼Œæˆä¸º CMD ä½¿ç”¨çš„é«˜æ‰‹ï¼</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Task3 Android Diary</title>
      <link href="/2025/03/05/Task3-Diary/"/>
      <url>/2025/03/05/Task3-Diary/</url>
      
        <content type="html"><![CDATA[<h1 id="MY-API-KEY-å’Œé£"><a href="#MY-API-KEY-å’Œé£" class="headerlink" title="MY API KEY(å’Œé£)"></a>MY API KEY(å’Œé£)</h1><p>670ca929136a456992608cd2e794df24</p><h1 id="Mainactivity"><a href="#Mainactivity" class="headerlink" title="Mainactivity"></a>Mainactivity</h1><h2 id="è¶…çº§å¥½çš„Mainactivity"><a href="#è¶…çº§å¥½çš„Mainactivity" class="headerlink" title="è¶…çº§å¥½çš„Mainactivity"></a>è¶…çº§å¥½çš„Mainactivity</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">package com.example.diary_3.activity</span><br><span class="line"></span><br><span class="line">import androidx.core.widget.addTextChangedListener</span><br><span class="line">import android.app.Activity</span><br><span class="line">import android.content.BroadcastReceiver</span><br><span class="line">import android.content.Context</span><br><span class="line">import android.content.Intent</span><br><span class="line">import android.content.IntentFilter</span><br><span class="line">import android.os.Build</span><br><span class="line">import android.os.Bundle</span><br><span class="line">import android.util.Log</span><br><span class="line">import android.widget.Toast</span><br><span class="line">import androidx.activity.result.contract.ActivityResultContracts</span><br><span class="line">import androidx.appcompat.app.AlertDialog</span><br><span class="line">import androidx.appcompat.app.AppCompatActivity</span><br><span class="line">import androidx.lifecycle.Observer</span><br><span class="line">import androidx.lifecycle.lifecycleScope</span><br><span class="line">import androidx.recyclerview.widget.LinearLayoutManager</span><br><span class="line">import com.example.diary_3.adapter.DiaryAdapter</span><br><span class="line">import com.example.diary_3.database.Diary</span><br><span class="line">import com.example.diary_3.database.DiaryDatabase</span><br><span class="line">import com.example.diary_3.databinding.ActivityMainBinding</span><br><span class="line">import kotlinx.coroutines.Dispatchers</span><br><span class="line">import kotlinx.coroutines.launch</span><br><span class="line">import kotlinx.coroutines.withContext</span><br><span class="line"></span><br><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private lateinit var binding: ActivityMainBinding</span><br><span class="line">    private lateinit var diaryDatabase: DiaryDatabase</span><br><span class="line">    private lateinit var diaryAdapter: DiaryAdapter</span><br><span class="line"></span><br><span class="line">    private val addDiaryLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) &#123; result -&gt;</span><br><span class="line">        when (result.resultCode) &#123;</span><br><span class="line">            Activity.RESULT_OK -&gt; loadAllDiaries()</span><br><span class="line">            Activity.RESULT_CANCELED -&gt; &#123;&#125;</span><br><span class="line">            else -&gt; Log.d(&quot;MainActivity&quot;, &quot;æœªçŸ¥çš„è¿”å›ç»“æœ: $&#123;result.resultCode&#125;&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private val diarySavedReceiver = object : BroadcastReceiver() &#123;</span><br><span class="line">        override fun onReceive(context: Context?, intent: Intent?) &#123;</span><br><span class="line">            if (intent?.action == &quot;SAVED&quot;) &#123;</span><br><span class="line">                loadAllDiaries()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        binding = ActivityMainBinding.inflate(layoutInflater)</span><br><span class="line">        setContentView(binding.root)</span><br><span class="line"></span><br><span class="line">        diaryDatabase = DiaryDatabase.getInstance(this)</span><br><span class="line">        binding.recyclerView.layoutManager = LinearLayoutManager(this)</span><br><span class="line">        diaryAdapter = DiaryAdapter(this, emptyList())</span><br><span class="line">        binding.recyclerView.adapter = diaryAdapter</span><br><span class="line"></span><br><span class="line">        val filter = IntentFilter(&quot;SAVED&quot;)</span><br><span class="line">        registerReceiver(diarySavedReceiver, filter)</span><br><span class="line"></span><br><span class="line">        loadAllDiaries()</span><br><span class="line"></span><br><span class="line">        // ç›‘å¬æœç´¢æ¡†</span><br><span class="line">        binding.searchBox.addTextChangedListener &#123; text -&gt;</span><br><span class="line">            searchDiaries(text.toString())</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // å¯åŠ¨æ·»åŠ æ—¥è®°é¡µé¢</span><br><span class="line">        binding.addDiaryButton.setOnClickListener &#123;</span><br><span class="line">            val intent = Intent(this, AddDiaryActivity::class.java)</span><br><span class="line">            addDiaryLauncher.launch(intent)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // ç»‘å®šåˆ é™¤æŒ‰é’®</span><br><span class="line">        binding.deleteDiaryButton.setOnClickListener &#123;</span><br><span class="line">            deleteDiary()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // åˆ é™¤æ—¥è®°çš„æ–¹æ³•</span><br><span class="line">    private fun deleteDiary() &#123;</span><br><span class="line">        val diaries = diaryAdapter.getCurrentDiaries()</span><br><span class="line">        if (diaries.isEmpty()) &#123;</span><br><span class="line">            Toast.makeText(this, &quot;å½“å‰æ²¡æœ‰æ—¥è®°å¯åˆ é™¤&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">            return</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        val diaryTitles = diaries.map &#123; it.title &#125;.toTypedArray()</span><br><span class="line">        var selectedIndex = 0</span><br><span class="line"></span><br><span class="line">        AlertDialog.Builder(this)</span><br><span class="line">            .setTitle(&quot;é€‰æ‹©è¦åˆ é™¤çš„æ—¥è®°&quot;)</span><br><span class="line">            .setSingleChoiceItems(diaryTitles, 0) &#123; _, which -&gt;</span><br><span class="line">                selectedIndex = which</span><br><span class="line">            &#125;</span><br><span class="line">            .setPositiveButton(&quot;åˆ é™¤&quot;) &#123; _, _ -&gt;</span><br><span class="line">                val diaryToDelete = diaries[selectedIndex]</span><br><span class="line">                lifecycleScope.launch(Dispatchers.IO) &#123;</span><br><span class="line">                    diaryDatabase.diaryDao().deleteDiary(diaryToDelete)</span><br><span class="line">                    withContext(Dispatchers.Main) &#123;</span><br><span class="line">                        loadAllDiaries()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            .setNegativeButton(&quot;å–æ¶ˆ&quot;, null)</span><br><span class="line">            .show()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // åŠ è½½æ‰€æœ‰æ—¥è®°</span><br><span class="line">    private fun loadAllDiaries() &#123;</span><br><span class="line">        diaryDatabase.diaryDao().getDiaries().observe(this, Observer &#123; diaries -&gt;</span><br><span class="line">            diaryAdapter.updateData(diaries) // æ›´æ–°æ•°æ®</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æœç´¢æ—¥è®°</span><br><span class="line">    private fun searchDiaries(query: String) &#123;</span><br><span class="line">        diaryDatabase.diaryDao().searchDiaries(&quot;%$query%&quot;)</span><br><span class="line">            .observe(this, Observer &#123; diaries -&gt;</span><br><span class="line">                diaryAdapter.updateData(diaries)</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onDestroy() &#123;</span><br><span class="line">        super.onDestroy()</span><br><span class="line">        unregisterReceiver(diarySavedReceiver)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">package com.example.diary_3.activity</span><br><span class="line">import androidx.core.widget.addTextChangedListener</span><br><span class="line">import android.app.Activity</span><br><span class="line">import android.content.BroadcastReceiver</span><br><span class="line">import android.content.Context</span><br><span class="line">import android.content.Intent</span><br><span class="line">import android.content.IntentFilter</span><br><span class="line">import android.os.Build</span><br><span class="line">import android.os.Bundle</span><br><span class="line">import android.text.Editable</span><br><span class="line">import android.text.TextWatcher</span><br><span class="line">import android.util.Log</span><br><span class="line">import android.widget.Toast</span><br><span class="line">import androidx.activity.result.contract.ActivityResultContracts</span><br><span class="line">import androidx.annotation.RequiresApi</span><br><span class="line">import androidx.appcompat.app.AppCompatActivity</span><br><span class="line">import androidx.lifecycle.lifecycleScope</span><br><span class="line">import androidx.recyclerview.widget.LinearLayoutManager</span><br><span class="line">import androidx.room.InvalidationTracker</span><br><span class="line">import com.example.diary_3.adapter.DiaryAdapter</span><br><span class="line">import com.example.diary_3.database.Diary</span><br><span class="line">import com.example.diary_3.database.DiaryDatabase</span><br><span class="line">import com.example.diary_3.databinding.ActivityMainBinding</span><br><span class="line">import java.util.concurrent.Executors</span><br><span class="line">import kotlinx.coroutines.CoroutineScope</span><br><span class="line">import kotlinx.coroutines.Dispatchers</span><br><span class="line">import kotlinx.coroutines.launch</span><br><span class="line">import kotlinx.coroutines.withContext</span><br><span class="line">import androidx.lifecycle.Observer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MainActivity : AppCompatActivity() &#123;</span><br><span class="line">    private lateinit var binding: ActivityMainBinding</span><br><span class="line">    private lateinit var diaryDatabase: DiaryDatabase</span><br><span class="line">    private lateinit var diaryAdapter: DiaryAdapter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private val addDiaryLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) &#123; result -&gt;</span><br><span class="line">        when (result.resultCode) &#123;</span><br><span class="line">            Activity.RESULT_OK -&gt; &#123;</span><br><span class="line">                // å¦‚æœæœ‰è¿”å›ç»“æœï¼Œåˆ·æ–°æ•°æ®</span><br><span class="line">                loadAllDiaries()</span><br><span class="line">            &#125;</span><br><span class="line">            Activity.RESULT_CANCELED -&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            else -&gt; &#123;</span><br><span class="line">                // å¤„ç†å…¶ä»–å¯èƒ½çš„è¿”å›æƒ…å†µ</span><br><span class="line">                Log.d(&quot;MainActivity&quot;, &quot;æœªçŸ¥çš„è¿”å›ç»“æœ: $&#123;result.resultCode&#125;&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    private val diarySavedReceiver = object : BroadcastReceiver() &#123;</span><br><span class="line">        override fun onReceive(context: Context?, intent: Intent?) &#123;</span><br><span class="line">            if (intent?.action == &quot;SAVED&quot;) &#123;</span><br><span class="line">                loadAllDiaries()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;//gl gd</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        binding = ActivityMainBinding.inflate(layoutInflater)</span><br><span class="line">        setContentView(binding.root)</span><br><span class="line">        diaryDatabase = DiaryDatabase.getInstance(this)</span><br><span class="line">        binding.recyclerView.layoutManager = LinearLayoutManager(this)</span><br><span class="line">        diaryAdapter = DiaryAdapter(this, emptyList())</span><br><span class="line">        binding.recyclerView.adapter = diaryAdapter</span><br><span class="line">        val filter = IntentFilter(&quot;SAVED&quot;)</span><br><span class="line">        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.TIRAMISU) &#123;</span><br><span class="line">            registerReceiver(diarySavedReceiver, filter, Context.RECEIVER_NOT_EXPORTED)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            registerReceiver(diarySavedReceiver, filter, RECEIVER_NOT_EXPORTED)</span><br><span class="line">        &#125;//ys5 gd</span><br><span class="line">        loadAllDiaries()</span><br><span class="line">        binding.searchBox.addTextChangedListener &#123; text -&gt;</span><br><span class="line">            searchDiaries(text.toString())</span><br><span class="line">        &#125;//ys3 gd</span><br><span class="line">        // ä½¿ç”¨ ActivityResultLauncher å¯åŠ¨ AddDiaryActivity</span><br><span class="line">        binding.addDiaryButton.setOnClickListener &#123;</span><br><span class="line">            val intent = Intent(this, AddDiaryActivity::class.java)</span><br><span class="line">            addDiaryLauncher.launch(intent)</span><br><span class="line">        &#125;//ys4 gd</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private fun loadAllDiaries() &#123;</span><br><span class="line">        lifecycleScope.launch &#123;</span><br><span class="line">            val diaries = withContext(Dispatchers.IO) &#123;</span><br><span class="line">                diaryDatabase.diaryDao().getAllDiaries()</span><br><span class="line">            &#125;</span><br><span class="line">            diaryAdapter.updateData(diaries) // æ›´æ–°æ•°æ®</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;//ys8 gd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private fun searchDiaries(query: String) &#123;</span><br><span class="line">        diaryDatabase.diaryDao().searchDiaries(&quot;%$query%&quot;)</span><br><span class="line">            .observe(this, object : Observer&lt;List&lt;Diary&gt;&gt; &#123;</span><br><span class="line">                override fun onChanged(diaries: List&lt;Diary&gt;) &#123;</span><br><span class="line">                    diaryAdapter = DiaryAdapter(this@MainActivity, diaries)</span><br><span class="line">                    binding.recyclerView.adapter = diaryAdapter</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;//ys9 gd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    override fun onDestroy() &#123;</span><br><span class="line">        super.onDestroy()</span><br><span class="line">        unregisterReceiver(diarySavedReceiver)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="AddDiaryActivity"><a href="#AddDiaryActivity" class="headerlink" title="AddDiaryActivity"></a>AddDiaryActivity</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line">package com.example.diary_3.activity</span><br><span class="line">import androidx.appcompat.app.AlertDialog</span><br><span class="line">import android.view.View</span><br><span class="line">import android.widget.EditText</span><br><span class="line">import com.example.diary_3.utils.DateUtils</span><br><span class="line">import android.content.Intent</span><br><span class="line">import android.content.pm.PackageManager</span><br><span class="line">import android.net.Uri</span><br><span class="line">import android.os.Bundle</span><br><span class="line">import android.os.Looper</span><br><span class="line">import android.provider.MediaStore</span><br><span class="line">import android.util.Log</span><br><span class="line">import android.widget.Toast</span><br><span class="line">import androidx.appcompat.app.AppCompatActivity</span><br><span class="line">import androidx.core.app.ActivityCompat</span><br><span class="line">import androidx.core.content.ContextCompat</span><br><span class="line">import com.bumptech.glide.Glide</span><br><span class="line">import com.bumptech.glide.request.RequestOptions</span><br><span class="line">import com.example.diary_3.R</span><br><span class="line">import com.example.diary_3.database.Diary</span><br><span class="line">import com.example.diary_3.database.DiaryDatabase</span><br><span class="line">import com.example.diary_3.databinding.ActivityAddDiaryBinding</span><br><span class="line">import com.example.diary_3.model.CityResponse</span><br><span class="line">import com.example.diary_3.model.WeatherResponse</span><br><span class="line">import com.example.diary_3.network.RetrofitClient</span><br><span class="line">import com.example.diary_3.network.WeatherApi</span><br><span class="line">import com.example.diary_3.utils.LocationUtils</span><br><span class="line">import retrofit2.Call</span><br><span class="line">import retrofit2.Callback</span><br><span class="line">import retrofit2.Response</span><br><span class="line">import java.util.Calendar</span><br><span class="line">import java.util.concurrent.Executors</span><br><span class="line"></span><br><span class="line">class AddDiaryActivity : AppCompatActivity() &#123;</span><br><span class="line">    private val selectedLocalImageUris = mutableListOf&lt;Uri&gt;()</span><br><span class="line">    private val networkImageUrls = mutableListOf&lt;String&gt;()</span><br><span class="line">    private val API_KEY = &quot;670ca929136a456992608cd2e794df24&quot;</span><br><span class="line">    private lateinit var binding: ActivityAddDiaryBinding</span><br><span class="line">    private var selectedDate: Calendar = Calendar.getInstance()</span><br><span class="line">    private lateinit var diaryDatabase: DiaryDatabase</span><br><span class="line">    private lateinit var locationUtils: LocationUtils</span><br><span class="line">    private val PERMISSION_REQUEST_CODE = 1</span><br><span class="line">    private var selectedLocalImageUri: Uri? = null</span><br><span class="line">    private var networkImageUrl: String? = null</span><br><span class="line"></span><br><span class="line">    private fun hasPermission(permission: String): Boolean &#123;</span><br><span class="line">        return ContextCompat.checkSelfPermission(this, permission) == PackageManager.PERMISSION_GRANTED</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        binding = ActivityAddDiaryBinding.inflate(layoutInflater)</span><br><span class="line">        setContentView(binding.root)</span><br><span class="line"></span><br><span class="line">        diaryDatabase = DiaryDatabase.getInstance(this)</span><br><span class="line">        locationUtils = LocationUtils(this)</span><br><span class="line"></span><br><span class="line">        binding.selectImageButton.setOnClickListener &#123;</span><br><span class="line">            pickLocalImage()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        binding.addNetworkImageButton.setOnClickListener &#123;</span><br><span class="line">            // åˆ›å»ºä¸€ä¸ªè¾“å…¥æ¡†</span><br><span class="line">            val input = EditText(this)</span><br><span class="line">            input.hint = &quot;è¯·è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡é“¾æ¥&quot;</span><br><span class="line"></span><br><span class="line">            // æ„å»ºå¯¹è¯æ¡†</span><br><span class="line">            AlertDialog.Builder(this)</span><br><span class="line">                .setTitle(&quot;è¾“å…¥å›¾ç‰‡URL&quot;)</span><br><span class="line">                .setView(input)</span><br><span class="line">                .setPositiveButton(&quot;ç¡®å®š&quot;) &#123; dialog, which -&gt;</span><br><span class="line">                    val url = input.text.toString().trim()</span><br><span class="line">                    if (url.isNotBlank()) &#123;</span><br><span class="line">                        networkImageUrl = url</span><br><span class="line">                        Glide.with(this)</span><br><span class="line">                            .load(url)</span><br><span class="line">                            .placeholder(R.drawable.loading_placeholder) // åŠ è½½è¿‡ç¨‹ä¸­çš„å ä½ç¬¦å›¾ç‰‡</span><br><span class="line">                            .apply(RequestOptions.circleCropTransform())</span><br><span class="line">                            .error(R.drawable.no) // åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„å›¾ç‰‡</span><br><span class="line">                            .into(binding.selectedImageView)</span><br><span class="line">                        binding.selectedImageView.visibility = View.VISIBLE</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        Toast.makeText(this, &quot;è¯·è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡é“¾æ¥&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">                        binding.selectedImageView.visibility = View.GONE</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                .setNegativeButton(&quot;å–æ¶ˆ&quot;) &#123; dialog, which -&gt;</span><br><span class="line">                    dialog.cancel()</span><br><span class="line">                &#125;</span><br><span class="line">                .show()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        binding.saveDiaryButton.setOnClickListener &#123;</span><br><span class="line">            saveDiary()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // æ–°å¢æŒ‰é’®ï¼šç‚¹å‡»åˆ·æ–°åœ°ç‚¹å’Œå¤©æ°”</span><br><span class="line">        binding.refreshWeatherLocationButton.setOnClickListener &#123;</span><br><span class="line">            getLocation()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        val permissionsToRequest = mutableListOf&lt;String&gt;()</span><br><span class="line"></span><br><span class="line">        if (!hasPermission(android.Manifest.permission.ACCESS_FINE_LOCATION)) &#123;</span><br><span class="line">            permissionsToRequest.add(android.Manifest.permission.ACCESS_FINE_LOCATION)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (!hasPermission(android.Manifest.permission.READ_EXTERNAL_STORAGE)) &#123;</span><br><span class="line">            permissionsToRequest.add(android.Manifest.permission.READ_EXTERNAL_STORAGE)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (permissionsToRequest.isNotEmpty()) &#123;</span><br><span class="line">            ActivityCompat.requestPermissions(</span><br><span class="line">                this,</span><br><span class="line">                permissionsToRequest.toTypedArray(),</span><br><span class="line">                PERMISSION_REQUEST_CODE</span><br><span class="line">            )</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            getLocation()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun pickLocalImage() &#123;</span><br><span class="line">        val intent = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)</span><br><span class="line">        startActivityForResult(intent, 1)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) &#123;</span><br><span class="line">        super.onActivityResult(requestCode, resultCode, data)</span><br><span class="line"></span><br><span class="line">        if (requestCode == 1 &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) &#123;</span><br><span class="line">            selectedLocalImageUri = data.data</span><br><span class="line">            Glide.with(this)</span><br><span class="line">                .load(selectedLocalImageUri)</span><br><span class="line">                .into(binding.selectedImageView)</span><br><span class="line">            binding.selectedImageView.visibility = android.view.View.VISIBLE</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun getLocation() &#123;</span><br><span class="line">        locationUtils.getLocation &#123; location -&gt;</span><br><span class="line">            if (location != null) &#123;</span><br><span class="line">                val latitude = location.latitude</span><br><span class="line">                val longitude = location.longitude</span><br><span class="line">                Log.d(&quot;AddDiaryActivity&quot;, &quot;è·å–åˆ°çš„ç»çº¬åº¦: çº¬åº¦ $latitude, ç»åº¦ $longitude&quot;)</span><br><span class="line">                // æ ¼å¼åŒ–ç»çº¬åº¦å­—ç¬¦ä¸²ï¼Œæ³¨æ„è¿™é‡Œ longitude å’Œ latitude çš„é¡ºåºå¯ä»¥æ ¹æ®æ¥å£è¦æ±‚è°ƒæ•´</span><br><span class="line">                val loc = String.format(&quot;%.2f,%.2f&quot;, location.longitude, location.latitude)</span><br><span class="line">                Executors.newSingleThreadExecutor().execute &#123;</span><br><span class="line">                    runOnUiThread &#123;</span><br><span class="line">                        binding.locationTextView.text = loc</span><br><span class="line">                        getCityId(loc)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                runOnUiThread &#123;</span><br><span class="line">                    Toast.makeText(this, &quot;æ— æ³•è·å–å½“å‰ä½ç½®&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun showToastOnUiThread(message: String) &#123;</span><br><span class="line">        if (Looper.myLooper() == Looper.getMainLooper()) &#123;</span><br><span class="line">            Toast.makeText(this, message, Toast.LENGTH_SHORT).show()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            runOnUiThread &#123;</span><br><span class="line">                Toast.makeText(this, message, Toast.LENGTH_SHORT).show()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun getCityId(cityName: String) &#123;</span><br><span class="line">        val weatherApi = RetrofitClient.geoInstance.create(WeatherApi::class.java)</span><br><span class="line">        weatherApi.getCityInfo(API_KEY, cityName).enqueue(object : Callback&lt;CityResponse&gt; &#123;</span><br><span class="line">            override fun onResponse(call: Call&lt;CityResponse&gt;, response: Response&lt;CityResponse&gt;) &#123;</span><br><span class="line">                if (response.isSuccessful &amp;&amp; response.body()?.code == &quot;200&quot;) &#123;</span><br><span class="line">                    val cityLocation = response.body()?.location?.firstOrNull()</span><br><span class="line">                    if (cityLocation != null) &#123;</span><br><span class="line">                        binding.locationTextView.text = cityLocation.name</span><br><span class="line">                        getWeatherInfo(cityLocation.id)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    Log.e(&quot;AddDiaryActivity&quot;, &quot;è·å–åŸå¸‚ ID å¤±è´¥: $&#123;response.message()&#125;, å“åº”ä»£ç : $&#123;response.code()&#125;, å“åº”ä½“: $&#123;response.errorBody()?.string()&#125;&quot;)</span><br><span class="line">                    showToastOnUiThread(&quot;è·å–åŸå¸‚ ID å¤±è´¥&quot;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun onFailure(call: Call&lt;CityResponse&gt;, t: Throwable) &#123;</span><br><span class="line">                Log.e(&quot;AddDiaryActivity&quot;, &quot;è·å–åŸå¸‚ ID ç½‘ç»œè¯·æ±‚å¤±è´¥: $&#123;t.message&#125;&quot;, t)</span><br><span class="line">                showToastOnUiThread(&quot;è·å–åŸå¸‚ ID ç½‘ç»œè¯·æ±‚å¤±è´¥&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun getWeatherInfo(cityId: String) &#123;</span><br><span class="line">        val weatherApi = RetrofitClient.weatherInstance.create(WeatherApi::class.java)</span><br><span class="line">        weatherApi.getWeatherInfo(API_KEY, cityId).enqueue(object : Callback&lt;WeatherResponse&gt; &#123;</span><br><span class="line">            override fun onResponse(call: Call&lt;WeatherResponse&gt;, response: Response&lt;WeatherResponse&gt;) &#123;</span><br><span class="line">                if (response.isSuccessful &amp;&amp; response.body()?.code == &quot;200&quot;) &#123;</span><br><span class="line">                    val today = DateUtils.formatDate(Calendar.getInstance().time)</span><br><span class="line">                    val todayWeather = response.body()?.daily?.firstOrNull &#123; it.fxDate == today &#125;</span><br><span class="line">                    if (todayWeather != null) &#123;</span><br><span class="line">                        val weatherText = todayWeather.textDay</span><br><span class="line">                        binding.weatherTextView.text = weatherText</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    Log.e(&quot;AddDiaryActivity&quot;, &quot;è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥: $&#123;response.message()&#125;, å“åº”ä»£ç : $&#123;response.code()&#125;, å“åº”ä½“: $&#123;response.errorBody()?.string()&#125;&quot;)</span><br><span class="line">                    showToastOnUiThread(&quot;è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥&quot;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun onFailure(call: Call&lt;WeatherResponse&gt;, t: Throwable) &#123;</span><br><span class="line">                Log.e(&quot;AddDiaryActivity&quot;, &quot;è·å–å¤©æ°”ä¿¡æ¯ç½‘ç»œè¯·æ±‚å¤±è´¥: $&#123;t.message&#125;&quot;, t)</span><br><span class="line">                showToastOnUiThread(&quot;è·å–å¤©æ°”ä¿¡æ¯ç½‘ç»œè¯·æ±‚å¤±è´¥&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private fun saveDiary() &#123;</span><br><span class="line">        Executors.newSingleThreadExecutor().execute &#123;</span><br><span class="line">            val title = binding.titleEditText.text.toString()</span><br><span class="line">            val content = binding.contentEditText.text.toString()</span><br><span class="line">            val localImagePath = selectedLocalImageUri?.toString()</span><br><span class="line">            val date = DateUtils.formatDate(Calendar.getInstance().time)</span><br><span class="line">            val weather = binding.weatherTextView.text.toString()</span><br><span class="line">            val location = binding.locationTextView.text.toString()</span><br><span class="line"></span><br><span class="line">            val diary = Diary(</span><br><span class="line">                title = title,</span><br><span class="line">                content = content,</span><br><span class="line">                localImagePath = localImagePath,</span><br><span class="line">                networkImageUrl = networkImageUrl,</span><br><span class="line">                date = date,</span><br><span class="line">                weather = weather,</span><br><span class="line">                location = location</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            diaryDatabase.diaryDao().insertDiary(diary)</span><br><span class="line">            runOnUiThread &#123;</span><br><span class="line">                Toast.makeText(this, &quot;æ—¥è®°ä¿å­˜æˆåŠŸ&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">                val intent = Intent(&quot;SAVED&quot;) // æˆ–è€… &quot;com.example.app.DIARY_SAVED&quot;</span><br><span class="line">                sendBroadcast(intent)</span><br><span class="line">                finish()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="DetailUtils"><a href="#DetailUtils" class="headerlink" title="DetailUtils"></a>DetailUtils</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.example.diary_final.utils</span><br><span class="line"></span><br><span class="line">import java.text.SimpleDateFormat</span><br><span class="line">import java.util.Date</span><br><span class="line">import java.util.Locale</span><br><span class="line"></span><br><span class="line">object DateUtils &#123;</span><br><span class="line">    private const val DEFAULT_DATE_FORMAT = &quot;yyyy-MM-dd&quot;</span><br><span class="line"></span><br><span class="line">    // çº¿ç¨‹å®‰å…¨çš„ SimpleDateFormat ç”Ÿæˆ</span><br><span class="line">    private fun getDateFormat(pattern: String): SimpleDateFormat &#123;</span><br><span class="line">        return SimpleDateFormat(pattern, Locale.getDefault())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ ¼å¼åŒ–æ—¥æœŸï¼ˆé»˜è®¤æ ¼å¼ &quot;yyyy-MM-dd&quot;ï¼‰</span><br><span class="line">    fun formatDate(date: Date, pattern: String = DEFAULT_DATE_FORMAT): String &#123;</span><br><span class="line">        return getDateFormat(pattern).format(date)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è·å–å½“å‰æ—¥æœŸçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²</span><br><span class="line">    fun getCurrentDate(pattern: String = DEFAULT_DATE_FORMAT): String &#123;</span><br><span class="line">        return formatDate(Date(), pattern)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="LocationUtils"><a href="#LocationUtils" class="headerlink" title="LocationUtils"></a>LocationUtils</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package com.example.diary_final.utils</span><br><span class="line"></span><br><span class="line">import android.Manifest</span><br><span class="line">import android.content.Context</span><br><span class="line">import android.content.pm.PackageManager</span><br><span class="line">import android.location.Location</span><br><span class="line">import android.location.LocationListener</span><br><span class="line">import android.location.LocationManager</span><br><span class="line">import android.os.Bundle</span><br><span class="line">import androidx.core.app.ActivityCompat</span><br><span class="line"></span><br><span class="line">class LocationUtils(private val context: Context) &#123;</span><br><span class="line"></span><br><span class="line">    private val locationManager = context.getSystemService(Context.LOCATION_SERVICE) as LocationManager</span><br><span class="line">    private var locationListener: LocationListener? = null</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–å½“å‰ä½ç½®</span><br><span class="line">     */</span><br><span class="line">    fun getLocation(onLocationReceived: (Location) -&gt; Unit) &#123;</span><br><span class="line">        // æƒé™æ£€æŸ¥</span><br><span class="line">        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp;</span><br><span class="line">            ActivityCompat.checkSelfPermission(context, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED</span><br><span class="line">        ) &#123;</span><br><span class="line">            return // æ²¡æœ‰æƒé™ï¼Œç›´æ¥è¿”å›</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // è·å–ä¸Šæ¬¡å·²çŸ¥ä½ç½®ï¼ˆå¯èƒ½ä¼šåŠ å¿«é¦–æ¬¡è·å–é€Ÿåº¦ï¼‰</span><br><span class="line">        val lastKnownLocation: Location? = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER)</span><br><span class="line">            ?: locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER)</span><br><span class="line">        if (lastKnownLocation != null) &#123;</span><br><span class="line">            onLocationReceived(lastKnownLocation)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // ç›‘å¬å®æ—¶ä½ç½®æ›´æ–°</span><br><span class="line">        locationListener = object : LocationListener &#123;</span><br><span class="line">            override fun onLocationChanged(location: Location) &#123;</span><br><span class="line">                onLocationReceived(location)</span><br><span class="line">                removeLocationUpdates() // è·å–åˆ°ä½ç½®åç§»é™¤ç›‘å¬</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun onStatusChanged(provider: String?, status: Int, extras: Bundle?) &#123;&#125;</span><br><span class="line">            override fun onProviderEnabled(provider: String) &#123;&#125;</span><br><span class="line">            override fun onProviderDisabled(provider: String) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // è¯·æ±‚ä½ç½®æ›´æ–°ï¼ˆä¼˜å…ˆä½¿ç”¨ GPSï¼Œç½‘ç»œä½œä¸ºå¤‡ç”¨ï¼‰</span><br><span class="line">        try &#123;</span><br><span class="line">            locationManager.requestLocationUpdates(</span><br><span class="line">                LocationManager.GPS_PROVIDER,</span><br><span class="line">                5000L, // 5ç§’æ›´æ–°ä¸€æ¬¡</span><br><span class="line">                10f,   // 10ç±³å˜åŒ–æ›´æ–°</span><br><span class="line">                locationListener!!</span><br><span class="line">            )</span><br><span class="line">        &#125; catch (e: Exception) &#123;</span><br><span class="line">            e.printStackTrace()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            locationManager.requestLocationUpdates(</span><br><span class="line">                LocationManager.NETWORK_PROVIDER,</span><br><span class="line">                5000L,</span><br><span class="line">                10f,</span><br><span class="line">                locationListener!!</span><br><span class="line">            )</span><br><span class="line">        &#125; catch (e: Exception) &#123;</span><br><span class="line">            e.printStackTrace()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç§»é™¤ä½ç½®æ›´æ–°ç›‘å¬ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span><br><span class="line">     */</span><br><span class="line">    fun removeLocationUpdates() &#123;</span><br><span class="line">        locationListener?.let &#123;</span><br><span class="line">            locationManager.removeUpdates(it)</span><br><span class="line">            locationListener = null</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kotlinè¯­æ³•</title>
      <link href="/2025/03/03/Kotlin%E8%AF%AD%E6%B3%95/"/>
      <url>/2025/03/03/Kotlin%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="applyã€letã€runã€alsoã€with"><a href="#applyã€letã€runã€alsoã€with" class="headerlink" title="applyã€letã€runã€alsoã€with"></a>applyã€letã€runã€alsoã€with</h1><p>Kotlin æä¾›äº†ä¸€äº› <strong>ä½œç”¨åŸŸå‡½æ•°ï¼ˆScope Functionsï¼‰</strong>ï¼Œæ¯”å¦‚ <code>apply</code>ã€<code>let</code>ã€<code>run</code>ã€<code>also</code> å’Œ <code>with</code>ï¼Œå®ƒä»¬å¯ä»¥è®©ä»£ç æ›´åŠ ç®€æ´ï¼Œæé«˜å¯è¯»æ€§ã€‚è¿™äº›å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯<strong>åœ¨å¯¹è±¡çš„ç‰¹å®šä½œç”¨åŸŸå†…æ‰§è¡Œä»£ç </strong>ï¼Œé¿å…é‡å¤å¼•ç”¨å¯¹è±¡ï¼ˆå¦‚ <code>this</code> æˆ– <code>it</code>ï¼‰ã€‚</p><h2 id="1-applyï¼šåœ¨å¯¹è±¡è‡ªèº«ä½œç”¨åŸŸå†…ä¿®æ”¹å¯¹è±¡"><a href="#1-applyï¼šåœ¨å¯¹è±¡è‡ªèº«ä½œç”¨åŸŸå†…ä¿®æ”¹å¯¹è±¡" class="headerlink" title="1. applyï¼šåœ¨å¯¹è±¡è‡ªèº«ä½œç”¨åŸŸå†…ä¿®æ”¹å¯¹è±¡"></a>1. applyï¼šåœ¨å¯¹è±¡è‡ªèº«ä½œç”¨åŸŸå†…ä¿®æ”¹å¯¹è±¡</h2><p><code>apply</code> <strong>è¿”å›è°ƒç”¨è€…æœ¬èº«ï¼ˆthisï¼‰</strong>ï¼Œé€‚ç”¨äºå¯¹å¯¹è±¡æ‰§è¡Œä¸€ç³»åˆ— <strong>ä¿®æ”¹æ“ä½œ</strong> åè¿”å›è‡ªèº«ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a><strong>ä½¿ç”¨åœºæ™¯</strong></h3><ul><li><strong>ç”¨äºåˆå§‹åŒ–å¯¹è±¡</strong>ï¼Œé¿å…å¤šæ¬¡è°ƒç”¨å¯¹è±¡çš„ <code>set</code> æ–¹æ³•ã€‚</li><li><strong>é“¾å¼è°ƒç”¨</strong>ï¼Œè®©ä»£ç æ›´æµç•…ã€‚</li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘class Person &#123;</span><br><span class="line">    var name: String = &quot;&quot;</span><br><span class="line">    var age: Int = 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val person = Person().apply &#123;</span><br><span class="line">    name = &quot;Alice&quot;</span><br><span class="line">    age = 20</span><br><span class="line">&#125;</span><br><span class="line">println(person.name) // Alice</span><br><span class="line">println(person.age)  // 20</span><br></pre></td></tr></table></figure><p><strong>åˆ†æ</strong></p><ul><li><code>apply</code> ä½œç”¨åœ¨ <code>Person</code> å¯¹è±¡ä¸Šï¼Œ<code>this</code> ä»£è¡¨ <code>Person</code> æœ¬èº«ã€‚</li><li><strong>ç›´æ¥åœ¨ <code>apply</code> çš„ä»£ç å—å†…ä¿®æ”¹å¯¹è±¡çš„å±æ€§</strong>ï¼Œæœ€ç»ˆ <code>apply</code> <strong>è¿”å›è¯¥å¯¹è±¡æœ¬èº«</strong>ï¼Œæ‰€ä»¥ <code>person</code> ä»ç„¶æ˜¯ <code>Person</code> ç±»å‹ã€‚</li></ul><h2 id="2-letï¼šé€‚ç”¨äºéç©ºå€¼çš„æ“ä½œ"><a href="#2-letï¼šé€‚ç”¨äºéç©ºå€¼çš„æ“ä½œ" class="headerlink" title="2. letï¼šé€‚ç”¨äºéç©ºå€¼çš„æ“ä½œ"></a>2. letï¼šé€‚ç”¨äºéç©ºå€¼çš„æ“ä½œ</h2><p><code>let</code> <strong>è¿”å›æœ€åä¸€è¡Œçš„å€¼</strong>ï¼Œ<strong>é€‚ç”¨äºå¯ç©ºå¯¹è±¡</strong>ï¼Œå¯ä»¥é¿å… <code>NullPointerException</code>ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-1"><a href="#ä½¿ç”¨åœºæ™¯-1" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a><strong>ä½¿ç”¨åœºæ™¯</strong></h3><ul><li><strong>é¿å… <code>null</code> æ£€æŸ¥</strong>ï¼Œç®€åŒ– <code>?.</code> æ“ä½œç¬¦çš„é€»è¾‘ã€‚</li><li><strong>é“¾å¼è°ƒç”¨</strong>ï¼Œå¯¹å€¼è¿›è¡Œè½¬æ¢ã€‚</li></ul><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘val name: String? = &quot;Kotlin&quot;</span><br><span class="line">name?.let &#123;</span><br><span class="line">    println(it.uppercase())  // KOTLIN</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ†æ</strong></p><ul><li><code>name?.let &#123;&#125;</code> åªæœ‰åœ¨ <code>name</code> <strong>ä¸ä¸ºç©º</strong> æ—¶æ‰ä¼šæ‰§è¡Œ <code>let</code> ä»£ç å—ï¼Œ<strong>å¦‚æœ <code>name</code> ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ‰§è¡Œ</strong>ã€‚</li><li><code>it</code> ä»£è¡¨ <code>name</code> è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå› æ­¤ <code>it.uppercase()</code> æŠŠ <code>name</code> è½¬æ¢ä¸ºå¤§å†™ã€‚</li></ul><p><strong>å¦ä¸€ç§ä½¿ç”¨åœºæ™¯ï¼šå˜é‡ä½œç”¨åŸŸæ§åˆ¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘val number = 5</span><br><span class="line">val square = number.let &#123;</span><br><span class="line">    val result = it * it</span><br><span class="line">    result</span><br><span class="line">&#125;</span><br><span class="line">println(square) // 25</span><br></pre></td></tr></table></figure><ul><li><code>let</code> ä»£ç å—ä¸­çš„ <code>it</code> ä»£è¡¨ <code>number</code>ï¼Œè®¡ç®— <code>5 * 5</code> å¹¶è¿”å› <code>25</code>ã€‚</li></ul><h2 id="3-runï¼šåœ¨å¯¹è±¡ä½œç”¨åŸŸå†…æ‰§è¡Œä»£ç å¹¶è¿”å›ç»“æœ"><a href="#3-runï¼šåœ¨å¯¹è±¡ä½œç”¨åŸŸå†…æ‰§è¡Œä»£ç å¹¶è¿”å›ç»“æœ" class="headerlink" title="3. runï¼šåœ¨å¯¹è±¡ä½œç”¨åŸŸå†…æ‰§è¡Œä»£ç å¹¶è¿”å›ç»“æœ"></a>3. runï¼šåœ¨å¯¹è±¡ä½œç”¨åŸŸå†…æ‰§è¡Œä»£ç å¹¶è¿”å›ç»“æœ</h2><p><code>run</code> ç»“åˆäº† <code>let</code> å’Œ <code>apply</code> çš„ç‰¹æ€§ï¼Œå®ƒåœ¨ <strong>å¯¹è±¡ä½œç”¨åŸŸ</strong> å†…æ‰§è¡Œä»£ç ï¼Œå¹¶ <strong>è¿”å›æœ€åä¸€è¡Œçš„å€¼</strong>ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-2"><a href="#ä½¿ç”¨åœºæ™¯-2" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a><strong>ä½¿ç”¨åœºæ™¯</strong></h3><ul><li>éœ€è¦åœ¨å¯¹è±¡ä¸Šæ‰§è¡Œå¤šä¸ª <strong>è®¡ç®—æ“ä½œ</strong> å¹¶è¿”å›å€¼ã€‚</li></ul><h3 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘val person = Person().run &#123;</span><br><span class="line">    name = &quot;Bob&quot;</span><br><span class="line">    age = 25</span><br><span class="line">    &quot;åå­—æ˜¯ $name, å¹´é¾„æ˜¯ $age&quot;</span><br><span class="line">&#125;</span><br><span class="line">println(person)  // åå­—æ˜¯ Bob, å¹´é¾„æ˜¯ 25</span><br></pre></td></tr></table></figure><ul><li><code>run</code> ä½œç”¨åœ¨ <code>Person</code> å¯¹è±¡ä¸Šï¼Œ<code>this</code> ä»£è¡¨ <code>Person</code>ï¼Œä»£ç å—å†…å¯ä»¥ç›´æ¥ä¿®æ”¹ <code>name</code> å’Œ <code>age</code>ã€‚</li><li>æœ€åä¸€è¡Œ <code>&quot;åå­—æ˜¯ $name, å¹´é¾„æ˜¯ $age&quot;</code> ä½œä¸ºè¿”å›å€¼èµ‹ç»™ <code>person</code>ã€‚</li></ul><h2 id="4-alsoï¼šé€‚ç”¨äºå¯¹è±¡çš„é¢å¤–æ“ä½œ"><a href="#4-alsoï¼šé€‚ç”¨äºå¯¹è±¡çš„é¢å¤–æ“ä½œ" class="headerlink" title="4.alsoï¼šé€‚ç”¨äºå¯¹è±¡çš„é¢å¤–æ“ä½œ"></a>4.alsoï¼šé€‚ç”¨äºå¯¹è±¡çš„é¢å¤–æ“ä½œ</h2><p><code>also</code> <strong>è¿”å›è°ƒç”¨è€…æœ¬èº«ï¼ˆthisï¼‰</strong>ï¼Œä½†å’Œ <code>apply</code> ä¸åŒçš„æ˜¯ï¼Œ<code>also</code> <strong>æ›´é€‚ç”¨äºæ‰§è¡Œé¢å¤–çš„å‰¯ä½œç”¨æ“ä½œ</strong>ï¼ˆæ¯”å¦‚ <strong>æ—¥å¿—ã€æ‰“å°ã€è°ƒè¯•</strong>ï¼‰ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-3"><a href="#ä½¿ç”¨åœºæ™¯-3" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a><strong>ä½¿ç”¨åœºæ™¯</strong></h3><ul><li><strong>è®°å½•æ—¥å¿—</strong> æˆ– <strong>è°ƒè¯•</strong>ã€‚</li><li><strong>ä¸ä¼šä¿®æ”¹å¯¹è±¡æœ¬èº«</strong>ï¼Œåªæ˜¯æ‰§è¡Œé¢å¤–æ“ä½œã€‚</li></ul><h3 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘val numbers = mutableListOf(1, 2, 3).also &#123;</span><br><span class="line">    println(&quot;åŸå§‹åˆ—è¡¨: $it&quot;) // åŸå§‹åˆ—è¡¨: [1, 2, 3]</span><br><span class="line">&#125;.apply &#123;</span><br><span class="line">    add(4)</span><br><span class="line">&#125;</span><br><span class="line">println(numbers) // [1, 2, 3, 4]</span><br></pre></td></tr></table></figure><p><strong>åˆ†æ</strong></p><ul><li><code>also</code> ä»£ç å—ä¸­çš„ <code>it</code> æ˜¯ <code>numbers</code>ï¼Œ<strong>ä¸ä¼šæ”¹å˜ <code>numbers</code> æœ¬èº«</strong>ï¼Œåªæ˜¯ç”¨äºæ‰“å°æ—¥å¿—ã€‚</li><li><code>apply</code> ä¿®æ”¹äº† <code>numbers</code>ï¼Œæœ€ç»ˆ <code>numbers</code> å˜ä¸º <code>[1, 2, 3, 4]</code>ã€‚</li></ul><h2 id="5-withï¼šç”¨äºéæ‰©å±•å¯¹è±¡çš„ä½œç”¨åŸŸè°ƒç”¨"><a href="#5-withï¼šç”¨äºéæ‰©å±•å¯¹è±¡çš„ä½œç”¨åŸŸè°ƒç”¨" class="headerlink" title="5. withï¼šç”¨äºéæ‰©å±•å¯¹è±¡çš„ä½œç”¨åŸŸè°ƒç”¨"></a>5. withï¼šç”¨äºéæ‰©å±•å¯¹è±¡çš„ä½œç”¨åŸŸè°ƒç”¨</h2><p><code>with</code> <strong>ä¸èƒ½ç›´æ¥è°ƒç”¨</strong>ï¼Œè€Œæ˜¯ä»¥æ™®é€šå‡½æ•°çš„å½¢å¼ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶ååœ¨å…¶ä½œç”¨åŸŸå†…æ‰§è¡Œä»£ç ï¼Œ<strong>å¹¶è¿”å›æœ€åä¸€è¡Œçš„å€¼</strong>ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-4"><a href="#ä½¿ç”¨åœºæ™¯-4" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a><strong>ä½¿ç”¨åœºæ™¯</strong></h3><ul><li>é€‚ç”¨äº<strong>ä¸éœ€è¦è¿”å›å¯¹è±¡æœ¬èº«</strong>çš„æƒ…å†µï¼Œè€Œæ˜¯è¦è¿”å›è®¡ç®—ç»“æœã€‚</li></ul><h3 id="ç¤ºä¾‹-4"><a href="#ç¤ºä¾‹-4" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kotlinå¤åˆ¶ç¼–è¾‘val person = Person()</span><br><span class="line">val result = with(person) &#123;</span><br><span class="line">    name = &quot;Charlie&quot;</span><br><span class="line">    age = 30</span><br><span class="line">    &quot;åå­—: $name, å¹´é¾„: $age&quot;</span><br><span class="line">&#125;</span><br><span class="line">println(result)  // åå­—: Charlie, å¹´é¾„: 30</span><br></pre></td></tr></table></figure><p><strong>åˆ†æ</strong></p><ul><li><code>with(person) &#123;&#125;</code> è®© <code>person</code> è¿›å…¥ä½œç”¨åŸŸï¼Œ<code>this</code> ä»£è¡¨ <code>person</code>ã€‚</li><li>æœ€åä¸€è¡Œè¿”å› <code>&quot;åå­—: Charlie, å¹´é¾„: 30&quot;</code>ã€‚</li></ul><h2 id="å¯¹æ¯”æ€»ç»“"><a href="#å¯¹æ¯”æ€»ç»“" class="headerlink" title="å¯¹æ¯”æ€»ç»“"></a>å¯¹æ¯”æ€»ç»“</h2><table><thead><tr><th>å‡½æ•°</th><th>é€‚ç”¨åœºæ™¯</th><th>ä½œç”¨åŸŸå†…çš„ <code>this</code> æˆ– <code>it</code></th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>apply</code></td><td><strong>ä¿®æ”¹å¯¹è±¡æœ¬èº«</strong></td><td><code>this</code></td><td><strong>å¯¹è±¡æœ¬èº«</strong></td></tr><tr><td><code>let</code></td><td><strong>å¯ç©ºå¯¹è±¡ã€ä¸´æ—¶å˜é‡ä½œç”¨åŸŸ</strong></td><td><code>it</code></td><td><strong>Lambda æœ€åä¸€è¡Œ</strong></td></tr><tr><td><code>run</code></td><td><strong>éœ€è¦è¿”å›è®¡ç®—ç»“æœ</strong></td><td><code>this</code></td><td><strong>Lambda æœ€åä¸€è¡Œ</strong></td></tr><tr><td><code>also</code></td><td><strong>æ‰§è¡Œé¢å¤–æ“ä½œï¼ˆæ—¥å¿—&#x2F;è°ƒè¯•ï¼‰</strong></td><td><code>it</code></td><td><strong>å¯¹è±¡æœ¬èº«</strong></td></tr><tr><td><code>with</code></td><td><strong>æ›´ä¼ ç»Ÿçš„ä½œç”¨åŸŸè°ƒç”¨</strong></td><td><code>this</code></td><td><strong>Lambda æœ€åä¸€è¡Œ</strong></td></tr></tbody></table><hr><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a><strong>æœ€ä½³å®è·µ</strong></h2><ol><li><strong>å¦‚æœè¦ä¿®æ”¹å¯¹è±¡å¹¶è¿”å›å®ƒæœ¬èº«</strong> ğŸ‘‰ <code>apply</code></li><li><strong>å¦‚æœæ˜¯å¯ç©ºå¯¹è±¡ï¼Œé¿å… <code>null</code> æ£€æŸ¥</strong> ğŸ‘‰ <code>let</code></li><li><strong>å¦‚æœåªæƒ³æ‰§è¡Œä»£ç å—åè¿”å›ç»“æœ</strong> ğŸ‘‰ <code>run</code></li><li><strong>å¦‚æœä¸ä¿®æ”¹å¯¹è±¡ï¼Œåªæ˜¯æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆæ—¥å¿—ç­‰ï¼‰</strong> ğŸ‘‰ <code>also</code></li><li><strong>å¦‚æœè¦åœ¨å¯¹è±¡ä½œç”¨åŸŸæ‰§è¡Œä»£ç ï¼Œå¹¶è¿”å›ç»“æœ</strong> ğŸ‘‰ <code>with</code></li></ol><p>ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„ä»£ç éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œç®€æ´æ€§ ğŸš€ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Markdownè¯­æ³•</title>
      <link href="/2025/02/24/Markdown%E8%AF%AD%E6%B3%95/"/>
      <url>/2025/02/24/Markdown%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€-æ ‡é¢˜"><a href="#ä¸€-æ ‡é¢˜" class="headerlink" title="ä¸€.æ ‡é¢˜"></a>ä¸€.æ ‡é¢˜</h1><p>ä½¿ç”¨#</p><h1 id="äºŒ-å­—ä½“"><a href="#äºŒ-å­—ä½“" class="headerlink" title="äºŒ.å­—ä½“"></a>äºŒ.å­—ä½“</h1><h2 id="1-ç²—ä½“"><a href="#1-ç²—ä½“" class="headerlink" title="1.ç²—ä½“"></a>1.ç²—ä½“</h2><p>ä¸¤ä¸ª*</p><p><strong>M</strong></p><p><strong>M</strong></p><h2 id="2-æ–œä½“"><a href="#2-æ–œä½“" class="headerlink" title="2.æ–œä½“"></a>2.æ–œä½“</h2><p>ä¸€ä¸ª*</p><p><em>M</em></p><p><em>M</em></p><h2 id="3-ç²—ä½“åŠ æ–œä½“"><a href="#3-ç²—ä½“åŠ æ–œä½“" class="headerlink" title="3.ç²—ä½“åŠ æ–œä½“"></a>3.ç²—ä½“åŠ æ–œä½“</h2><p>ä¸‰ä¸ª*</p><p><em><strong>M</strong></em></p><p><em><strong>M</strong></em></p><h2 id="4-åˆ é™¤"><a href="#4-åˆ é™¤" class="headerlink" title="4.åˆ é™¤"></a>4.åˆ é™¤</h2><p>ä½¿ç”¨ä¸¤ä¸ªæ³¢æµªçº¿</p><p><del>M</del></p><p><del>M</del></p><h1 id="ä¸‰-å¼•ç”¨"><a href="#ä¸‰-å¼•ç”¨" class="headerlink" title="ä¸‰.å¼•ç”¨"></a>ä¸‰.å¼•ç”¨</h1><p>ä½¿ç”¨å¤§äºå·</p><blockquote><p>M</p></blockquote><blockquote><p>M</p></blockquote><h1 id="å››-åˆ†å‰²çº¿"><a href="#å››-åˆ†å‰²çº¿" class="headerlink" title="å››.åˆ†å‰²çº¿"></a>å››.åˆ†å‰²çº¿</h1><p>ä¸‰ä¸ª*æˆ–è€…ä¸‰ä¸ª-</p><h1 id="äº”-å›¾ç‰‡"><a href="#äº”-å›¾ç‰‡" class="headerlink" title="äº”.å›¾ç‰‡"></a>äº”.å›¾ç‰‡</h1><p>!+[]+()ï¼Œå…¶ä¸­[]å†…å¡«å†™åå­—ï¼Œ()å†…å¡«å†™å›¾ç‰‡åœ°å€</p><p><img src="/"></p><h1 id="å…­-è¶…é“¾æ¥"><a href="#å…­-è¶…é“¾æ¥" class="headerlink" title="å…­.è¶…é“¾æ¥"></a>å…­.è¶…é“¾æ¥</h1><p>[]+()ï¼Œå…¶ä¸­[]å†…å¡«å†™åå­—ï¼Œ()å†…å¡«å†™ç½‘å€</p><p><a href="www.baidu.com">hh</a></p><h1 id="ä¸ƒ-åˆ—è¡¨"><a href="#ä¸ƒ-åˆ—è¡¨" class="headerlink" title="ä¸ƒ.åˆ—è¡¨"></a>ä¸ƒ.åˆ—è¡¨</h1><h2 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h2><p>æ•°å­—åŠ â€.â€,å†åŠ ç©ºæ ¼ï¼Œå³ç”Ÿæˆæœ‰åºåˆ—è¡¨</p><ol><li>A</li><li>B</li></ol><h2 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h2><p>-åŠ ç©ºæ ¼</p><ul><li>1</li><li>2</li></ul><h1 id="å…«-è¡¨æ ¼"><a href="#å…«-è¡¨æ ¼" class="headerlink" title="å…«.è¡¨æ ¼"></a>å…«.è¡¨æ ¼</h1><p>1.å³é”®ï¼Œé€‰æ‹©æ’å…¥ï¼Œé€‰æ‹©è¡¨æ ¼</p><p>2.Ctrl+T</p><p>3.åŸå§‹äººæ¨¡å¼</p><p>å…ˆå†™å¥½æ ¼å¼å¦‚ä¸‹</p><p>X|Y|Z</p><p>â€“|â€“|â€“</p><p>1|2|3</p><p>ç„¶åç‚¹å‡»å·¦ä¸‹è§’å›¾æ¡ˆ&lt;&#x2F;&gt;ï¼Œå¼€å¯æºä»£ç æ¨¡å¼ï¼ŒæŠŠå„è¡Œä¹‹é—´çš„ç©ºè¡Œåˆ é™¤ï¼Œå³å¯ç”Ÿæˆè¡¨æ ¼ã€‚</p><h1 id="ä¹-æ’å…¥ä»£ç å—"><a href="#ä¹-æ’å…¥ä»£ç å—" class="headerlink" title="ä¹.æ’å…¥ä»£ç å—"></a>ä¹.æ’å…¥ä»£ç å—</h1><p>ä½¿ç”¨ä¸‰ä¸ª&#96;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQLæ•°æ®åº“</title>
      <link href="/2025/02/24/SQL%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2025/02/24/SQL%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>è¿›åº¦1:32:06</p><h1 id="ä¸€-æ•°æ®ç±»å‹"><a href="#ä¸€-æ•°æ®ç±»å‹" class="headerlink" title="ä¸€.æ•°æ®ç±»å‹"></a>ä¸€.æ•°æ®ç±»å‹</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INT                    --æ•´æ•°</span><br><span class="line">DECIMAL(3,2)   --æœ‰å°æ•°ç‚¹çš„æ•°</span><br><span class="line">VARCHAR(10)            --å­—ä¸²</span><br><span class="line">BLOB                   --(Binary Large Object) å›¾ç‰‡ å½±ç‰‡ æ¡£æ¡ˆ...</span><br><span class="line">DATA                   --&#x27;YYYY-MM-DD&#x27; æ—¥æœŸ</span><br><span class="line">TIMESTAMP              --&#x27;YYYY-MM-DD HH:MM:SS&#x27; è®°å½•æ—¶é—´</span><br></pre></td></tr></table></figure><h1 id="äºŒ-ç®€å•ä¾‹å­"><a href="#äºŒ-ç®€å•ä¾‹å­" class="headerlink" title="äºŒ.ç®€å•ä¾‹å­"></a>äºŒ.ç®€å•ä¾‹å­</h1><h2 id="ä¾‹ä¸€"><a href="#ä¾‹ä¸€" class="headerlink" title="ä¾‹ä¸€"></a>ä¾‹ä¸€</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> dATABASE `sql_tutorial`;</span><br><span class="line"><span class="keyword">SHOW</span> DAtABaSES;</span><br><span class="line">USE `sql_tutorial`;</span><br><span class="line"><span class="keyword">CREATE TABLE</span> `student`(</span><br><span class="line">`student_id` <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> auto_increment,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span> ,  <span class="comment">-- è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œè®°å¾—æ˜¯å‡å‡åŠ ç©ºæ ¼</span></span><br><span class="line">`major` <span class="type">VARCHAR</span>(<span class="number">20</span>)  <span class="keyword">default</span> <span class="string">&#x27;å†å²&#x27;</span>,</span><br><span class="line">`score` <span class="type">INT</span> <span class="keyword">default</span> <span class="number">100</span> <span class="comment">-- æœ€åä¸€ä¸ªå±æ€§ä¸ç”¨åŠ é€—å·</span></span><br><span class="line">);      <span class="comment">/*æœ€åæœ‰;ç›¸å½“äºä¸€å¥è¯çš„ç»“æŸï¼Ÿ*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">dESCriBe</span> `student`;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">TABLE</span> `student`;</span><br><span class="line"><span class="keyword">ALTER TABLE</span> `student` <span class="keyword">ADD</span> gpa <span class="type">DECIMAL</span>(<span class="number">3</span>,<span class="number">2</span>) <span class="keyword">default</span> <span class="number">0.00</span>; <span class="comment">-- æ–°å¢å±æ€§</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> `student` <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> gpa; <span class="comment">-- åˆ é™¤å±æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student`;</span><br><span class="line"><span class="keyword">INSERT INTO</span> `student` <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;å°ç™½&#x27;</span>,<span class="string">&#x27;å†å²&#x27;</span>,<span class="number">100</span>); <span class="comment">-- æ’å…¥æ•°æ®ï¼Œæ³¨æ„æ˜¯ç”¨å•å¼•å·â€™è€Œä¸æ˜¯`</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> `student` <span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;å°ç»¿&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `student`(`name`,`major`,`student_id`) <span class="keyword">VALUES</span>(<span class="string">&#x27;å°è“&#x27;</span>,<span class="string">&#x27;è‹±è¯­&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> `student`(`name`,`student_id`) <span class="keyword">VALUES</span>(<span class="string">&#x27;å°çº¢&#x27;</span>,<span class="number">4</span>); </span><br><span class="line"><span class="keyword">INSERT INTO</span> `student`(`name`,`major`) <span class="keyword">VALUES</span>(<span class="string">&#x27;å°çº¢&#x27;</span>,<span class="keyword">NULL</span>); <span class="comment">-- ä¸å†™idæ˜¯å› ä¸ºauto_incrementè‡ªåŠ¨ç”Ÿæˆid</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `student_id` <span class="operator">=</span> <span class="number">4</span>;  <span class="comment">-- åˆ é™¤idä¸º4çš„é‚£ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">SET</span> SQL_SAFE_UPDATES<span class="operator">=</span><span class="number">0</span> ;<span class="comment">-- ç”¨äºå…³é—­å®‰å…¨æ›´æ–°æ¨¡å¼ï¼Œå…è®¸ä½ æ‰§è¡Œ UPDATE æˆ– DELETE è¯­å¥ï¼Œå³ä½¿æ²¡æœ‰ WHERE æ¡ä»¶æˆ–æ²¡æœ‰ä¸»é”®ç´¢å¼•ã€‚</span></span><br><span class="line"><span class="keyword">UPDATE</span> `student` </span><br><span class="line"><span class="keyword">SET</span> `major` <span class="operator">=</span><span class="string">&#x27;è‹±è¯­æ–‡å­¦&#x27;</span> <span class="comment">-- ä¸æ˜¯è¡Œåˆ—åç­‰ï¼Œè¦ä½¿ç”¨&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> `major` <span class="operator">=</span><span class="string">&#x27;è‹±è¯­&#x27;</span> ;</span><br><span class="line"><span class="keyword">UPDATE</span> `student` <span class="keyword">SET</span> `name`<span class="operator">=</span><span class="string">&#x27;å°1&#x27;</span> <span class="keyword">WHERE</span> `name`<span class="operator">=</span><span class="string">&#x27;å°ç»¿&#x27;</span> <span class="keyword">or</span> `name`<span class="operator">=</span> <span class="string">&#x27;å°ç™½&#x27;</span>;  <span class="comment">-- æ›´æ–°è¡¨æ ¼</span></span><br><span class="line"><span class="keyword">UPDATE</span> `student` <span class="keyword">SET</span> `name`<span class="operator">=</span><span class="string">&#x27;å°ç°&#x27;</span>,`major`<span class="operator">=</span><span class="string">&#x27;ç‰©ç†&#x27;</span> <span class="keyword">WHERE</span> `student_id`<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> `student` <span class="keyword">SET</span> `major`<span class="operator">=</span><span class="string">&#x27;ç‰©ç†&#x27;</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> `student` <span class="keyword">where</span> `name`<span class="operator">=</span><span class="string">&#x27;å°ç°&#x27;</span> <span class="keyword">and</span> `major`<span class="operator">=</span><span class="string">&#x27;ç‰©ç†&#x27;</span>; <span class="comment">-- whereç”¨andè¿æ¥</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> `student` <span class="keyword">where</span> `score`<span class="operator">&lt;</span><span class="number">60</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> `student` ;<span class="comment">-- æŠŠstudentå†…æ•°æ®å…¨éƒ¨åˆ é™¤</span></span><br><span class="line"><span class="comment">-- å–å¾—èµ„æ–™</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `student`;</span><br><span class="line"><span class="keyword">Select</span> `name` <span class="keyword">from</span> `student` ;</span><br><span class="line"><span class="keyword">select</span> `name` , `major` <span class="keyword">from</span> `student`; <span class="comment">-- ä¸­é—´ç”¨,è€Œä¸æ˜¯and</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> `student` <span class="keyword">order</span> <span class="keyword">by</span> `score` ; <span class="comment">-- ä»ä½åˆ°é«˜ï¼Œæˆ–è€…åœ¨order byåé¢åŠ ä¸ŠASC</span></span><br><span class="line"><span class="keyword">selecT</span> <span class="operator">*</span> <span class="keyword">from</span> `student` <span class="keyword">order</span> <span class="keyword">by</span> `score` <span class="keyword">DESC</span>;<span class="comment">-- ä»é«˜åˆ°ä½</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `student` <span class="keyword">order</span> <span class="keyword">by</span> `score`<span class="keyword">DESC</span>,`student_id`  Limit <span class="number">3</span>; <span class="comment">-- å…ˆæ ¹æ®scoreé™åºæ’åºï¼Œè‹¥æ˜¯scoreä¸€æ ·ï¼Œåˆ™æŒ‰student_idå‡åºæ’åºï¼Œåªè¿”å›å‰ä¸‰ä¸ª</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `student` <span class="keyword">where</span> `major`<span class="operator">=</span><span class="string">&#x27;è‹±è¯­&#x27;</span> <span class="keyword">and</span> `student_id`<span class="operator">=</span><span class="number">1</span>; <span class="comment">-- whereç”¨andè¿æ¥</span></span><br></pre></td></tr></table></figure><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>1.<em><strong>æ³¨é‡Š</strong></em>æœ‰â€“ å’Œ&#x2F;**&#x2F;ä¸¤ç§â€“åé¢è¦è·Ÿç©ºæ ¼</p><p>2.ä¸€ä¸ªå¼•å·æ˜¯ä¸€å¥ï¼Œæ¯”å¦‚è™½ç„¶CREATE TABLE <code>student</code> æœ‰é‚£ä¹ˆå¤šè¡Œï¼Œå…¶å®åªæœ‰ä¸€å¥ï¼Œæ‰€ä»¥cursoræŒ‡å‘å®¹æ˜“ä¸€è¡Œå°±å¯ä»¥æ‰§è¡Œæ•´ä¸ªè¯­å¥</p><p>3.é—ªç”µåªä¼šé—ªç”µä¸€å¥è¯ï¼Œæ¯”å¦‚ä½ æ²¡æœ‰æ‰§è¡ŒUSE sql_tutorial è¿™ä¸€å¥è¯ï¼Œå»æ‰§è¡ŒdESCriBe <code>student</code>;å°±ä¼šæŠ¥é”™ï¼Œè®°ä½<em><strong>ä¸€å®šè¦å…ˆæ‰§è¡ŒUSE sql_tutorialè¿™å¥è¯</strong></em></p><p>4.å…³é”®å­—çš„å¤§å°å†™æ˜¯æ— æ‰€è°“çš„ï¼Œä½†å»ºè®®å…³é”®å­—å…¨ç”¨å¤§å†™ï¼Œä¸Šé¢ä¾‹å­åªæ˜¯ä¸ºäº†ä½“ç°å¤§å°å†™ä»»æ„çš„ç‰¹å¾ï¼Œå®é™…ä¸Šä¸€ä¸ªå…¨éƒ¨å¤§å†™ï¼Œè‡ªå·±å®šä¹‰çš„å­—å»ºè®®ä½¿ç”¨&#96;&#96;åŒ…æ‹¬èµ·æ¥ï¼Œå¹¶ä½¿ç”¨å°å†™</p><p>5.&gt;å¤§äº   &lt;å°äº   &gt;&#x3D;å¤§äºç­‰äº   &#x3D;ç­‰äº    &lt;&gt;ä¸ç­‰äº</p><p>6.whereç”¨andï¼Œorè¿æ¥ï¼Ÿ</p><h2 id="ä¾‹äºŒ"><a href="#ä¾‹äºŒ" class="headerlink" title="ä¾‹äºŒ"></a>ä¾‹äºŒ</h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ASçš„å‡†å¤‡</title>
      <link href="/2025/02/16/%E4%BD%BF%E7%94%A8AS%E7%9A%84%E5%87%86%E5%A4%87/"/>
      <url>/2025/02/16/%E4%BD%BF%E7%94%A8AS%E7%9A%84%E5%87%86%E5%A4%87/</url>
      
        <content type="html"><![CDATA[<h1 id="1-viewbinding"><a href="#1-viewbinding" class="headerlink" title="1.viewbinding"></a>1.viewbinding</h1><p>build.gradle.ktsä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">...</span><br><span class="line">buildFeatures &#123;</span><br><span class="line">    viewBinding = true</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-compileSdk"><a href="#2-compileSdk" class="headerlink" title="2.compileSdk"></a>2.compileSdk</h1><p>build.gradle.ktsä¸­compileSdk&#x3D;34æ”¹æˆcompileSdk&#x3D;35</p><h1 id="3-dependencies"><a href="#3-dependencies" class="headerlink" title="3.dependencies"></a>3.dependencies</h1><p>åœ¨dependenciesä¸­æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">implementation(&quot;androidx.fragment:fragment:1.6.2&quot;)</span><br><span class="line">implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)</span><br><span class="line">implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)</span><br><span class="line">implementation(&quot;com.squareup.retrofit2:retrofit:2.9.0&quot;)</span><br><span class="line">implementation(&quot;com.squareup.retrofit2:converter-gson:2.9.0&quot;)</span><br><span class="line">implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.1.1&quot;)</span><br><span class="line">implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1&quot;)</span><br><span class="line">implementation(&quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;)</span><br><span class="line">implementation(&quot;androidx.lifecycle:lifecycle-livedata-ktx:2.8.7&quot;)</span><br><span class="line">implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;)</span><br><span class="line">implementation(&quot;androidx.room:room-runtime:2.6.1&quot;)</span><br><span class="line">kapt(&quot;androidx.room:room-compiler:2.6.1&quot;)</span><br><span class="line">implementation(&quot;androidx.work:work-runtime:2.10.0&quot;)</span><br><span class="line">implementation(&quot;com.github.bumptech.glide:glide:4.15.1&quot;)</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>è§£é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">implementation(&quot;androidx.fragment:fragment-ktx:1.6.2&quot;)</span><br><span class="line">implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)//å¼•ç”¨OkHttpåº“</span><br><span class="line">implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)//ä½¿ç”¨gson</span><br><span class="line">implementation(&quot;com.squareup.retrofit2:retrofit:2.9.0&quot;)//ä½¿ç”¨Retrofit,ä¼šè‡ªåŠ¨å°†Retrofitã€OkHttpã€å’ŒOkioè¿™å‡ ä¸ªåº“ä¸€èµ·ä¸‹è½½ï¼Œä¸ç”¨å†æ‰‹åŠ¨å¼•å…¥OkHttpåº“ã€‚</span><br><span class="line">implementation(&quot;com.squareup.retrofit2:converter-gson:2.9.0&quot;)//ä½¿ç”¨Retrofitï¼Œè¿™æ˜¯ä¸€ä¸ªRetrofitçš„è½¬æ¢åº“ï¼Œå®ƒæ˜¯å€ŸåŠ©GSONæ¥è§£æJSONæ•°æ®çš„ï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨å°†GSONåº“ä¸‹è½½ä¸‹æ¥ï¼Œæ‰€ä»¥ä¸ç”¨æ‰‹åŠ¨å¼•å…¥GSONåº“äº†</span><br><span class="line">implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.1.1&quot;)//åç¨‹</span><br><span class="line">implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1&quot;)//åç¨‹</span><br><span class="line">implementation(&quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;)//ä½¿ç”¨ViewModelç»„ä»¶</span><br><span class="line">implementation(&quot;androidx.lifecycle:lifecycle-livedata-ktx:2.8.7&quot;)//ä½¿ç”¨ViewModelã€livedataç»„ä»¶</span><br><span class="line">implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;)//ä½¿ç”¨ViewModelç»„ä»¶</span><br><span class="line">implementation(&quot;androidx.room:room-runtime:2.6.1&quot;)//room</span><br><span class="line">kapt(&quot;androidx.room:room-compiler:2.6.1&quot;)//room</span><br><span class="line">implementation(&quot;androidx.work:work-runtime:2.10.0&quot;)//WorkManager</span><br><span class="line">implementation(&quot;com.github.bumptech.glide:glide:4.15.1&quot;)/*Glide,å¦å¤–ï¼ŒGlideä¸­éœ€è¦ç”¨åˆ°ç½‘ç»œåŠŸèƒ½ï¼Œå› æ­¤ä½ è¿˜å¾—åœ¨AndroidManifest.xmlä¸­å£°æ˜ä¸€ä¸‹ç½‘ç»œæƒé™æ‰è¡Œï¼š&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;*/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="4-plugins"><a href="#4-plugins" class="headerlink" title="4.plugins"></a>4.plugins</h1><p>æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id(&quot;kotlin-kapt&quot;)</span><br></pre></td></tr></table></figure><p>è§£é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id(&quot;kotlin-kapt&quot;)//ä¸ºäº†dependenciesä¸­èƒ½ä½¿ç”¨kapt(&quot;...&quot;)è¿™æ ·çš„è¯­æ³•</span><br></pre></td></tr></table></figure><h1 id="5-binding"><a href="#5-binding" class="headerlink" title="5.binding"></a>5.binding</h1><p>æ”¹ç”¨binding.root</p><h1 id="6-å£°æ˜ç½‘ç»œæƒé™"><a href="#6-å£°æ˜ç½‘ç»œæƒé™" class="headerlink" title="6.å£°æ˜ç½‘ç»œæƒé™"></a>6.å£°æ˜ç½‘ç»œæƒé™</h1><p>åœ¨AndroidManifest.xmlå¼€å¤´æ·»åŠ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹é¢ä¾‹å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</span><br></pre></td></tr></table></figure><h1 id="7-ä½¿ç”¨HTTP"><a href="#7-ä½¿ç”¨HTTP" class="headerlink" title="7.ä½¿ç”¨HTTP"></a>7.ä½¿ç”¨HTTP</h1><p>åœ¨res-&gt;xmlæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºnetwork_config.xmlæ–‡ä»¶ï¼Œç„¶åä¿®æ”¹æ–‡ä»¶ä¸­å†…å®¹å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;network-security-config&gt;</span><br><span class="line">    &lt;base-config cleartextTrafficPermitted=&quot;true&quot;&gt;</span><br><span class="line">        &lt;trust-anchors&gt;</span><br><span class="line">            &lt;certificates src=&quot;system&quot;/&gt;</span><br><span class="line">        &lt;/trust-anchors&gt;</span><br><span class="line">    &lt;/base-config&gt;</span><br><span class="line">&lt;/network-security-config&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ®µé…ç½®æ–‡ä»¶çš„æ„æ€æ˜¯å…è®¸æˆ‘ä»¬ä»¥æ˜æ–‡çš„æ–¹å¼åœ¨ç½‘ç»œä¸Šä¼ è¾“æ•°æ®ï¼Œè€ŒHTTPä½¿ç”¨çš„å°±æ˜¯æ˜æ–‡ä¼ è¾“æ–¹å¼ã€‚</p><p>æ¥ä¸‹æ¥ä¿®æ”¹AndroidManifest.xmlä¸­çš„ä»£ç æ¥å¯ç”¨æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„é…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">        android:allowBackup=&quot;true&quot;</span><br><span class="line">        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;</span><br><span class="line">        android:fullBackupContent=&quot;@xml/backup_rules&quot;</span><br><span class="line">        android:icon=&quot;@mipmap/ic_launcher&quot;</span><br><span class="line">        android:label=&quot;@string/app_name&quot;</span><br><span class="line">        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;</span><br><span class="line">        android:supportsRtl=&quot;true&quot;</span><br><span class="line">        android:theme=&quot;@style/Theme.NetworkTest&quot;</span><br><span class="line">        tools:targetApi=&quot;31&quot;</span><br><span class="line">        android:networkSecurityConfig=&quot;@xml/network_config&quot;//å°±æ˜¯æ·»åŠ è¿™ä¸€è¡Œå“¦</span><br><span class="line">        &gt;</span><br></pre></td></tr></table></figure><h1 id="AndroidManifest-xmlçš„æƒé™å£°æ˜"><a href="#AndroidManifest-xmlçš„æƒé™å£°æ˜" class="headerlink" title="AndroidManifest.xmlçš„æƒé™å£°æ˜"></a>AndroidManifest.xmlçš„æƒé™å£°æ˜</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt; </span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Task-4</title>
      <link href="/2025/02/10/Task-4/"/>
      <url>/2025/02/10/Task-4/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯’å‡ç¬¬å››è®²"><a href="#å¯’å‡ç¬¬å››è®²" class="headerlink" title="å¯’å‡ç¬¬å››è®²"></a>å¯’å‡ç¬¬å››è®²</h1><h2 id="ä¸€-æœ‰ç†æ•°å–ä½™"><a href="#ä¸€-æœ‰ç†æ•°å–ä½™" class="headerlink" title="ä¸€.æœ‰ç†æ•°å–ä½™"></a>ä¸€.æœ‰ç†æ•°å–ä½™</h2><h3 id="1-å¯¹åº”æ€è·¯"><a href="#1-å¯¹åº”æ€è·¯" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>è¯¥é—®é¢˜è¦æ±‚è®¡ç®—æœ‰ç†æ•° c&#x3D;ab<em>c</em>&#x3D;<em>b**a</em> å¯¹19260817å–æ¨¡çš„å€¼ã€‚æ ¹æ®æ¨¡è¿ç®—çš„æ€§è´¨ï¼Œè¿™ç›¸å½“äºæ±‚è§£æ–¹ç¨‹ bxâ‰¡amodâ€‰â€‰19260817<em>b**x</em>â‰¡<em>a</em>mod19260817ã€‚è§£çš„å­˜åœ¨æ€§å–å†³äº b<em>b</em> æ˜¯å¦å­˜åœ¨æ¨¡19260817çš„é€†å…ƒã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><strong>å¤§æ•°å–æ¨¡</strong>ï¼šç”±äºè¾“å…¥çš„ a<em>a</em> å’Œ b<em>b</em> å¯èƒ½éå¸¸å¤§ï¼ˆæœ€å¤š10001ä½ï¼‰ï¼Œéœ€è¦å°†è¿™ä¸¤ä¸ªæ•°è½¬æ¢ä¸ºæ¨¡19260817åçš„å€¼ã€‚è¿™å¯ä»¥é€šè¿‡é€ä½å¤„ç†å­—ç¬¦ä¸²å¹¶å–æ¨¡æ¥å®ç°ã€‚</li><li><strong>åˆ¤æ–­é€†å…ƒå­˜åœ¨æ€§</strong>ï¼šè‹¥ b<em>b</em> æ¨¡19260817çš„ç»“æœä¸º0ï¼Œåˆ™æ–¹ç¨‹æ— è§£ï¼Œç›´æ¥è¾“å‡ºâ€œAngry!â€ã€‚å¦åˆ™ï¼Œåˆ©ç”¨è´¹é©¬å°å®šç†è®¡ç®— b<em>b</em> çš„é€†å…ƒï¼Œå› ä¸º19260817æ˜¯è´¨æ•°ã€‚</li><li><strong>è®¡ç®—æœ€ç»ˆç»“æœ</strong>ï¼šå°† a<em>a</em> çš„æ¨¡å€¼ä¸é€†å…ƒç›¸ä¹˜åå†æ¬¡å–æ¨¡ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚</li></ol><h3 id="2-å¯¹åº”ä»£ç "><a href="#2-å¯¹åº”ä»£ç " class="headerlink" title="2.å¯¹åº”ä»£ç "></a>2.å¯¹åº”ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int MOD = 19260817;</span><br><span class="line"></span><br><span class="line">int mod(const string&amp; s, int m) &#123;</span><br><span class="line">    int res = 0;</span><br><span class="line">    for (char c : s) &#123;</span><br><span class="line">        res = (res * 10LL + (c - &#x27;0&#x27;)) % m;</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">long long pow_mod(long long a, long long b, int mod) &#123;</span><br><span class="line">    long long res = 1;</span><br><span class="line">    a %= mod;</span><br><span class="line">    while (b &gt; 0) &#123;</span><br><span class="line">        if (b % 2 == 1) res = (res * a) % mod;</span><br><span class="line">        a = (a * a) % mod;</span><br><span class="line">        b /= 2;</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    string a_str, b_str;</span><br><span class="line">    cin &gt;&gt; a_str &gt;&gt; b_str;</span><br><span class="line"></span><br><span class="line">    int a_mod = mod(a_str, MOD);</span><br><span class="line">    int b_mod = mod(b_str, MOD);</span><br><span class="line"></span><br><span class="line">    if (b_mod == 0) &#123;</span><br><span class="line">        cout &lt;&lt; &quot;Angry!&quot; &lt;&lt; endl;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        long long inv_b = pow_mod(b_mod, MOD - 2, MOD);</span><br><span class="line">        long long ans = (a_mod * inv_b) % MOD;</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å­¦ä¹ æ€»ç»“"><a href="#3-å­¦ä¹ æ€»ç»“" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><ol><li><strong>å¤§æ•°å–æ¨¡æŠ€å·§</strong>ï¼šå¤„ç†è¶…å¤§æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡é€ä½å–æ¨¡çš„æ–¹å¼é¿å…æ•°å€¼æº¢å‡ºã€‚ä¾‹å¦‚ï¼Œå°†å­—ç¬¦ä¸²çš„æ¯ä¸€ä½ä¾æ¬¡è½¬æ¢ä¸ºå½“å‰ç»“æœçš„10å€åŠ ä¸Šè¯¥ä½æ•°å­—ï¼Œç„¶åç«‹å³å–æ¨¡ã€‚</li><li><strong>é€†å…ƒè®¡ç®—</strong>ï¼šå½“æ¨¡æ•°ä¸ºè´¨æ•°æ—¶ï¼Œå¯ä»¥åˆ©ç”¨è´¹é©¬å°å®šç†å¿«é€Ÿè®¡ç®—é€†å…ƒï¼ˆå³ apâˆ’2modâ€‰â€‰p<em>a**p</em>âˆ’2mod<em>p</em>ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(logâ¡p)<em>O</em>(log<em>p</em>)ã€‚</li><li><strong>è¾“å…¥å¤„ç†</strong>ï¼šæ³¨æ„è¾“å…¥çš„æ•°å€¼èŒƒå›´ï¼Œä½¿ç”¨å­—ç¬¦ä¸²å¤„ç†å¤§æ•°ï¼Œå¹¶ç¡®ä¿å¤„ç†è¿‡ç¨‹ä¸­ä¸ä¼šæº¢å‡ºã€‚</li><li><strong>è¾¹ç•Œæ¡ä»¶</strong>ï¼šé¢˜ç›®ä¿è¯è¾“å…¥çš„ a<em>a</em> å’Œ b<em>b</em> ä¸åŒæ—¶æ˜¯æ¨¡æ•°çš„å€æ•°ï¼Œå› æ­¤å½“ b<em>b</em> çš„æ¨¡ä¸º0æ—¶ï¼Œç›´æ¥åˆ¤å®šæ— è§£ã€‚</li></ol><p>è¯¥é—®é¢˜ç»“åˆäº†æ•°è®ºä¸­çš„æ¨¡è¿ç®—å’Œé€†å…ƒçŸ¥è¯†ï¼ŒåŒæ—¶è€ƒå¯Ÿäº†å¤„ç†å¤§æ•°çš„æŠ€å·§ï¼Œç»¼åˆåº”ç”¨äº†å¤šç§ç®—æ³•å’Œç¼–ç¨‹æŠ€æœ¯ã€‚</p><h2 id="äºŒ-Minimal-Coprime"><a href="#äºŒ-Minimal-Coprime" class="headerlink" title="äºŒ.Minimal Coprime"></a>äºŒ.Minimal Coprime</h2><h3 id="1-å¯¹åº”æ€è·¯-1"><a href="#1-å¯¹åº”æ€è·¯-1" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>å¯¹äºæ¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºåŒºé—´ [l, r] å†…æ‰€æœ‰çš„æœ€å°äº’è´¨åŒºé—´ã€‚ç”±äºæˆ‘ä»¬è¦åˆ¤æ–­åŒºé—´æ˜¯å¦æ˜¯æœ€å°äº’è´¨ï¼Œå®é™…æ“ä½œæ—¶å¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>å¦‚æœ l &#x3D;&#x3D; rï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªå•ä¸€çš„æ•°ï¼Œéœ€è¦æ£€æŸ¥è¯¥æ•°æ˜¯å¦ä¸è‡ªèº«äº’è´¨ï¼Œæ˜¾ç„¶ï¼Œå¯¹äºä»»æ„æ•° aï¼Œ<code>gcd(a, a) â‰  1</code>ï¼Œå› æ­¤è¿™ç±»åŒºé—´æ— æ³•æ„æˆäº’è´¨åŒºé—´ã€‚</li><li>å¦‚æœ l !&#x3D; rï¼Œåˆ™è¦åˆ¤æ–­åŒºé—´ [l, r] å†…æ¯ä¸€ä¸ªå•å…ƒç´ å­åŒºé—´æ˜¯å¦äº’è´¨ï¼ŒåŒæ—¶å¯¹äºæ›´å¤§çš„åŒºé—´æ˜¯å¦æ˜¯æœ€å°äº’è´¨åŒºé—´ã€‚</li></ol><h3 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define int long long</span><br><span class="line">#define endl &#x27;\n&#x27;</span><br><span class="line">const int N = 1e6 + 10,mod = 19260817,INT = 1e17,M = 5e6;</span><br><span class="line"> </span><br><span class="line">typedef pair&lt;int,int&gt; PII;</span><br><span class="line"> </span><br><span class="line">int qmi(int a,int k)&#123;</span><br><span class="line">int res = 1;</span><br><span class="line">while(k)&#123;</span><br><span class="line">if(k&amp;1) res = res * a % mod;</span><br><span class="line">a = a * a % mod; </span><br><span class="line">k &gt;&gt;= 1;</span><br><span class="line">&#125;</span><br><span class="line">return res;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void slove()&#123;</span><br><span class="line">string a,b;</span><br><span class="line">cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">int na = 0,nb = 0;</span><br><span class="line">for(auto c:a)&#123;</span><br><span class="line">na = (na * 10 + c - &#x27;0&#x27;) % mod;</span><br><span class="line">&#125;</span><br><span class="line">for(auto c:b) nb = (nb * 10 + c - &#x27;0&#x27;) % mod;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; na * qmi(nb,mod - 2) % mod &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">signed main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(false);cin.tie(nullptr);</span><br><span class="line">int T = 1;</span><br><span class="line">while(T--) slove();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å­¦ä¹ æ€»ç»“-1"><a href="#3-å­¦ä¹ æ€»ç»“-1" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>æœ€å¤§å…¬çº¦æ•° (gcd)</strong>ï¼šåœ¨è¿™é“é¢˜ä¸­ï¼Œæˆ‘ä»¬é¢‘ç¹ä½¿ç”¨ <code>gcd</code> æ¥åˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦äº’è´¨ã€‚é€šè¿‡è¾—è½¬ç›¸é™¤æ³•ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æ±‚å‡ºä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼Œè¿›è€Œåˆ¤æ–­å®ƒä»¬æ˜¯å¦äº’è´¨ã€‚</p><p><strong>åŒºé—´å†…äº’è´¨åˆ¤æ–­</strong>ï¼šå¯¹äºæ¯ä¸€ä¸ªå­åŒºé—´ï¼Œéœ€è¦æ£€æŸ¥å®ƒä»¬æ˜¯å¦äº’è´¨ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦åŒ…å«æ›´å°çš„äº’è´¨å­åŒºé—´ã€‚è¿™è¦æ±‚æˆ‘ä»¬åœ¨æ±‚è§£æ—¶è¦å°å¿ƒå¤„ç†æ¯ä¸ªåŒºé—´ï¼Œé¿å…é—æ¼ã€‚</p><p><strong>æœ€å°äº’è´¨åŒºé—´çš„åˆ¤å®š</strong>ï¼šæœ€å°äº’è´¨åŒºé—´éœ€è¦æ»¡è¶³ä¸åŒ…å«ä»»ä½•å…¶ä»–äº’è´¨åŒºé—´ï¼Œè¿™ä¸€ç‚¹æ˜¯è§£é¢˜çš„å…³é”®ã€‚é€šè¿‡éå†åŒºé—´çš„æ‰€æœ‰å­åŒºé—´ï¼Œå¹¶ç¡®ä¿å®ƒä»¬ä¸å«æ›´å°çš„äº’è´¨åŒºé—´ï¼Œå¯ä»¥ç¡®ä¿æ‰¾åˆ°æ‰€æœ‰æœ€å°äº’è´¨åŒºé—´ã€‚</p><p><strong>ä¼˜åŒ–</strong>ï¼šè™½ç„¶æœ¬è§£æ³•ç›´æ¥æš´åŠ›æšä¸¾æ‰€æœ‰åŒºé—´ï¼Œä½†è€ƒè™‘åˆ°é¢˜ç›®ä¸­åŒºé—´èŒƒå›´è¾ƒå¤§ï¼Œåº”è¯¥åœ¨å®é™…ä½¿ç”¨ä¸­è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œå¦‚å‰ªæç­‰ç­–ç•¥ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> practice </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Task 3</title>
      <link href="/2025/02/06/Task-3/"/>
      <url>/2025/02/06/Task-3/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯’å‡ç¬¬ä¸‰è®²"><a href="#å¯’å‡ç¬¬ä¸‰è®²" class="headerlink" title="å¯’å‡ç¬¬ä¸‰è®²"></a>å¯’å‡ç¬¬ä¸‰è®²</h1><h2 id="ä¸€-priority-queue"><a href="#ä¸€-priority-queue" class="headerlink" title="ä¸€.priority queue"></a>ä¸€.priority queue</h2><h3 id="1-å¯¹åº”æ€è·¯"><a href="#1-å¯¹åº”æ€è·¯" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>é¢˜ç›®è¦æ±‚å®ç°ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ”¯æŒæ’å…¥æ“ä½œ <code>insert(k)</code> å’Œæå–æœ€å¤§å…ƒç´ æ“ä½œ <code>extractMax</code>ã€‚åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>priority_queue</code> æ¥å®ç°è¿™ä¸€ç»“æ„ã€‚<code>priority_queue</code> é»˜è®¤æ˜¯æœ€å¤§å †ï¼Œæ’å…¥æ“ä½œå°†å…ƒç´ æ·»åŠ åˆ°å †ä¸­ï¼Œè€Œæå–æ“ä½œè¿”å›å¹¶åˆ é™¤å †é¡¶çš„å…ƒç´ ã€‚</p><p>é¦–å…ˆï¼Œè¾“å…¥åŒ…å«å¤šä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œå¯èƒ½æ˜¯ <code>insert k</code>ï¼ˆæ’å…¥æ•´æ•° kï¼‰ã€<code>extract</code>ï¼ˆæå–æœ€å¤§å…ƒç´ ï¼‰æˆ– <code>end</code>ï¼ˆç»“æŸè¾“å…¥ï¼‰ã€‚å¯¹äºæ¯ä¸ª <code>insert k</code> æ“ä½œï¼Œæˆ‘ä»¬å°†å…ƒç´ æ’å…¥åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­ã€‚å¯¹äºæ¯ä¸ª <code>extract</code> æ“ä½œï¼Œæˆ‘ä»¬ä»å †ä¸­æå–å¹¶è¾“å‡ºå½“å‰æœ€å¤§å€¼ã€‚</p><p>C++ çš„ <code>priority_queue</code> æ•°æ®ç»“æ„é»˜è®¤æŒ‰é™åºæ’åˆ—ï¼ˆå³æœ€å¤§å †ï¼‰ï¼Œå› æ­¤æ— éœ€é¢å¤–å¤„ç†å³å¯æ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚ç¨‹åºé€šè¿‡å¾ªç¯è¯»å–æ“ä½œï¼Œé’ˆå¯¹ <code>insert</code> è¿›è¡Œå †æ’å…¥ï¼Œé’ˆå¯¹ <code>extract</code> è¿›è¡Œå †é¡¶å…ƒç´ æå–å¹¶è¾“å‡ºï¼Œç›´åˆ°é‡åˆ° <code>end</code> æ“ä½œåœæ­¢ã€‚</p><h3 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;sstream&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct Compare &#123;</span><br><span class="line">    bool operator()(int a, int b) &#123;</span><br><span class="line">        return a &lt; b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    priority_queue&lt;int, vector&lt;int&gt;, Compare&gt; pq; </span><br><span class="line">    string line;</span><br><span class="line"></span><br><span class="line">    while (getline(cin, line)) &#123;</span><br><span class="line">        if (line.empty()) continue;</span><br><span class="line"></span><br><span class="line">        stringstream ss(line);</span><br><span class="line">        string command;</span><br><span class="line">        ss &gt;&gt; command;</span><br><span class="line"></span><br><span class="line">        if (command == &quot;insert&quot;) &#123;</span><br><span class="line">            int k;</span><br><span class="line">            ss &gt;&gt; k;</span><br><span class="line">            pq.push(k);</span><br><span class="line">        &#125; else if (command == &quot;extract&quot;) &#123;</span><br><span class="line">            if (!pq.empty()) &#123;</span><br><span class="line">                cout &lt;&lt; pq.top() &lt;&lt; endl; </span><br><span class="line">                pq.pop(); </span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (command == &quot;end&quot;) &#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“"><a href="#3-å­¦ä¹ æ€»ç»“" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>é€šè¿‡å®ç°è¿™ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œäº†è§£äº† C++ ä¸­ <code>priority_queue</code> çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚<code>priority_queue</code> ä½¿ç”¨æœ€å¤§å †ç»“æ„ï¼Œè‡ªåŠ¨ä¿è¯æ¯æ¬¡æå–çš„éƒ½æ˜¯å½“å‰æœ€å¤§å…ƒç´ ï¼Œå› æ­¤æ’å…¥å’Œæå–æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º <code>O(log n)</code>ï¼Œéå¸¸é«˜æ•ˆã€‚æ­¤å¤–ï¼Œä½¿ç”¨ <code>priority_queue</code> è¿˜å¯ä»¥é¿å…æ‰‹åŠ¨ç»´æŠ¤å †ç»“æ„ï¼Œä»è€Œå‡å°‘äº†ç¨‹åºå¤æ‚åº¦ã€‚é€šè¿‡è¾“å…¥å’Œè¾“å‡ºæµçš„å¤„ç†ï¼Œæˆ‘ä¹Ÿæ›´æ·±å…¥åœ°ç†è§£äº†å¦‚ä½•é«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®è¾“å…¥ã€‚ç‰¹åˆ«æ˜¯å¯¹äºé¢˜ç›®ä¸­é™åˆ¶çš„ 200 ä¸‡æ¬¡æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ç¨‹åºçš„è¾“å…¥è¾“å‡ºæ•ˆç‡ï¼Œå› æ­¤åº”è¯¥å°½é‡å‡å°‘ä¸å¿…è¦çš„æ“ä½œï¼Œä½¿ç”¨åˆé€‚çš„è¾“å…¥è¾“å‡ºæ–¹æ³•æé«˜ç¨‹åºæ€§èƒ½ã€‚</p><h2 id="STè¡¨-RMQé—®é¢˜"><a href="#STè¡¨-RMQé—®é¢˜" class="headerlink" title="STè¡¨&amp;&amp;RMQé—®é¢˜"></a>STè¡¨&amp;&amp;RMQé—®é¢˜</h2><h3 id="1-å¯¹åº”æ€è·¯-1"><a href="#1-å¯¹åº”æ€è·¯-1" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>è¯¥ç¨‹åºåˆ©ç”¨ ST è¡¨è¿›è¡Œé™æ€åŒºé—´æœ€å¤§å€¼æŸ¥è¯¢ã€‚é¦–å…ˆï¼Œä½¿ç”¨ <code>preprocess</code> å‡½æ•°æ„å»º ST è¡¨ï¼Œé¢„å¤„ç†æ—¶é—´å¤æ‚åº¦ä¸º O(N log N)ã€‚<br>å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œæˆ‘ä»¬åˆ©ç”¨å¯¹æ•°è¡¨ <code>log_table</code> é¢„è®¡ç®—æŸ¥è¯¢èŒƒå›´çš„æœ€ä¼˜åˆ†å—ï¼Œä½¿å¾—æŸ¥è¯¢å¤æ‚åº¦é™ä¸º O(1)ã€‚<br>é€šè¿‡ <code>read()</code> è¿›è¡Œé«˜æ•ˆè¾“å…¥ï¼Œå‡å°‘ IO æ—¶é—´ï¼Œé€‚ç”¨äºå¤§æ•°æ®é‡åœºæ™¯ã€‚</p><h3 id="2-ä»£ç -1"><a href="#2-ä»£ç -1" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int MAX_N = 100000;</span><br><span class="line">const int LOG = 17;</span><br><span class="line">int st[MAX_N][LOG];</span><br><span class="line">int log_table[MAX_N + 1];</span><br><span class="line"></span><br><span class="line">inline int read() &#123;</span><br><span class="line">    int x = 0, f = 1;</span><br><span class="line">    char ch = getchar();</span><br><span class="line">    while (ch &lt; &#x27;0&#x27; || ch &gt; &#x27;9&#x27;) &#123;</span><br><span class="line">        if (ch == &#x27;-&#x27;) f = -1;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    while (ch &gt;= &#x27;0&#x27; &amp;&amp; ch &lt;= &#x27;9&#x27;) &#123;</span><br><span class="line">        x = x * 10 + ch - &#x27;0&#x27;;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    return x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void preprocess(const vector&lt;int&gt;&amp; arr, int n) &#123;</span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        st[i][0] = arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    for (int j = 1; (1 &lt;&lt; j) &lt;= n; j++) &#123;</span><br><span class="line">        for (int i = 0; i + (1 &lt;&lt; j) - 1 &lt; n; i++) &#123;</span><br><span class="line">            st[i][j] = max(st[i][j - 1], st[i + (1 &lt;&lt; (j - 1))][j - 1]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    log_table[1] = 0;</span><br><span class="line">    for (int i = 2; i &lt;= n; i++) &#123;</span><br><span class="line">        log_table[i] = log_table[i / 2] + 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int query(int l, int r) &#123;</span><br><span class="line">    int j = log_table[r - l + 1];</span><br><span class="line">    return max(st[l][j], st[r - (1 &lt;&lt; j) + 1][j]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n = read(), m = read();</span><br><span class="line">    vector&lt;int&gt; arr(n);</span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        arr[i] = read();</span><br><span class="line">    &#125;</span><br><span class="line">    preprocess(arr, n);</span><br><span class="line">    while (m--) &#123;</span><br><span class="line">        int l = read() - 1, r = read() - 1;</span><br><span class="line">        printf(&quot;%d\n&quot;, query(l, r));</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-1"><a href="#3-å­¦ä¹ æ€»ç»“-1" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><ol><li>ST è¡¨é€‚ç”¨äºé™æ€æŸ¥è¯¢ï¼Œé¢„å¤„ç†ä»£ä»·è¾ƒé«˜ï¼Œä½†æŸ¥è¯¢æå¿«ã€‚</li><li>åˆ©ç”¨ <code>log_table</code> é¢„è®¡ç®—å¯¹æ•°å€¼å¯ä»¥å‡å°‘ <code>log</code> å‡½æ•°è°ƒç”¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>å¿«é€Ÿè¾“å…¥ <code>read()</code> å¯æœ‰æ•ˆå‡å°‘æ—¶é—´å¼€é”€ï¼Œé€‚ç”¨äºé«˜å¼ºåº¦æ•°æ®ã€‚</li><li>ST è¡¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨åŒºé—´çš„é‡å æ€§ï¼Œé€šè¿‡ <code>dp</code> æ–¹å¼é«˜æ•ˆå­˜å‚¨åŒºé—´ä¿¡æ¯</li></ol><h2 id="åˆå¹¶æœå­"><a href="#åˆå¹¶æœå­" class="headerlink" title="åˆå¹¶æœå­"></a>åˆå¹¶æœå­</h2><h3 id="1-å¯¹åº”æ€è·¯-2"><a href="#1-å¯¹åº”æ€è·¯-2" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>æœ¬é¢˜å¯ä»¥é€šè¿‡å“ˆå¤«æ›¼æ ‘ï¼ˆHuffman Treeï¼‰çš„æ€æƒ³æ¥è§£å†³ï¼Œä½¿ç”¨æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰è¿›è¡Œè´ªå¿ƒåˆå¹¶ã€‚<br>æ¯æ¬¡å–å‡ºå½“å‰æœ€å°çš„ä¸¤å †æœå­è¿›è¡Œåˆå¹¶ï¼Œåˆå¹¶çš„ä»£ä»·æ˜¯ä¸¤è€…ä¹‹å’Œï¼Œå¹¶å°†æ–°å †é‡æ–°åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ã€‚<br>è¿™ä¸ªè¿‡ç¨‹æŒç»­ n-1 æ¬¡ï¼Œæœ€ç»ˆä¼˜å…ˆé˜Ÿåˆ—ä¸­åªå‰©ä¸‹ä¸€å †ï¼Œç´¯åŠ æ‰€æœ‰åˆå¹¶çš„ä»£ä»·ï¼Œå³ä¸ºæœ€å°çš„ä½“åŠ›è€—è´¹ã€‚<br>ç”±äºä½¿ç”¨äº†æœ€å°å †ï¼Œæ¯æ¬¡æ’å…¥ä¸åˆ é™¤çš„å¤æ‚åº¦æ˜¯ O(log n)ï¼Œæ•´ä½“å¤æ‚åº¦ä¸º O(n log n)ã€‚</p><h3 id="2-ä»£ç -2"><a href="#2-ä»£ç -2" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">inline int read() &#123;</span><br><span class="line">    int x = 0, f = 1;</span><br><span class="line">    char ch = getchar();</span><br><span class="line">    while (ch &lt; &#x27;0&#x27; || ch &gt; &#x27;9&#x27;) &#123;</span><br><span class="line">        if (ch == &#x27;-&#x27;) f = -1;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    while (ch &gt;= &#x27;0&#x27; &amp;&amp; ch &lt;= &#x27;9&#x27;) &#123;</span><br><span class="line">        x = x * 10 + ch - &#x27;0&#x27;;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    return x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n = read();</span><br><span class="line">    priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; pq;</span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        pq.push(read());</span><br><span class="line">    &#125;</span><br><span class="line">    int total_cost = 0;</span><br><span class="line">    while (pq.size() &gt; 1) &#123;</span><br><span class="line">        int a = pq.top(); pq.pop();</span><br><span class="line">        int b = pq.top(); pq.pop();</span><br><span class="line">        int cost = a + b;</span><br><span class="line">        total_cost += cost;</span><br><span class="line">        pq.push(cost);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%d\n&quot;, total_cost);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-2"><a href="#3-å­¦ä¹ æ€»ç»“-2" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><ol><li>æœ¬é¢˜æ˜¯å…¸å‹çš„è´ªå¿ƒç®—æ³•åº”ç”¨ï¼Œé€šè¿‡å±€éƒ¨æœ€ä¼˜ï¼ˆæ¯æ¬¡åˆå¹¶æœ€å°çš„ä¸¤å †ï¼‰è¾¾åˆ°å…¨å±€æœ€ä¼˜ã€‚</li><li>æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºå¤„ç†åŠ¨æ€é›†åˆä¸­çš„æœ€å°å€¼é—®é¢˜ã€‚</li><li>å“ˆå¤«æ›¼æ ‘çš„æ„é€ ä¸æœ¬é¢˜ç±»ä¼¼ï¼Œå®ƒç”¨äºæœ€ä¼˜å‰ç¼€ç¼–ç é—®é¢˜ï¼Œå…·æœ‰å¹¿æ³›åº”ç”¨ã€‚</li><li>ç”±äº n æœ€å¤§ä¸º 10000ï¼Œä½¿ç”¨ O(n log n) å¤æ‚åº¦çš„æ–¹æ³•æ˜¯åˆç†å¯è¡Œçš„ï¼Œè‹¥ç”¨ O(n^2) çš„æ–¹æ³•ä¼šè¶…æ—¶ã€‚</li><li>é€šè¿‡ <code>priority_queue</code> çš„ <code>greater&lt;int&gt;</code> å®ç°æœ€å°å †ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œæ•ˆç‡ã€‚</li></ol><h2 id="å››-çº¦ç‘Ÿå¤«é—®é¢˜"><a href="#å››-çº¦ç‘Ÿå¤«é—®é¢˜" class="headerlink" title="å››.çº¦ç‘Ÿå¤«é—®é¢˜"></a>å››.çº¦ç‘Ÿå¤«é—®é¢˜</h2><h3 id="1-å¯¹åº”æ€è·¯-3"><a href="#1-å¯¹åº”æ€è·¯-3" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>è¯¥é¢˜æ˜¯ç»å…¸çš„çº¦ç‘Ÿå¤«ç¯é—®é¢˜ã€‚æˆ‘ä»¬é€šè¿‡æ¨¡æ‹ŸæŠ¥æ•°è¿‡ç¨‹æ¥è§£å†³ï¼Œä½¿ç”¨åŒç«¯é˜Ÿåˆ—ï¼ˆ<code>deque</code>ï¼‰æ¥æ¨¡æ‹Ÿæ¯æ¬¡å‡ºåœˆçš„æ“ä½œã€‚é¦–å…ˆå°†æ‰€æœ‰äººçš„ç¼–å·ä¾æ¬¡åŠ å…¥é˜Ÿåˆ—ï¼Œæ¯æ¬¡å°†å‰ mmm ä¸ªäººæŠ¥æ•°ï¼Œç¬¬ mmm ä¸ªäººå‡ºåˆ—ï¼Œå†ä»ä¸‹ä¸€ä¸ªäººå¼€å§‹ç»§ç»­æŠ¥æ•°ã€‚è¯¥è¿‡ç¨‹é‡å¤ç›´åˆ°æ‰€æœ‰äººéƒ½å‡ºåˆ—ã€‚é€šè¿‡é˜Ÿåˆ—çš„ <code>push_back</code> å’Œ <code>pop_front</code> æ“ä½œæ¥æ¨¡æ‹Ÿå¾ªç¯æŠ¥æ•°ï¼Œä¿è¯æ¯ä¸ªå‡ºåœˆäººçš„ç¼–å·æŒ‰é¡ºåºè¾“å‡ºã€‚</p><h3 id="2-ä»£ç -3"><a href="#2-ä»£ç -3" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;deque&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    deque&lt;int&gt; people;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    for (int i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">        people.push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    while (!people.empty()) &#123;</span><br><span class="line">        </span><br><span class="line">        for (int i = 1; i &lt; m; i++) &#123;</span><br><span class="line">            people.push_back(people.front());</span><br><span class="line">            people.pop_front();</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        cout &lt;&lt; people.front() &lt;&lt; &quot; &quot;;</span><br><span class="line">        people.pop_front();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="å­¦ä¹ æ€»ç»“"><a href="#å­¦ä¹ æ€»ç»“" class="headerlink" title="å­¦ä¹ æ€»ç»“"></a>å­¦ä¹ æ€»ç»“</h3><p><strong>çº¦ç‘Ÿå¤«ç¯é—®é¢˜</strong>ï¼šæ˜¯ç»å…¸çš„åŠ¨æ€ç»“æ„é—®é¢˜ï¼Œä½¿ç”¨é˜Ÿåˆ—æ¨¡æ‹Ÿèƒ½å¤Ÿæœ‰æ•ˆè§£å†³ã€‚</p><p><strong>é˜Ÿåˆ—æ“ä½œ</strong>ï¼šé˜Ÿåˆ—çš„ <code>push_back</code> å’Œ <code>pop_front</code> æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œé€‚åˆè¿›è¡Œå¾ªç¯æ¨¡æ‹Ÿã€‚</p><p><strong>å¾ªç¯è¿‡ç¨‹ç†è§£</strong>ï¼šé€šè¿‡ç†è§£æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­ç§»é™¤ç¬¬ mmm ä¸ªäººï¼Œå¹¶å°†ä¸‹ä¸€ä¸ªäººé‡æ–°ä»å¤´å¼€å§‹æŠ¥æ•°ï¼Œå¯ä»¥è½»æ¾è§£å†³é—®é¢˜ã€‚</p><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šå¯¹äº n å’Œ m è¾ƒå°çš„æƒ…å†µï¼ŒO(n * m) çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¯è¡Œçš„ã€‚</p><p><strong>åº”ç”¨èŒƒå›´</strong>ï¼šè¿™ç§æ–¹æ³•é€‚ç”¨äºç±»ä¼¼çš„å¾ªç¯æ’åˆ—é—®é¢˜ï¼Œç†è§£å…¶å®ç°æ–¹å¼å¯¹äºè§£å†³å…¶ä»–ç±»ä¼¼é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚</p><h2 id="äº”-Look-Up-S"><a href="#äº”-Look-Up-S" class="headerlink" title="äº”.Look Up S"></a>äº”.Look Up S</h2><h3 id="1-å¯¹åº”æ€è·¯-4"><a href="#1-å¯¹åº”æ€è·¯-4" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>æœ¬é¢˜çš„æ ¸å¿ƒåœ¨äºæŸ¥æ‰¾æ¯ä¸ªå¥¶ç‰›çš„å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å¥¹é«˜çš„å¥¶ç‰›ã€‚é€šè¿‡ä½¿ç”¨æ ˆï¼ˆstackï¼‰æ•°æ®ç»“æ„ï¼Œå¯ä»¥é«˜æ•ˆåœ°ç»´æŠ¤ä¸€ä¸ªé€’å‡çš„åºåˆ—ã€‚æ¯æ¬¡é‡åˆ°ä¸€ä¸ªå¥¶ç‰›æ—¶ï¼Œå°†å…¶ä¸æ ˆé¡¶çš„å¥¶ç‰›è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ ˆé¡¶å¥¶ç‰›çš„èº«é«˜ä¸å¤§äºå½“å‰å¥¶ç‰›ï¼Œå°±å°†å…¶å¼¹å‡ºï¼Œç›´åˆ°æ ˆé¡¶å¥¶ç‰›çš„èº«é«˜å¤§äºå½“å‰å¥¶ç‰›æˆ–æ ˆä¸ºç©ºã€‚æ­¤æ—¶æ ˆé¡¶å…ƒç´ å³ä¸ºå½“å‰å¥¶ç‰›çš„ä»°æœ›å¯¹è±¡ã€‚</p><h3 id="2-ä»£ç -4"><a href="#2-ä»£ç -4" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int MAXN = 1e5 + 5;</span><br><span class="line">int h[MAXN];</span><br><span class="line">int ans[MAXN];</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    for (int i = 1; i &lt;= n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; h[i];</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;int&gt; stk;</span><br><span class="line">    for (int i = n; i &gt;= 1; --i) &#123;</span><br><span class="line">        while (!stk.empty() &amp;&amp; h[stk.back()] &lt;= h[i]) &#123;</span><br><span class="line">            stk.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        ans[i] = stk.empty() ? 0 : stk.back();</span><br><span class="line">        stk.push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 1; i &lt;= n; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; ans[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-3"><a href="#3-å­¦ä¹ æ€»ç»“-3" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>æ ˆçš„åº”ç”¨</strong>ï¼šæœ¬é¢˜è¿ç”¨äº†æ ˆæ¥è§£å†³æŸ¥æ‰¾â€œå³ä¾§ç¬¬ä¸€ä¸ªæ›´å¤§å…ƒç´ â€çš„é—®é¢˜ã€‚æ ˆéå¸¸é€‚åˆè§£å†³é€’å¢&#x2F;é€’å‡é—®é¢˜ï¼Œèƒ½å¤Ÿé¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—ã€‚</p><p><strong>æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–</strong>ï¼šé€šè¿‡æ ˆçš„æ–¹å¼ï¼Œæ¯ä¸ªå¥¶ç‰›çš„èº«é«˜æœ€å¤šå…¥æ ˆå’Œå‡ºæ ˆä¸€æ¬¡ï¼Œæ•´ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œæ»¡è¶³å¤§è§„æ¨¡æ•°æ®çš„éœ€æ±‚ã€‚</p><p><strong>è´ªå¿ƒç­–ç•¥</strong>ï¼šæ ˆçš„ä½¿ç”¨ä½“ç°äº†è´ªå¿ƒç­–ç•¥ï¼Œé€šè¿‡é€æ­¥æ‰¾å‡ºæœ€ä¼˜è§£ã€‚æ¯æ¬¡éƒ½ä¿è¯æ ˆä¸­çš„å¥¶ç‰›æŒ‰é€’å‡é¡ºåºæ’åˆ—ï¼Œèƒ½å¿«é€Ÿæ‰¾åˆ°æ¯ä¸ªå¥¶ç‰›çš„ç¬¬ä¸€ä¸ªä»°æœ›å¯¹è±¡ã€‚</p><p><strong>è§£å†³ç±»ä¼¼é—®é¢˜</strong>ï¼šæŒæ¡æ ˆçš„åº”ç”¨å¯ä»¥è§£å†³è®¸å¤šç±»ä¼¼çš„â€œå¯»æ‰¾ä¸‹ä¸€ä¸ªæ›´å¤§&#x2F;å°å…ƒç´ â€ç±»å‹çš„é—®é¢˜ã€‚</p><h2 id="äº”-å›½æ——è®¡åˆ’"><a href="#äº”-å›½æ——è®¡åˆ’" class="headerlink" title="äº”.å›½æ——è®¡åˆ’"></a>äº”.å›½æ——è®¡åˆ’</h2><h3 id="1-å¯¹åº”æ€è·¯-5"><a href="#1-å¯¹åº”æ€è·¯-5" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><ol><li><p><strong>åŒºé—´è½¬åŒ–</strong>ï¼š</p><ul><li>æ¯ä¸ªè¾¹é˜²æˆ˜å£«å¸¸é©»ä¸¤ä¸ªè¾¹é˜²ç«™ <code>C_i</code> å’Œ <code>D_i</code>ï¼Œå…¶å¥”è¢­åŒºé—´ä¸ºä» <code>C_i</code> åˆ° <code>D_i</code>ã€‚å¦‚æœ <code>C_i &gt; D_i</code>ï¼Œè¯´æ˜è¯¥åŒºé—´è·¨è¶Šäº†è¾¹å¢ƒï¼Œéœ€è¦åŠ ä¸Šè¾¹å¢ƒçš„æ€»é•¿åº¦ <code>M</code>ï¼Œè¿™æ ·å°±èƒ½ç¡®ä¿æ‰€æœ‰åŒºé—´éƒ½æ˜¯çº¿æ€§åŒºé—´ï¼Œæ–¹ä¾¿åç»­å¤„ç†ã€‚</li></ul><p><strong>æ’åº</strong>ï¼š</p><ul><li>ç”±äºåŒºé—´è¦†ç›–é—®é¢˜é€šå¸¸éœ€è¦æŒ‰é¡ºåºå¤„ç†ï¼Œæ‰€æœ‰è¾¹é˜²æˆ˜å£«çš„å¥”è¢­åŒºé—´æŒ‰ç…§å·¦ç«¯ç‚¹ <code>l</code> æ’åºã€‚æ’åºåçš„æ•°ç»„ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°é€ä¸€å¤„ç†æ¯ä¸ªè¾¹é˜²æˆ˜å£«ï¼Œå¹¶è®¡ç®—å‡ºæœ€å°‘éœ€è¦å¤šå°‘æˆ˜å£«æ¥è¦†ç›–è¾¹å¢ƒã€‚</li></ul><p><strong>åŠ¨æ€è§„åˆ’å’Œè·³è·ƒæ³•</strong>ï¼š</p><ul><li>é‡‡ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³æ¯ä¸ªè¾¹é˜²æˆ˜å£«è¦†ç›–çš„æœ€è¿œåŒºé—´é—®é¢˜ã€‚é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°æ¯ä¸ªæˆ˜å£«èƒ½è¦†ç›–çš„æœ€è¿œä½ç½®ï¼Œè®°å½•åœ¨äºŒç»´æ•°ç»„ <code>go</code> ä¸­ã€‚<code>go[i][0]</code> å­˜å‚¨æˆ˜å£« <code>i</code> è¦†ç›–åŒºé—´çš„æœ€è¿œæˆ˜å£« <code>k</code> çš„ä¸‹æ ‡ã€‚ä¸ºäº†æ›´é«˜æ•ˆåœ°æŸ¥è¯¢æœ€å¤§è¦†ç›–ï¼Œä»£ç é€šè¿‡å¤šçº§è·³è·ƒçš„æ–¹å¼ï¼Œæ„å»ºäº† <code>go</code> æ•°ç»„ï¼Œå¹¶é€šè¿‡åŠ¨æ€è§„åˆ’å®ç°å¿«é€ŸæŸ¥è¯¢ã€‚</li></ul><p><strong>æŸ¥è¯¢æœ€å°æˆ˜å£«æ•°é‡</strong>ï¼š</p><ul><li>åœ¨æŸ¥è¯¢æ¯ä¸ªæˆ˜å£«å¿…é¡»å‚ä¸çš„å‰æä¸‹ï¼Œæˆ‘ä»¬ä»è¯¥æˆ˜å£«çš„èµ·å§‹ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡æ‰¾åˆ°èƒ½å¤Ÿè¦†ç›–åŒºé—´çš„æœ€è¿œæˆ˜å£«ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼è¿­ä»£è·³è·ƒï¼Œæœ€åè®¡ç®—å‡ºæœ€å°‘éœ€è¦çš„æˆ˜å£«æ•°é‡ã€‚</li></ul><p><strong>è¾“å‡ºç»“æœ</strong>ï¼š</p><ul><li>å¯¹äºæ¯ä¸ªæˆ˜å£«ï¼Œè¾“å‡ºå¿…é¡»å‚ä¸çš„å‰æä¸‹ï¼Œæœ€å°‘éœ€è¦å¤šå°‘ä¸ªæˆ˜å£«æ¥è¦†ç›–æ•´ä¸ªè¾¹å¢ƒçº¿ã€‚</li></ul></li></ol><h3 id="2-ä»£ç -5"><a href="#2-ä»£ç -5" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n, m, res[200005];</span><br><span class="line">struct soldier &#123;</span><br><span class="line">int id, l, r;</span><br><span class="line">&#125; s[400005];</span><br><span class="line">int cmp(soldier a, soldier b)</span><br><span class="line">&#123;</span><br><span class="line">return a.l &lt; b.l; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int go[400005][20];</span><br><span class="line"></span><br><span class="line">void pre()</span><br><span class="line">&#123;</span><br><span class="line">for(int i = 1, p = i; i &lt;= 2 * n; i++) &#123;</span><br><span class="line">while(p &lt;= 2 * n &amp;&amp; s[p].l &lt;= s[i].r)</span><br><span class="line">p++;</span><br><span class="line">int pos = p - 1;</span><br><span class="line">go[i][0] = pos;</span><br><span class="line">&#125;</span><br><span class="line">for(int i = 1; i &lt; 20; i++) &#123;</span><br><span class="line">for(int j = 1; j &lt;= 2 * n; j++) &#123;</span><br><span class="line">go[j][i] = go[go[j][i - 1]][i - 1];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">void search(int k)</span><br><span class="line">&#123;</span><br><span class="line">int lmt = s[k].l + m, ans = 1, p = k;</span><br><span class="line">for(int i = 19; i &gt;= 0; i--) &#123;</span><br><span class="line">if(go[k][i] != 0 &amp;&amp; s[go[k][i]].r &lt; lmt) &#123;</span><br><span class="line">ans += (1 &lt;&lt; i);</span><br><span class="line">k = go[k][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">res[s[p].id] = ans + 1;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">for(int i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">cin &gt;&gt; s[i].l &gt;&gt; s[i].r;</span><br><span class="line">if(s[i].r &lt; s[i].l)</span><br><span class="line">s[i].r += m;</span><br><span class="line">s[i].id = i;</span><br><span class="line">&#125;</span><br><span class="line">sort(s + 1, s + 1 + n, cmp);</span><br><span class="line">for(int i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">s[i + n] = s[i];</span><br><span class="line">s[i + n].l = s[i].l + m;</span><br><span class="line">s[i + n].r = s[i].r + m;</span><br><span class="line">&#125;</span><br><span class="line">pre();</span><br><span class="line">for(int i = 1; i &lt;= n; i++)</span><br><span class="line">search(i);</span><br><span class="line">for(int i = 1; i &lt;= n; i++)</span><br><span class="line">cout &lt;&lt; res[i] &lt;&lt; &quot; &quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="å­¦ä¹ æ€»ç»“-1"><a href="#å­¦ä¹ æ€»ç»“-1" class="headerlink" title="å­¦ä¹ æ€»ç»“"></a>å­¦ä¹ æ€»ç»“</h3><p>è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç»å…¸çš„åŒºé—´è¦†ç›–é—®é¢˜ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡æ’åºå’ŒåŠ¨æ€è§„åˆ’æ¥é«˜æ•ˆåœ°è§£å†³è¦†ç›–åŒºé—´çš„æœ€å°è¾¹é˜²æˆ˜å£«æ•°é‡ã€‚å…·ä½“åšæ³•æ˜¯å°†æ‰€æœ‰çš„åŒºé—´è½¬åŒ–æˆçº¿æ€§åŒºé—´ï¼Œä½¿ç”¨æ’åºä¿è¯è¦†ç›–çš„é¡ºåºæ€§ï¼Œå†é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å’ŒåŠ¨æ€è§„åˆ’çš„ç»“åˆï¼Œä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡ã€‚è¿™ä¸ªæ€è·¯å¯¹äºè§£å†³ç±»ä¼¼çš„åŒºé—´è¦†ç›–é—®é¢˜éå¸¸æœ‰æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨å¤§è§„æ¨¡æ•°æ®è¾“å…¥æ—¶ï¼Œèƒ½å¤Ÿæ˜¾è‘—å‡å°‘è®¡ç®—å¤æ‚åº¦ã€‚é€šè¿‡åˆç†ä½¿ç”¨è·³è·ƒè¡¨å’ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œä»£ç å®ç°äº†è¾ƒé«˜çš„æ•ˆç‡ï¼Œæ˜¯å­¦ä¹ ç®—æ³•è®¾è®¡å’Œä¼˜åŒ–çš„é‡è¦æ¡ˆä¾‹ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Task 2</title>
      <link href="/2025/02/06/Task-2/"/>
      <url>/2025/02/06/Task-2/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯’å‡ç¬¬äºŒè®²-â€œäºŒåˆ†â€"><a href="#å¯’å‡ç¬¬äºŒè®²-â€œäºŒåˆ†â€" class="headerlink" title="å¯’å‡ç¬¬äºŒè®²:â€œäºŒåˆ†â€"></a>å¯’å‡ç¬¬äºŒè®²:â€œäºŒåˆ†â€</h1><h2 id="ä¸€-äºŒåˆ†æŸ¥æ‰¾"><a href="#ä¸€-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="ä¸€.äºŒåˆ†æŸ¥æ‰¾"></a>ä¸€.äºŒåˆ†æŸ¥æ‰¾</h2><h3 id="1-å¯¹åº”æ€è·¯"><a href="#1-å¯¹åº”æ€è·¯" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>è¿™ä¸ªé—®é¢˜çš„è¦æ±‚æ˜¯é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ï¼Œåœ¨ä¸€ä¸ªå·²ç»æŒ‰å‡åºæ’åˆ—çš„æ•´æ•°åºåˆ—ä¸­æŸ¥æ‰¾æ˜¯å¦åŒ…å«æŸ¥è¯¢çš„æ•´æ•°ã€‚å¯¹äºæ¯æ¬¡æŸ¥è¯¢ï¼Œè‹¥è¯¥æ•´æ•°åœ¨åºåˆ—ä¸­å‡ºç°ï¼Œåˆ™è¾“å‡º â€œYesâ€ï¼Œå¦åˆ™è¾“å‡º â€œNoâ€ã€‚</p><ol><li><strong>è¾“å…¥å¤„ç†</strong>ï¼š<ul><li>è¾“å…¥ä¸€ä¸ªæ•´æ•° nnnï¼Œè¡¨ç¤ºæ•°ç»„çš„å¤§å°ã€‚</li><li>æ¥ä¸‹æ¥è¾“å…¥ nnn ä¸ªæ•´æ•°ï¼Œè¿™äº›æ•´æ•°å·²æ’åºã€‚</li><li>æ¥ç€è¾“å…¥ä¸€ä¸ªæ•´æ•° qqqï¼Œè¡¨ç¤ºæŸ¥è¯¢æ¬¡æ•°ã€‚</li><li>å¯¹äºæ¯æ¬¡æŸ¥è¯¢ï¼Œè¾“å…¥ä¸€ä¸ªæ•´æ•° mmmï¼Œéœ€è¦åˆ¤æ–­ mmm æ˜¯å¦å‡ºç°åœ¨æ’åºæ•°ç»„ä¸­ã€‚</li></ul></li><li><strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼š<ul><li>äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§é«˜æ•ˆçš„æŸ¥æ‰¾æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªå·²æ’åºçš„æ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O(logâ¡n)O(\log n)O(logn)ã€‚</li><li>ä½¿ç”¨æ ‡å‡†åº“çš„ <code>lower_bound</code> å‡½æ•°æ¥å®ç°äºŒåˆ†æŸ¥æ‰¾ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äºæŸ¥è¯¢å€¼çš„è¿­ä»£å™¨ã€‚å¦‚æœè¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ ä¸æŸ¥è¯¢å€¼ç›¸åŒï¼Œåˆ™è¡¨ç¤ºè¯¥å…ƒç´ å­˜åœ¨ã€‚</li></ul></li><li><strong>è¾“å‡º</strong>ï¼š<ul><li>å¦‚æœæŸ¥è¯¢å€¼åœ¨æ•°ç»„ä¸­å­˜åœ¨ï¼Œåˆ™è¾“å‡º â€œYesâ€ï¼›å¦åˆ™è¾“å‡º â€œNoâ€ã€‚</li></ul></li></ol><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;  // For lower_bound</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    </span><br><span class="line">    vector&lt;int&gt; arr(n);</span><br><span class="line">    for (int i = 0; i &lt; n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    int q;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    </span><br><span class="line">    for (int i = 0; i &lt; q; ++i) &#123;</span><br><span class="line">        int m;</span><br><span class="line">        cin &gt;&gt; m;</span><br><span class="line">      </span><br><span class="line">        auto it = lower_bound(arr.begin(), arr.end(), m);</span><br><span class="line">  </span><br><span class="line">        if (it != arr.end() &amp;&amp; *it == m) &#123;</span><br><span class="line">            cout &lt;&lt; &quot;Yes&quot; &lt;&lt; endl;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            cout &lt;&lt; &quot;No&quot; &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“"><a href="#3-å­¦ä¹ æ€»ç»“" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>è¯¥é—®é¢˜è¦æ±‚åœ¨å·²æ’åºçš„æ•°ç»„ä¸­è¿›è¡Œå¤šä¸ªæŸ¥æ‰¾æ“ä½œï¼Œæœ€ç›´è§‚çš„åšæ³•æ˜¯ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚äºŒåˆ†æŸ¥æ‰¾èƒ½å¤Ÿå°†æŸ¥æ‰¾æ—¶é—´ä» O(n)O(n)O(n) é™ä½åˆ° O(logâ¡n)O(\log n)O(logn)ï¼Œå› æ­¤å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œèƒ½å¤Ÿæ˜¾è‘—æé«˜æ•ˆç‡ã€‚åˆ©ç”¨ C++ STL æä¾›çš„ <code>lower_bound</code> å‡½æ•°ï¼Œå¯ä»¥é«˜æ•ˆåœ°å®ç°äºŒåˆ†æŸ¥æ‰¾ï¼Œé¿å…æ‰‹åŠ¨å®ç°æŸ¥æ‰¾ç®—æ³•ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º O(logâ¡n)O(\log n)O(logn)ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(qlogâ¡n)O(q \log n)O(qlogn)ï¼Œé€‚åˆå¤„ç†è¾ƒå¤§è§„æ¨¡çš„è¾“å…¥æ•°æ®ã€‚</p><p>è¿™ä¸ªè§£æ³•å¯¹äºæœ€å¤§å€¼ n&#x3D;100000n &#x3D; 100000n&#x3D;100000 å’Œ q&#x3D;100000q &#x3D; 100000q&#x3D;100000 çš„æƒ…å†µä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œæ»¡è¶³æ—¶é—´é™åˆ¶ã€‚</p><h2 id="äºŒ-A-Bæ•°å¯¹"><a href="#äºŒ-A-Bæ•°å¯¹" class="headerlink" title="äºŒ.A-Bæ•°å¯¹"></a>äºŒ.A-Bæ•°å¯¹</h2><h3 id="1-å¯¹åº”æ€è·¯-1"><a href="#1-å¯¹åº”æ€è·¯-1" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>ç»™å®šæ•°åˆ—ä»¥åŠå¸¸æ•° CCCï¼Œè¦æ±‚è®¡ç®—æ»¡è¶³æ¡ä»¶ Aâˆ’B&#x3D;CA - B &#x3D; CAâˆ’B&#x3D;C çš„æ•°å¯¹ä¸ªæ•°ã€‚è¿™ä¸ªé—®é¢˜è¦æ±‚åˆ¤æ–­åœ¨æ•°åˆ—ä¸­ï¼Œå­˜åœ¨å¤šå°‘å¯¹ (A,B)(A, B)(A,B)ï¼Œä½¿å¾— Aâˆ’B&#x3D;CA - B &#x3D; CAâˆ’B&#x3D;Cï¼Œå³ A&#x3D;B+CA &#x3D; B + CA&#x3D;B+Cã€‚</p><h4 id="è§£å†³æ€è·¯ï¼š"><a href="#è§£å†³æ€è·¯ï¼š" class="headerlink" title="è§£å†³æ€è·¯ï¼š"></a>è§£å†³æ€è·¯ï¼š</h4><ol><li><strong>æ•°å­¦è½¬æ¢</strong>ï¼š<ul><li>ç»™å®šæ¡ä»¶ Aâˆ’B&#x3D;CA - B &#x3D; CAâˆ’B&#x3D;Cï¼Œå¯è½¬åŒ–ä¸º A&#x3D;B+CA &#x3D; B + CA&#x3D;B+Cã€‚å› æ­¤ï¼Œå¯¹äºæ¯ä¸ª BBBï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ B+CB + CB+C æ˜¯å¦å‡ºç°åœ¨æ•°åˆ—ä¸­ã€‚</li></ul></li><li><strong>ä½¿ç”¨å“ˆå¸Œè¡¨</strong>ï¼š<ul><li>ä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆ<code>unordered_map</code>ï¼‰æ¥è®°å½•æ•°åˆ—ä¸­æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°ã€‚éå†æ•°åˆ—ï¼Œå¯¹äºæ¯ä¸ªæ•° BBBï¼Œè®¡ç®— B+CB + CB+Cï¼Œç„¶åæ£€æŸ¥å“ˆå¸Œè¡¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªæ•°ã€‚å¦‚æœæœ‰ï¼Œåˆ™è®¡æ•°å¢åŠ ã€‚</li></ul></li><li><strong>æ•ˆç‡é—®é¢˜</strong>ï¼š<ul><li>ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡æ•°åˆ—ä¸­å„ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°ï¼ŒæŸ¥æ‰¾æŸä¸ªæ•°æ˜¯å¦å­˜åœ¨çš„æ“ä½œæ˜¯ O(1)O(1)O(1)ï¼Œæ‰€ä»¥è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N)O(N)O(N)ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®ã€‚</li></ul></li></ol><h3 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;unordered_map&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int N, C;</span><br><span class="line">    cin &gt;&gt; N &gt;&gt; C;</span><br><span class="line">    </span><br><span class="line">    vector&lt;int&gt; arr(N);</span><br><span class="line">    unordered_map&lt;int, int&gt; freq;  </span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; N; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; arr[i];</span><br><span class="line">        ++freq[arr[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    long long count = 0; </span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; N; ++i) &#123;</span><br><span class="line">        int B = arr[i];</span><br><span class="line">        int A = B + C;  // è®¡ç®—A = B + C</span><br><span class="line">       </span><br><span class="line">        if (freq.find(A) != freq.end()) &#123;</span><br><span class="line">            count += freq[A];  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; count &lt;&lt; endl;  </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-1"><a href="#3-å­¦ä¹ æ€»ç»“-1" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>å“ˆå¸Œè¡¨</strong>ï¼š å“ˆå¸Œè¡¨åœ¨å¤„ç†éœ€è¦å¿«é€ŸæŸ¥æ‰¾çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œå“ˆå¸Œè¡¨å¸®åŠ©æˆ‘ä»¬åœ¨ O(1)O(1)O(1) çš„æ—¶é—´å¤æ‚åº¦å†…æŸ¥æ‰¾æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œä½¿å¾—æ•´ä½“å¤æ‚åº¦ä» O(N2)O(N^2)O(N2) é™ä½åˆ° O(N)O(N)O(N)ã€‚</p><p><strong>ä¼˜åŒ–æ€ç»´</strong>ï¼š é€šè¿‡å°†é—®é¢˜è½¬åŒ–ä¸ºæŸ¥æ‰¾æ•°åˆ—ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ•° A&#x3D;B+CA &#x3D; B + CA&#x3D;B+Cï¼Œæˆ‘ä»¬é¿å…äº†æšä¸¾æ‰€æœ‰æ•°å¯¹çš„ä½æ•ˆæ–¹æ³•ã€‚è¿™æ˜¯å…¸å‹çš„é€šè¿‡æ•°å­¦è½¬åŒ–ä¼˜åŒ–é—®é¢˜çš„æ€è·¯ã€‚</p><p><strong>æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</strong>ï¼š å­¦ä¹ å¦‚ä½•å¹³è¡¡æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€‚é€šè¿‡ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œè™½ç„¶å¢åŠ äº†é¢å¤–çš„ç©ºé—´å¼€é”€ï¼Œä½†æå¤§åœ°æé«˜äº†ç®—æ³•æ•ˆç‡ï¼Œé€‚åº”äº†é—®é¢˜çš„å¤§æ•°æ®è§„æ¨¡ã€‚</p><p><strong>å®é™…åº”ç”¨</strong>ï¼š å“ˆå¸Œè¡¨å’Œé›†åˆæ“ä½œåœ¨å®é™…å¼€å‘ä¸­æœ‰ç€å¹¿æ³›åº”ç”¨ï¼Œä¾‹å¦‚æ•°æ®åº“çš„ç´¢å¼•ã€ç¼“å­˜ç³»ç»Ÿç­‰ï¼Œäº†è§£å¹¶æŒæ¡è¿™äº›åŸºæœ¬æ•°æ®ç»“æ„å¯¹è§£å†³å®é™…é—®é¢˜è‡³å…³é‡è¦ã€‚</p><h2 id="ä¸‰-åˆ†å·§å…‹åŠ›"><a href="#ä¸‰-åˆ†å·§å…‹åŠ›" class="headerlink" title="ä¸‰.åˆ†å·§å…‹åŠ›"></a>ä¸‰.åˆ†å·§å…‹åŠ›</h2><h3 id="1-å¯¹åº”æ€è·¯-2"><a href="#1-å¯¹åº”æ€è·¯-2" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>é¢˜ç›®è¦æ±‚æˆ‘ä»¬ä» <code>N</code> å—å·§å…‹åŠ›ä¸­åˆ‡å‡º <code>K</code> å—æ­£æ–¹å½¢å·§å…‹åŠ›ï¼Œä¸”æ¯å—æ­£æ–¹å½¢çš„è¾¹é•¿å°½å¯èƒ½å¤§ã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡åˆ‡å‰²å·§å…‹åŠ›çš„é•¿æ–¹å½¢ï¼Œå¾—åˆ°å¤§å°ç›¸åŒçš„æ­£æ–¹å½¢ã€‚</p><h4 id="é—®é¢˜åˆ†æï¼š"><a href="#é—®é¢˜åˆ†æï¼š" class="headerlink" title="é—®é¢˜åˆ†æï¼š"></a>é—®é¢˜åˆ†æï¼š</h4><ol><li><strong>æ­£æ–¹å½¢çš„å¤§å°</strong>ï¼š<ul><li>å¯¹äºæ¯ä¸€å—å·§å…‹åŠ› HiÃ—WiH_i \times W_iHiÃ—Wiï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»ä¸­åˆ‡å‡ºå¤šå°‘ä¸ª SÃ—SS \times SSÃ—S çš„æ­£æ–¹å½¢ï¼ˆå…¶ä¸­ SSS ä¸ºæ­£æ–¹å½¢çš„è¾¹é•¿ï¼‰ï¼Ÿ</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°† HiH_iHi å’Œ WiW_iWi åˆ†åˆ«é™¤ä»¥ SSSï¼Œè®¡ç®—æ¯ä¸ªé•¿æ–¹å½¢å¯ä»¥åˆ‡å‡ºçš„æ­£æ–¹å½¢æ•°é‡ï¼š ä¸ªæ•°&#x3D;âŒŠHiSâŒ‹Ã—âŒŠWiSâŒ‹\text{ä¸ªæ•°} &#x3D; \left\lfloor \frac{H_i}{S} \right\rfloor \times \left\lfloor \frac{W_i}{S} \right\rfloorä¸ªæ•°&#x3D;âŒŠSHiâŒ‹Ã—âŒŠSWiâŒ‹</li><li>æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ª SSSï¼Œä½¿å¾—ä»æ‰€æœ‰ NNN å—å·§å…‹åŠ›ä¸­åˆ‡å‡ºçš„æ­£æ–¹å½¢æ€»æ•°è‡³å°‘ä¸º KKKã€‚</li></ul></li><li><strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼š<ul><li>ç”±äºæˆ‘ä»¬å¸Œæœ›åˆ‡å‡ºçš„æ­£æ–¹å½¢è¾¹é•¿å°½å¯èƒ½å¤§ï¼Œæœ€ç›´è§‚çš„åŠæ³•æ˜¯ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥ç¡®å®šè¾¹é•¿ SSS çš„æœ€å¤§å€¼ã€‚èŒƒå›´ä» 1 åˆ°æ¯å—å·§å…‹åŠ›çš„æœ€å¤§è¾¹é•¿ï¼ˆå³ minâ¡(Hi,Wi)\min(H_i, W_i)min(Hi,Wi)ï¼‰ã€‚</li></ul></li><li><strong>æ£€æŸ¥æ¡ä»¶</strong>ï¼š<ul><li>å¯¹äºæ¯ä¸ª SSSï¼Œæˆ‘ä»¬è®¡ç®—å‡ºæ‰€æœ‰å·§å…‹åŠ›åˆ‡å‡ºçš„æ­£æ–¹å½¢æ•°é‡ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³è‡³å°‘æœ‰ KKK å—å·§å…‹åŠ›ã€‚å¦‚æœèƒ½æ»¡è¶³ï¼Œè¯´æ˜ SSS æ˜¯ä¸€ä¸ªå¯èƒ½çš„è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­å°è¯•æ›´å¤§çš„ SSSï¼›å¦åˆ™ï¼Œå°è¯•æ›´å°çš„ SSSã€‚</li></ul></li></ol><h3 id="2-ä»£ç -1"><a href="#2-ä»£ç -1" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">// åˆ¤æ–­ç»™å®šè¾¹é•¿ S èƒ½å¦ä»æ‰€æœ‰å·§å…‹åŠ›ä¸­åˆ‡å‡ºè‡³å°‘ K å—æ­£æ–¹å½¢</span><br><span class="line">bool canCutSquares(const vector&lt;pair&lt;int, int&gt;&gt;&amp; chocolates, int S, int K) &#123;</span><br><span class="line">    long long totalCount = 0;  // è®°å½•åˆ‡å‡ºçš„æ­£æ–¹å½¢æ€»æ•°</span><br><span class="line">    for (const auto&amp; chocolate : chocolates) &#123;</span><br><span class="line">        int H = chocolate.first;</span><br><span class="line">        int W = chocolate.second;</span><br><span class="line">        totalCount += (H / S) * (W / S);  // è®¡ç®—è¯¥å·§å…‹åŠ›èƒ½åˆ‡å‡ºå¤šå°‘ä¸ª S * S çš„æ­£æ–¹å½¢</span><br><span class="line">        if (totalCount &gt;= K) return true;  // å¦‚æœå·²è¾¾åˆ°è¦æ±‚çš„æ•°é‡ï¼Œæå‰è¿”å›</span><br><span class="line">    &#125;</span><br><span class="line">    return totalCount &gt;= K;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int N, K;</span><br><span class="line">    cin &gt;&gt; N &gt;&gt; K;</span><br><span class="line"></span><br><span class="line">    vector&lt;pair&lt;int, int&gt;&gt; chocolates(N);</span><br><span class="line">    int maxSide = 0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; N; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; chocolates[i].first &gt;&gt; chocolates[i].second;</span><br><span class="line">        maxSide = max(maxSide, min(chocolates[i].first, chocolates[i].second));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int low = 1, high = maxSide, bestSide = 0;</span><br><span class="line"></span><br><span class="line">    while (low &lt;= high) &#123;</span><br><span class="line">        int mid = (low + high) / 2;</span><br><span class="line">        if (canCutSquares(chocolates, mid, K)) &#123;</span><br><span class="line">            bestSide = mid;  </span><br><span class="line">            low = mid + 1;  </span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            high = mid - 1;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; bestSide &lt;&lt; endl; </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-2"><a href="#3-å­¦ä¹ æ€»ç»“-2" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>äºŒåˆ†æŸ¥æ‰¾çš„åº”ç”¨</strong>ï¼šé€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¯ä»¥é«˜æ•ˆåœ°æ±‚è§£æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ï¼Œå°¤å…¶æ˜¯åœ¨è¾¹é•¿ç©ºé—´è¾ƒå¤§æ—¶ï¼Œèƒ½å¤Ÿæ˜¾è‘—é™ä½æ—¶é—´å¤æ‚åº¦ã€‚</p><p><strong>ç©ºé—´åˆ©ç”¨</strong>ï¼šé€šè¿‡ä½¿ç”¨å“ˆå¸Œè¡¨å’ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæˆ‘ä»¬åœ¨æ—¶é—´å’Œç©ºé—´ä¸Šè¾¾åˆ°äº†è¾ƒä¼˜çš„å¹³è¡¡ï¼Œèƒ½å¤Ÿå¤„ç†æœ€å¤§è§„æ¨¡çš„æ•°æ®ã€‚</p><p><strong>é—®é¢˜çš„æ•°å­¦è½¬åŒ–</strong>ï¼šé€šè¿‡å°†åˆ‡å‰²é—®é¢˜è½¬åŒ–ä¸ºæ•°ç›®åˆ¤æ–­é—®é¢˜ï¼Œåˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾å¯ä»¥æœ‰æ•ˆé¿å…æš´åŠ›ç ´è§£çš„é«˜æ—¶é—´å¤æ‚åº¦ã€‚</p><h2 id="å››-å¡ç‰Œ"><a href="#å››-å¡ç‰Œ" class="headerlink" title="å››.å¡ç‰Œ"></a>å››.å¡ç‰Œ</h2><h3 id="1-å¯¹åº”æ€è·¯-3"><a href="#1-å¯¹åº”æ€è·¯-3" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p><strong>å‡å°‘é‡å¤è®¡ç®—</strong>ï¼š</p><ul><li>åœ¨ <code>canMakeKSets</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦è®¡ç®—ç©ºç™½å¡ç‰Œçš„æ•°é‡ã€‚è€ƒè™‘åˆ° <code>a[i]</code> å’Œ <code>b[i]</code> å¯¹äºæ¯ä¸ªå¡ç‰Œæ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥æå‰è®¡ç®—æ¯ç§å¡ç‰Œçš„è¡¥å……é‡ï¼Œç„¶åç›´æ¥é€šè¿‡å‰ç¼€å’Œè®¡ç®—æ¯ä¸ª <code>k</code> çš„æ‰€éœ€è¡¥å……å¡ç‰Œæ•°ã€‚</li></ul><p><strong>é€šè¿‡å‰ç¼€å’Œä¼˜åŒ–å¡ç‰Œéœ€æ±‚è®¡ç®—</strong>ï¼š</p><ul><li>è®¡ç®—éœ€è¦è¡¥å……çš„ç©ºç™½å¡ç‰Œæ•°æ—¶ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æå‰è®¡ç®—å‡ºæ¯ç§å¡ç‰Œåœ¨æ¯ä¸ª <code>k</code> å€¼ä¸‹éœ€è¦å¤šå°‘ç©ºç™½å¡ç‰Œï¼Œå¯ä»¥åŠ é€ŸæŸ¥æ‰¾ã€‚</li><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>è´ªå¿ƒç­–ç•¥</strong> æˆ–è€… <strong>æ‰«æç®—æ³•</strong>ï¼Œé¿å…æ¯æ¬¡éƒ½å…¨é‡æ‰«æ <code>n</code> ä¸ªå¡ç‰Œã€‚</li></ul><h3 id="2-ä»£ç -2"><a href="#2-ä»£ç -2" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">#define int long long</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int N = 2e5;</span><br><span class="line">int n, m, a[N + 5], b[N + 5];</span><br><span class="line"></span><br><span class="line">inline int read() &#123;</span><br><span class="line">    int x = 0;</span><br><span class="line">    bool f = 1;</span><br><span class="line">    char ch = getchar();</span><br><span class="line">    for (; ch &lt; &#x27;0&#x27; || ch &gt; &#x27;9&#x27;; ch = getchar()) f ^= (ch == &#x27;-&#x27;);</span><br><span class="line">    for (; ch &gt;= &#x27;0&#x27; &amp;&amp; ch &lt;= &#x27;9&#x27;; ch = getchar()) x = (x &lt;&lt; 1) + (x &lt;&lt; 3) + (ch ^ 48);</span><br><span class="line">    return f ? x : -x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bool check(int mid) &#123;</span><br><span class="line">    int cnt = 0;</span><br><span class="line">    for (int i = 1; i &lt;= n; ++i) &#123;</span><br><span class="line">        cnt += max(0LL, mid - a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    return cnt &lt;= m;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Kafka() &#123;</span><br><span class="line">    n = read();</span><br><span class="line">    m = read();</span><br><span class="line">    </span><br><span class="line">    int L = 1, R = n * 2;</span><br><span class="line"> </span><br><span class="line">    for (int i = 1; i &lt;= n; ++i) &#123;</span><br><span class="line">        a[i] = read();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    for (int i = 1; i &lt;= n; ++i) &#123;</span><br><span class="line">        b[i] = read();</span><br><span class="line">        R = min(a[i] + b[i], R);  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // äºŒåˆ†æŸ¥æ‰¾æœ€å¤§å¥—ç‰Œæ•°</span><br><span class="line">    while (L &lt; R) &#123;</span><br><span class="line">        int mid = (L + R + 1) &gt;&gt; 1;</span><br><span class="line">        if (check(mid)) &#123;</span><br><span class="line">            L = mid;  </span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            R = mid - 1; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; L &lt;&lt; &#x27;\n&#x27;;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">signed main() &#123;</span><br><span class="line">    Kafka();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-3"><a href="#3-å­¦ä¹ æ€»ç»“-3" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>æå‰è®¡ç®—è¡¥å……æ•°é‡</strong>ï¼šé€šè¿‡ä¸€æ¬¡éå†è®¡ç®—æ¯ä¸ª <code>k</code> éœ€è¦çš„è¡¥å……å¡ç‰Œæ•°é‡ï¼Œå¯ä»¥å‡å°‘æ—¶é—´å¤æ‚åº¦ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p><p><strong>äºŒåˆ†æŸ¥æ‰¾çš„æŠ€å·§</strong>ï¼šé€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¯ä»¥æœ‰æ•ˆç¼©å°æœç´¢èŒƒå›´ï¼Œæ¯æ¬¡åˆ¤æ–­å¯ä»¥é›†ä¸­åˆ¤æ–­æŸä¸ª <code>k</code> æ˜¯å¦å¯è¡Œã€‚</p><p><strong>ç©ºé—´ä¼˜åŒ–</strong>ï¼šåªä½¿ç”¨ç®€å•çš„æ•°ç»„æ¥å­˜å‚¨å¡ç‰Œæ•°é‡å’Œè¡¥å……é™åˆ¶ï¼Œç©ºé—´å¤æ‚åº¦ä¸º <code>O(n)</code>ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚</p><h2 id="äº”-ä¹¦çš„å¤åˆ¶"><a href="#äº”-ä¹¦çš„å¤åˆ¶" class="headerlink" title="äº”.ä¹¦çš„å¤åˆ¶"></a>äº”.ä¹¦çš„å¤åˆ¶</h2><h3 id="1-å¯¹åº”æ€è·¯-4"><a href="#1-å¯¹åº”æ€è·¯-4" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>æœ¬é¢˜ç›®è¦æ±‚å°† <code>m</code> æœ¬æœ‰é¡ºåºçš„ä¹¦åˆ†ç»™ <code>k</code> ä¸ªäººå¤åˆ¶ï¼Œæ¯ä¸ªäººæŠ„å†™çš„ä¹¦æ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”éœ€è¦å°½å¯èƒ½æœ€çŸ­çš„å¤åˆ¶æ—¶é—´ã€‚å¤åˆ¶æ—¶é—´æŒ‡çš„æ˜¯æŠ„å†™é¡µæ•°æœ€å¤šçš„äººæ‰€ç”¨çš„æ—¶é—´ï¼Œç›®æ ‡æ˜¯å°½å¯èƒ½å‡å°‘è¿™ä¸ªæ—¶é—´ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‡‡ç”¨äº† <strong>äºŒåˆ†æŸ¥æ‰¾</strong> å’Œ <strong>è´ªå¿ƒç®—æ³•</strong> ç»“åˆçš„ç­–ç•¥ï¼š</p><ol><li><strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼š<ul><li>å¯¹äºå¤åˆ¶æ—¶é—´çš„æœ€å¤§å€¼ <code>max_time</code>ï¼ˆå³æŠ„å†™é¡µæ•°æœ€å¤šçš„äººçš„æ—¶é—´ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚</li><li>åˆå§‹æ—¶ï¼Œè®¾ç½® <code>L = 1</code>ï¼ˆæœ€å°å€¼ï¼‰å’Œ <code>R = sum(a)</code>ï¼ˆæœ€å¤§å€¼ï¼Œæ‰€æœ‰ä¹¦é¡µåŠ èµ·æ¥ï¼‰ã€‚</li><li>å¯¹äºæ¯ä¸ªä¸­é—´å€¼ <code>mid</code>ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­æ˜¯å¦èƒ½åœ¨ <code>mid</code> çš„æœ€å¤§æ—¶é—´é™åˆ¶ä¸‹ï¼Œåˆç†åˆ†é…ä¹¦ç±ç»™ <code>k</code> ä¸ªäººã€‚</li></ul></li><li><strong>è´ªå¿ƒç®—æ³•</strong>ï¼š<ul><li>æ¯æ¬¡å°è¯•ç”¨å½“å‰çš„ <code>mid</code> æ¥åˆ†é…ä¹¦ç±ï¼šä»ä¹¦ç±åˆ—è¡¨ä¸­ä¾æ¬¡åˆ†é…ï¼Œå¦‚æœå½“å‰äººçš„å·²åˆ†é…é¡µæ•°è¶…è¿‡ <code>mid</code>ï¼Œå°±å¼€å§‹åˆ†é…ç»™ä¸‹ä¸€ä¸ªäººã€‚</li><li>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šåœ¨å½“å‰çš„ <code>mid</code> æ—¶é—´ä¸‹ï¼Œèƒ½åˆ†é…ç»™ <code>k</code> ä¸ªäººã€‚</li></ul></li><li><strong>è¿‡ç¨‹æè¿°</strong>ï¼š<ul><li>å¯¹äºæ¯æ¬¡äºŒåˆ†æŸ¥æ‰¾çš„ <code>mid</code>ï¼Œæˆ‘ä»¬ä»ç¬¬ 1 ä¸ªäººå¼€å§‹ï¼Œè´ªå¿ƒåœ°åˆ†é…ä¹¦ç±ã€‚å¦‚æœå½“å‰ä¹¦ç±æ— æ³•åˆ†é…ç»™å½“å‰äººï¼ˆè¶…å‡ºäº† <code>mid</code> æ—¶é—´ï¼‰ï¼Œå°±æ¢ç»™ä¸‹ä¸€ä¸ªäººï¼Œç›´åˆ°æ‰€æœ‰ä¹¦ç±åˆ†é…å®Œã€‚</li><li>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåœ¨ <code>k</code> ä¸ªäººå†…å®Œæˆåˆ†é…ï¼Œé‚£ä¹ˆè¯´æ˜å½“å‰çš„ <code>mid</code> å€¼æ˜¯å¯è¡Œçš„ï¼Œæˆ‘ä»¬å°è¯•ç¼©å° <code>mid</code>ï¼›å¦åˆ™ï¼Œå¢å¤§ <code>mid</code>ã€‚</li></ul></li><li><strong>ç»“æœè¾“å‡º</strong>ï¼š<ul><li>äºŒåˆ†æŸ¥æ‰¾ç»“æŸåï¼Œæœ€ç»ˆçš„æœ€ä¼˜æ—¶é—´å°±æ˜¯ <code>L</code>ï¼Œç„¶åæ ¹æ®è¯¥æ—¶é—´è¾“å‡ºæ¯ä¸ªäººæŠ„å†™çš„ä¹¦ç±åŒºé—´ã€‚</li></ul></li></ol><h3 id="2-ä»£ç -3"><a href="#2-ä»£ç -3" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">#define int long long</span><br><span class="line">using namespace std;</span><br><span class="line">const int K=500;</span><br><span class="line">int m,k,a[K+5];</span><br><span class="line">int st[K+5],ed[K+5];</span><br><span class="line">inline int read()</span><br><span class="line">&#123;</span><br><span class="line">    int x=0;bool f=1;char ch=getchar();</span><br><span class="line">    for(;ch&lt;&#x27;0&#x27;||ch&gt;&#x27;9&#x27;;ch=getchar())f^=(ch==&#x27;-&#x27;);</span><br><span class="line">    for(;ch&gt;=&#x27;0&#x27;&amp;&amp;ch&lt;=&#x27;9&#x27;;ch=getchar())x=(x&lt;&lt;1)+(x&lt;&lt;3)+(ch^48);</span><br><span class="line">    return f?x:-x;</span><br><span class="line">&#125;</span><br><span class="line">bool check(int mid)</span><br><span class="line">&#123;</span><br><span class="line">    int cnt=1,now=mid;</span><br><span class="line">    for(int i=1;i&lt;=m&amp;&amp;cnt&lt;=k;++i) </span><br><span class="line">    &#123;</span><br><span class="line">        if(a[i]&gt;now) ++cnt,--i,now=mid;</span><br><span class="line">        else now-=a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    return cnt&lt;=k;</span><br><span class="line">&#125;</span><br><span class="line">void Kafka()</span><br><span class="line">&#123;</span><br><span class="line">    m=read(),k=read();</span><br><span class="line">    int L=1,R=0;</span><br><span class="line">    for(int i=1;i&lt;=m;++i) a[i]=read(),R+=a[i];</span><br><span class="line">    for(int mid=L+R&gt;&gt;1;L&lt;R;check(mid)?R=mid:L=mid+1)mid=L+R&gt;&gt;1;</span><br><span class="line">    ed[k]=m,st[1]=1;</span><br><span class="line">    for(int i=k,j=m,now=L;i;--i)</span><br><span class="line">    &#123;</span><br><span class="line">        for(;now&gt;=a[j]&amp;&amp;j;--j) now-=a[j];</span><br><span class="line">        st[i]=j+1,ed[i-1]=j,now=L;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    for(int i=1;i&lt;=k;++i) cout&lt;&lt;st[i]&lt;&lt;&#x27; &#x27;&lt;&lt;ed[i]&lt;&lt;&#x27;\n&#x27;;</span><br><span class="line">&#125;</span><br><span class="line">signed main()</span><br><span class="line">&#123;</span><br><span class="line">    Kafka();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-4"><a href="#3-å­¦ä¹ æ€»ç»“-4" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>æœ¬é¢˜è€ƒå¯Ÿäº† <strong>äºŒåˆ†æŸ¥æ‰¾</strong> å’Œ <strong>è´ªå¿ƒç®—æ³•</strong> çš„ç»“åˆä½¿ç”¨ã€‚é€šè¿‡äºŒåˆ†æŸ¥æ‰¾é«˜æ•ˆåœ°æ¢ç´¢æœ€ä¼˜è§£ç©ºé—´ï¼Œå†ç»“åˆè´ªå¿ƒç®—æ³•å¿«é€Ÿåˆ¤æ–­æ˜¯å¦èƒ½åœ¨æŒ‡å®šæ—¶é—´å†…å®Œæˆåˆ†é…ï¼Œä½¿å¾—é—®é¢˜å¾—ä»¥é«˜æ•ˆè§£å†³ã€‚è¿™ç§ç±»å‹çš„é—®é¢˜ä¸ä»…èƒ½å¤ŸåŠ æ·±å¯¹ç®—æ³•æ€ç»´çš„ç†è§£ï¼Œè¿˜èƒ½å¸®åŠ©è§£å†³å®é™…ä¸­é‡åˆ°çš„ç±»ä¼¼æœ€ä¼˜åŒ–é—®é¢˜ã€‚</p><h2 id="å…­-é’è›™è¿‡æ²³"><a href="#å…­-é’è›™è¿‡æ²³" class="headerlink" title="å…­.é’è›™è¿‡æ²³"></a>å…­.é’è›™è¿‡æ²³</h2><h3 id="1-å¯¹åº”æ€è·¯-5"><a href="#1-å¯¹åº”æ€è·¯-5" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>é¢˜ç›®è¦æ±‚å°é’è›™åœ¨æ²³å¯¹å²¸å’Œå­¦æ ¡ä¹‹é—´æ¥å›è·³è·ƒï¼Œä»¥æœ€å°åŒ–è·³è·ƒçš„èƒ½åŠ›ï¼ˆå³æœ€å°çš„è·³è·ƒè·ç¦»ï¼‰ã€‚æ¯æ¬¡å°é’è›™å¿…é¡»ä»ä¸€å—çŸ³å¤´èµ·è·³ï¼Œå¹¶ä¸”è·³è·ƒçš„è·ç¦»ä¸èƒ½è¶…è¿‡æŸä¸ªå€¼ã€‚ä¸ºäº†ç¡®ä¿å°é’è›™èƒ½å¤Ÿå®ŒæˆæŒ‡å®šçš„è·³è·ƒæ¬¡æ•°ï¼ˆ2xæ¬¡ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è·³è·ƒè·ç¦»ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿåœ¨æœ‰é™çš„è·³è·ƒæ¬¡æ•°å†…æˆåŠŸå®Œæˆä»»åŠ¡ã€‚</p><ul><li><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¡®å®šæœ€å°è·³è·ƒèƒ½åŠ›çš„èŒƒå›´ã€‚æœ€å°å€¼ä¸º <code>1</code>ï¼Œæœ€å¤§å€¼ä¸º <code>n-1</code>ï¼ˆå³æ²³å®½åº¦ï¼‰ï¼Œå³ä»æ²³çš„èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€å¤§è·³è·ƒè·ç¦»ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥ç¼©å°è·³è·ƒèƒ½åŠ›çš„èŒƒå›´ã€‚é€šè¿‡ä¸æ–­å°è¯•ä¸åŒçš„è·³è·ƒèƒ½åŠ› <code>mid</code>ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿå®Œæˆ <code>2x</code> æ¬¡è·³è·ƒã€‚</p></li><li><p>ä¸ºäº†åˆ¤æ–­æŸä¸ªè·³è·ƒèƒ½åŠ›æ˜¯å¦åˆé€‚ï¼Œæ¨¡æ‹Ÿå°é’è›™çš„è·³è·ƒè¿‡ç¨‹ï¼šä»èµ·ç‚¹å¼€å§‹ï¼Œæ¯æ¬¡å°è¯•è·³è·ƒå°½å¯èƒ½è¿œçš„çŸ³å¤´ï¼ˆè·³è·ƒçš„è·ç¦»ä¸è¶…è¿‡å½“å‰çš„ <code>mid</code>ï¼‰ï¼Œå¹¶å°½é‡å‡å°‘è·³è·ƒçš„æ¬¡æ•°ã€‚</p></li><li><p>å¦‚æœè·³è·ƒæ¬¡æ•°å°äºæˆ–ç­‰äº <code>2x</code>ï¼Œåˆ™å½“å‰è·³è·ƒèƒ½åŠ› <code>mid</code> æ˜¯å¯è¡Œçš„ã€‚</p></li><li><p>å¦åˆ™ï¼Œå½“å‰è·³è·ƒèƒ½åŠ› <code>mid</code> å¤ªå°ï¼Œä¸èƒ½å®Œæˆä»»åŠ¡ã€‚</p></li><li><p>é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ä¸æ–­è°ƒæ•´è·³è·ƒèƒ½åŠ›çš„èŒƒå›´ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å°çš„å¯è¡Œè·³è·ƒèƒ½åŠ›ã€‚</p></li></ul><h3 id="2-ä»£ç -4"><a href="#2-ä»£ç -4" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int N = 1e5;</span><br><span class="line">int n, x, H[N + 5], sum[N + 5];</span><br><span class="line"></span><br><span class="line">inline int read() &#123;</span><br><span class="line">    int x = 0; bool f = 1; char ch = getchar();</span><br><span class="line">    for (; ch &lt; &#x27;0&#x27; || ch &gt; &#x27;9&#x27;; ch = getchar()) f ^= (ch == &#x27;-&#x27;);</span><br><span class="line">    for (; ch &gt;= &#x27;0&#x27; &amp;&amp; ch &lt;= &#x27;9&#x27;; ch = getchar()) x = (x &lt;&lt; 1) + (x &lt;&lt; 3) + (ch ^ 48);</span><br><span class="line">    return f ? x : -x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bool check(int mid) &#123;</span><br><span class="line">    int cnt = 0, last = 0;</span><br><span class="line">    for (int i = 1; i &lt; n; i++) &#123;</span><br><span class="line">        if (i - last &gt; mid) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            last = i - 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (n - last &gt; mid) cnt++;</span><br><span class="line">    return cnt &lt;= 2 * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Kafka() &#123;</span><br><span class="line">    n = read(), x = read();</span><br><span class="line">    </span><br><span class="line">    for (int i = 1; i &lt; n; i++) &#123;</span><br><span class="line">        H[i] = read();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int L = 1, R = n, ans = n;</span><br><span class="line">    while (L &lt;= R) &#123;</span><br><span class="line">        int mid = (L + R) &gt;&gt; 1;</span><br><span class="line">        if (check(mid)) &#123;</span><br><span class="line">            ans = mid;</span><br><span class="line">            R = mid - 1;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            L = mid + 1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; &#x27;\n&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">signed main() &#123;</span><br><span class="line">    Kafka();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-5"><a href="#3-å­¦ä¹ æ€»ç»“-5" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>äºŒåˆ†æŸ¥æ‰¾çš„åº”ç”¨</strong><br>äºŒåˆ†æŸ¥æ‰¾é€šå¸¸ç”¨æ¥åœ¨æœ‰åºåŒºé—´ä¸­æŸ¥æ‰¾æŸä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ¥æ‰¾åˆ°æœ€å°çš„è·³è·ƒèƒ½åŠ›ï¼Œè¿™ç§é—®é¢˜é€šå¸¸è¢«ç§°ä¸ºâ€œæœ€å°æœ€å¤§åŒ–é—®é¢˜â€ã€‚</p><p><strong>æ¨¡æ‹Ÿé—®é¢˜çš„å®ç°</strong><br>æœ¬é¢˜ä¸­æ¨¡æ‹Ÿäº†å°é’è›™çš„è·³è·ƒè¿‡ç¨‹ï¼Œæ¨¡æ‹Ÿçš„å…³é”®æ˜¯å¦‚ä½•åˆ¤æ–­æ˜¯å¦èƒ½åœ¨æœ‰é™çš„è·³è·ƒæ¬¡æ•°å†…å®Œæˆä»»åŠ¡ã€‚é€šè¿‡æ£€æŸ¥æ¯ä¸ª <code>mid</code> è·³è·ƒèƒ½åŠ›æ˜¯å¦èƒ½å¤Ÿå®Œæˆ <code>2x</code> æ¬¡è·³è·ƒï¼Œåˆ¤æ–­å½“å‰è·³è·ƒèƒ½åŠ›çš„å¯è¡Œæ€§ã€‚</p><p><strong>é—®é¢˜æ±‚è§£ä¸­çš„äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–</strong><br>ç”±äºæœ¬é¢˜çš„è·³è·ƒèƒ½åŠ›æ˜¯ä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¸”é€šè¿‡éªŒè¯è·³è·ƒèƒ½åŠ›çš„å¯è¡Œæ€§å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆï¼Œæ‰€ä»¥äºŒåˆ†æŸ¥æ‰¾åœ¨è¿™ä¸ªé—®é¢˜ä¸­æ˜¯ä¸€ç§é«˜æ•ˆçš„æ±‚è§£æ–¹æ³•ã€‚</p><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(log n)</code>ã€‚</li><li>å¯¹æ¯ä¸ª <code>mid</code> å€¼ï¼Œæˆ‘ä»¬éœ€è¦éå†çŸ³å¤´è¿›è¡Œä¸€æ¬¡è·³è·ƒæ¨¡æ‹Ÿï¼Œæœ€åæƒ…å†µä¸‹æ˜¯ <code>O(n)</code>ã€‚</li><li>å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(n log n)</code>ï¼Œå¯¹äº <code>n</code> æœ€å¤§ä¸º <code>10^5</code> çš„æ•°æ®ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°åœ¨æ—¶é—´é™åˆ¶å†…å®Œæˆè®¡ç®—ã€‚</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Task 1</title>
      <link href="/2025/02/06/Task-1/"/>
      <url>/2025/02/06/Task-1/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯’å‡ç¬¬ä¸€è®²ï¼šC-åŸºç¡€"><a href="#å¯’å‡ç¬¬ä¸€è®²ï¼šC-åŸºç¡€" class="headerlink" title="å¯’å‡ç¬¬ä¸€è®²ï¼šC++ åŸºç¡€"></a>å¯’å‡ç¬¬ä¸€è®²ï¼šC++ åŸºç¡€</h1><h2 id="ä¸€-Long-Loong"><a href="#ä¸€-Long-Loong" class="headerlink" title="ä¸€.Long Loong"></a>ä¸€.Long Loong</h2><h3 id="1-å¯¹åº”æ€è·¯"><a href="#1-å¯¹åº”æ€è·¯" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>æ€è·¯è¾ƒä¸ºç®€å•ï¼Œå°±æ˜¯å…ˆå›ºå®šè¾“å‡ºLï¼Œå†æ ¹æ®è¾“å…¥çš„Nå¾—åˆ°åº”è¯¥è¾“å‡ºå¤šå°‘oï¼Œæœ€åå†å›ºå®šè¾“å‡ºngã€‚</p><h3 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">int n;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line">cout &lt;&lt; &#x27;L&#x27;;</span><br><span class="line">for (int i = 0; i &lt; n; i++)</span><br><span class="line">cout &lt;&lt; &#x27;o&#x27;;</span><br><span class="line">cout &lt;&lt; &quot;ng&quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“"><a href="#3-å­¦ä¹ æ€»ç»“" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>å­¦åˆ°äº†forå¾ªç¯çš„åŸºæœ¬ç”¨æ³•ï¼Œå¯¹æˆ‘å¸®åŠ©æå¤§ï¼Œå—ç›Šè‰¯å¤šã€‚</p><h2 id="äºŒ-YES-or-YES"><a href="#äºŒ-YES-or-YES" class="headerlink" title="äºŒ.YES or YES?"></a>äºŒ.YES or YES?</h2><h3 id="1-å¯¹åº”æ€è·¯-1"><a href="#1-å¯¹åº”æ€è·¯-1" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>æ€è·¯å°±æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²å…¨éƒ¨å¤§å†™ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ç­‰äºYESï¼Œå¦‚æœç­‰äºå°±è¾“å‡ºYESï¼Œä¸ç­‰äºå°±è¾“å‡ºNOã€‚</p><h3 id="2-ä»£ç -1"><a href="#2-ä»£ç -1" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;algorithm&gt; </span><br><span class="line">using namespace std;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int t; </span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    while (t--) &#123;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        transform(s.begin(), s.end(), s.begin(), ::toupper);</span><br><span class="line">        if (s == &quot;YES&quot;) &#123;</span><br><span class="line">            cout &lt;&lt; &quot;YES&quot; &lt;&lt; endl;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            cout &lt;&lt; &quot;NO&quot; &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-1"><a href="#3-å­¦ä¹ æ€»ç»“-1" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><ol><li>å­—ç¬¦ä¸²å¤„ç†ï¼šé€šè¿‡ <code>transform</code> é…åˆ <code>tolower</code> æˆ– <code>toupper</code>ï¼Œå¯ä»¥å¿«é€Ÿå°†å­—ç¬¦ä¸²ç»Ÿä¸€ä¸ºå°å†™æˆ–å¤§å†™ï¼Œä¾¿äºæ¯”è¾ƒã€‚</li><li>å¾ªç¯ä¸åˆ†æ”¯ï¼šåˆ©ç”¨ <code>while (t--)</code> å¾ªç¯é«˜æ•ˆå¤„ç†å¤šç»„è¾“å…¥ï¼Œç»“åˆ <code>if-else</code> åˆ¤æ–­åˆ†ç±»å¤„ç†é€»è¾‘ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼šè½¬æ¢å¤§å°å†™æˆ–æ¯”è¾ƒå­—ç¬¦ä¸²çš„å¤æ‚åº¦ä¸º O(å­—ç¬¦ä¸²é•¿åº¦)O(\text{å­—ç¬¦ä¸²é•¿åº¦})O(å­—ç¬¦ä¸²é•¿åº¦)ã€‚æ•´ä½“å¤æ‚åº¦ä¸º O(t)O(t)O(t)ï¼Œé€‚ç”¨äºæµ‹è¯•ç”¨ä¾‹è¾ƒå¤šçš„æƒ…å†µã€‚</li><li>STL ä½¿ç”¨ï¼šæ ‡å‡†åº“å‡½æ•°å¦‚ <code>transform</code> å’Œå­—ç¬¦ä¸²ç›´æ¥æ¯”è¾ƒæå‡äº†ä»£ç ç®€æ´æ€§å’Œå¯é æ€§ã€‚</li></ol><h2 id="ä¸‰-Even-Odd-G"><a href="#ä¸‰-Even-Odd-G" class="headerlink" title="ä¸‰.Even? Odd? G"></a>ä¸‰.Even? Odd? G</h2><h3 id="1-å¯¹åº”æ€è·¯-2"><a href="#1-å¯¹åº”æ€è·¯-2" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>è¿™ä¸ªç¨‹åºçš„ä¸»è¦ä»»åŠ¡æ˜¯æ ¹æ®è¾“å…¥çš„ä¸€ç»„è¶…å¤§æ•´æ•°ï¼Œåˆ¤æ–­æ¯ä¸ªæ•´æ•°çš„å¥‡å¶æ€§ï¼ˆå³æœ€åä¸€ä½æ•°å­—æ˜¯å¶æ•°è¿˜æ˜¯å¥‡æ•°ï¼‰ã€‚ç”±äºæ•°çš„èŒƒå›´å¯èƒ½éå¸¸å¤§ï¼ˆé«˜è¾¾ 106010^{60}1060ï¼‰ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨æ™®é€šæ•´æ•°ç±»å‹ï¼ˆå¦‚ <code>int</code> æˆ– <code>long long</code>ï¼‰ï¼Œæ‰€ä»¥é‡‡ç”¨å­—ç¬¦ä¸²å¤„ç†çš„æ–¹å¼ã€‚</p><h3 id="2-ä»£ç -2"><a href="#2-ä»£ç -2" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line"></span><br><span class="line">    int N;</span><br><span class="line">    cin &gt;&gt; N;</span><br><span class="line"></span><br><span class="line">    vector&lt;string&gt; results;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; N; ++i) &#123;</span><br><span class="line">        string number;</span><br><span class="line">        cin &gt;&gt; number;</span><br><span class="line"></span><br><span class="line">        char lastDigit = number[number.length() - 1];</span><br><span class="line">        if ((lastDigit - &#x27;0&#x27;) % 2 == 0) &#123;</span><br><span class="line">            results.push_back(&quot;even&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            results.push_back(&quot;odd&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (const string&amp; result : results) &#123;</span><br><span class="line">        cout &lt;&lt; result &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-2"><a href="#3-å­¦ä¹ æ€»ç»“-2" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p><strong>å­—ç¬¦ä¸²å¤„ç†å¤§æ•°</strong>ï¼š</p><ul><li>å½“æ•°å­—çš„èŒƒå›´è¶…è¿‡å†…ç½®ç±»å‹çš„æ”¯æŒæ—¶ï¼Œå¯ä»¥ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºå¹¶å¤„ç†ã€‚</li><li>åˆ¤æ–­å¥‡å¶æ€§åªéœ€å…³æ³¨æ•°å­—çš„æœ€åä¸€ä½ï¼Œç®€åŒ–äº†å¤§æ•°çš„æ“ä½œã€‚</li></ul><p><strong>æ¨¡è¿ç®—çš„åº”ç”¨</strong>ï¼š</p><ul><li>å¥‡å¶æ€§çš„æœ¬è´¨æ˜¯çœ‹æ•°å­—èƒ½å¦è¢« 222 æ•´é™¤ï¼Œé€šè¿‡ modâ€‰â€‰2\mod 2mod2 è¿ç®—å³å¯å®ç°ã€‚</li></ul><h2 id="å››-Problem-Generator"><a href="#å››-Problem-Generator" class="headerlink" title="å››.Problem Generator"></a>å››.Problem Generator</h2><h3 id="1-å¯¹åº”æ€è·¯-3"><a href="#1-å¯¹åº”æ€è·¯-3" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><ol><li>è¾“å…¥å¤„ç†</li></ol><ul><li>è¯»å–æµ‹è¯•ç”¨ä¾‹æ•°é‡ <code>t</code>ã€‚</li><li>å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¯»å–ä¸¤ä¸ªæ•´æ•° <code>n</code>ï¼ˆé¢˜åº“é¢˜ç›®æ•°é‡ï¼‰å’Œ <code>m</code>ï¼ˆæ¯”èµ›è½®æ¬¡ï¼‰ï¼Œä»¥åŠä¸€ä¸ªå­—ç¬¦ä¸² <code>a</code> è¡¨ç¤ºé¢˜åº“ä¸­çš„é¢˜ç›®éš¾åº¦ã€‚</li></ul><ol start="2"><li>ç»Ÿè®¡é¢˜ç›®æ•°é‡</li></ol><ul><li>ä½¿ç”¨7ä¸ªå˜é‡ <code>n1</code> åˆ° <code>n7</code> åˆ†åˆ«è®°å½•æ¯ç§éš¾åº¦ï¼ˆAåˆ°Gï¼‰çš„é¢˜ç›®æ•°é‡ã€‚</li><li>éå†å­—ç¬¦ä¸² <code>a</code>ï¼Œé€šè¿‡æ¯”è¾ƒå­—ç¬¦ <code>c</code> æ˜¯å¦ä¸º â€˜Aâ€™ åˆ° â€˜Gâ€™ æ¥å¯¹æ¯ç§éš¾åº¦çš„é¢˜ç›®è®¡æ•°ã€‚</li></ul><ol start="3"><li>æ¯ç§éš¾åº¦çš„æœ€å¤§éœ€æ±‚</li></ol><ul><li>æ¯è½®æ¯”èµ›éœ€è¦ä¸€ä¸ªå®Œæ•´çš„éš¾åº¦çº§åˆ«ï¼ˆAåˆ°Gï¼‰ï¼Œå³æ¯ç§éš¾åº¦æœ€å¤šéœ€è¦ mmm é“é¢˜ã€‚</li></ul><ol start="4"><li>è®¡ç®—éœ€è¦è¡¥å……çš„é¢˜ç›®æ•°é‡</li></ol><ul><li><p>æ¯è½®æ¯”èµ›éœ€è¦7ç§éš¾åº¦çš„é¢˜ç›®ï¼Œå› æ­¤æ€»éœ€æ±‚ä¸º 7Ã—m7 \times m7Ã—mã€‚</p></li><li><p>å½“å‰å·²æœ‰çš„é¢˜ç›®æ€»é‡ä¸º n1+n2+â‹¯+n7n1 + n2 + \dots + n7n1+n2+â‹¯+n7ã€‚</p></li><li><p>éœ€è¦è¡¥å……çš„é¢˜ç›®æ•°é‡ä¸ºï¼š éœ€è¦è¡¥å……&#x3D;maxâ¡(0,7Ã—mâˆ’å½“å‰å·²æœ‰çš„é¢˜ç›®æ€»é‡)\text{éœ€è¦è¡¥å……} &#x3D; \max(0, 7 \times m - \text{å½“å‰å·²æœ‰çš„é¢˜ç›®æ€»é‡})éœ€è¦è¡¥å……&#x3D;max(0,7Ã—mâˆ’å½“å‰å·²æœ‰çš„é¢˜ç›®æ€»é‡)</p></li><li><p>å¦‚æœå·²æœ‰é¢˜ç›®è¶³å¤Ÿï¼Œåˆ™è¡¥å……ä¸º0ï¼›å¦åˆ™è¡¥å……ç¼ºå°‘çš„é¢˜ç›®æ•°é‡ã€‚</p></li></ul><ol start="5"><li>è¾“å‡ºç»“æœ</li></ol><ul><li>å°†æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç»“æœè¾“å‡ºåœ¨å•ç‹¬çš„ä¸€è¡Œã€‚</li></ul><h3 id="2-ä»£ç -3"><a href="#2-ä»£ç -3" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"> </span><br><span class="line">int main() &#123;</span><br><span class="line">    int t;</span><br><span class="line">    cin &gt;&gt; t;   </span><br><span class="line"> </span><br><span class="line">    while (t--) &#123;</span><br><span class="line">        int n, m;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        string a;</span><br><span class="line">        cin &gt;&gt; a;</span><br><span class="line">        int n1 = 0, n2 = 0, n3 = 0, n4 = 0, n5 = 0, n6 = 0, n7 = 0;</span><br><span class="line">        for (char c : a)</span><br><span class="line">        &#123;</span><br><span class="line">            if (c == &#x27;A&#x27;)</span><br><span class="line">                n1++;</span><br><span class="line">            if (c == &#x27;B&#x27;)</span><br><span class="line">                n2++;</span><br><span class="line">            if (c == &#x27;C&#x27;)</span><br><span class="line">                n3++;</span><br><span class="line">            if (c == &#x27;D&#x27;)</span><br><span class="line">                n4++;</span><br><span class="line">            if (c == &#x27;E&#x27;)</span><br><span class="line">                n5++;</span><br><span class="line">            if (c == &#x27;F&#x27;)</span><br><span class="line">                n6++;</span><br><span class="line">            if (c == &#x27;G&#x27;)</span><br><span class="line">                n7++;</span><br><span class="line">        &#125;</span><br><span class="line">        if (n1 &gt; m)</span><br><span class="line">            n1 = m;</span><br><span class="line">        if (n2 &gt; m)</span><br><span class="line">            n2 = m;</span><br><span class="line">        if (n3 &gt; m)</span><br><span class="line">            n3 = m;</span><br><span class="line">        if (n4 &gt; m)</span><br><span class="line">            n4 = m;</span><br><span class="line">        if (n5 &gt; m)</span><br><span class="line">            n5 = m;</span><br><span class="line">        if (n6 &gt; m)</span><br><span class="line">            n6 = m;</span><br><span class="line">        if (n7 &gt; m)</span><br><span class="line">            n7 = m;</span><br><span class="line">        cout &lt;&lt; max(0, 7 * m - n1 - n2 - n3 - n4 - n5 - n6 - n7) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-3"><a href="#3-å­¦ä¹ æ€»ç»“-3" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><ul><li><p>æœ¬é¢˜é€šè¿‡ç»Ÿè®¡æ¯ç§éš¾åº¦é¢˜ç›®çš„æ•°é‡è§£å†³é—®é¢˜ã€‚è¿™æ˜¯å­—ç¬¦é¢‘ç‡ç»Ÿè®¡çš„å…¸å‹åº”ç”¨ã€‚</p></li><li><p>é€šè¿‡éå†å­—ç¬¦ä¸²å¹¶æ¯”è¾ƒå­—ç¬¦ï¼Œå¯ä»¥æœ‰æ•ˆç»Ÿè®¡å„ç±»åˆ«å‡ºç°æ¬¡æ•°ã€‚</p></li></ul><h2 id="äº”-rules"><a href="#äº”-rules" class="headerlink" title="äº”.rules"></a>äº”.rules</h2><h3 id="1-å¯¹åº”æ€è·¯-4"><a href="#1-å¯¹åº”æ€è·¯-4" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><p>è¿™æ®µä»£ç è§£å†³çš„é—®é¢˜æ˜¯è€ƒå¯Ÿè§„åˆ™æ˜¯å¦ç¬¦åˆæ°‘æ„ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>è¾“å…¥æ•°æ®ï¼šé¦–å…ˆè¯»å–å±…æ°‘æ€»æ•° <code>n</code>ã€è®°å½•å¤©æ•° <code>m</code> ä»¥åŠè§„åˆ™ä»£å· <code>k</code>ã€‚</p></li><li><p>ç»Ÿè®¡ç¬¦åˆæ°‘æ„çš„å¤©æ•°ï¼š</p><p>å¾ªç¯ <code>m</code> æ¬¡ï¼Œè¡¨ç¤ºé€å¤©å¤„ç†è®°å½•ã€‚</p><p>å¯¹æ¯ä¸€å¤©ï¼Œç»Ÿè®¡æœ‰å¤šå°‘å±…æ°‘éµå®ˆäº†è§„åˆ™ <code>k</code>ï¼ˆè®¡æ•°å™¨ <code>c2</code>ï¼‰ã€‚</p><p>å¦‚æœéµå®ˆè§„åˆ™ <code>k</code> çš„äººæ•°å¤§äºç­‰äºä¸€åŠ (<code>c2 * 2 &gt;= n</code>)ï¼Œåˆ™è¯¥å¤©è§„åˆ™ç¬¦åˆæ°‘æ„ï¼Œç¬¦åˆæ°‘æ„çš„å¤©æ•°è®¡æ•°å™¨ <code>c1</code> åŠ ä¸€ã€‚</p></li><li><p>åˆ¤æ–­è§„åˆ™æ­£ç¡®æ€§</p><p>ï¼šå¦‚æœç¬¦åˆæ°‘æ„çš„å¤©æ•°å¤§äºç­‰äºè®°å½•å¤©æ•°çš„ä¸€åŠ (<code>c1 * 2 &gt;= m</code>)ï¼Œè¾“å‡º â€œYESâ€ è¡¨ç¤ºè§„åˆ™æ­£ç¡®ï¼Œå¦åˆ™è¾“å‡º â€œNOâ€ã€‚</p></li></ol><h3 id="2-ä»£ç -4"><a href="#2-ä»£ç -4" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">int m, n, k;</span><br><span class="line">int c1 = 0, c2 = 0;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">for (int i = 0; i &lt; m; i++)</span><br><span class="line">&#123;</span><br><span class="line">c2 = 0;</span><br><span class="line">for (int j = 0; j &lt; n; j++) &#123;</span><br><span class="line">int t;</span><br><span class="line">cin &gt;&gt; t;</span><br><span class="line">if (t == k)</span><br><span class="line">&#123;</span><br><span class="line">c2++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">if ( c2*2 &gt;=  n)</span><br><span class="line">&#123;</span><br><span class="line">c1++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;if ( c1*2 &gt;=  m)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; &quot;YES&quot;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">cout &lt;&lt; &quot;NO&quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-4"><a href="#3-å­¦ä¹ æ€»ç»“-4" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>è¿™é“é¢˜ç›®æ¶‰åŠå¤šé‡å¾ªç¯çš„å¤„ç†ï¼Œæ˜¯å­¦ä¹ æ•°ç»„ä¸æ¡ä»¶åˆ¤æ–­çš„é‡è¦ç»ƒä¹ ã€‚é€šè¿‡è¿™æ®µä»£ç å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li><p>ç†è§£æ ¸å¿ƒé€»è¾‘</p><p>é—®é¢˜çš„æ ¸å¿ƒåœ¨äºä¸¤å±‚åˆ¤æ–­ï¼šä¸€æ˜¯æŸå¤©è§„åˆ™æ˜¯å¦ç¬¦åˆæ°‘æ„ï¼ŒäºŒæ˜¯ç»Ÿè®¡ç¬¦åˆæ°‘æ„çš„å¤©æ•°æ˜¯å¦è¾¾åˆ°è¦æ±‚ã€‚è¿™ç§å¤šå±‚åµŒå¥—æ¡ä»¶æ˜¯å¸¸è§çš„ç¼–ç¨‹æ¨¡å¼ã€‚</p></li><li><p>ä¼˜åŒ–å¾ªç¯æ•ˆç‡</p><p>æœ¬ä»£ç é€šè¿‡åŒé‡å¾ªç¯æŒ‰å¤©å’ŒæŒ‰äººå¤„ç†é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(mÃ—n)O(m \times n)O(mÃ—n)ã€‚è¿™ç§ç»“æ„åœ¨å¤„ç†èŒƒå›´è¾ƒå¤§æ—¶å¯èƒ½éœ€è¦ä¼˜åŒ–ã€‚</p></li><li><p>æŒæ¡è®¡æ•°é€»è¾‘</p><p>ä½¿ç”¨è®¡æ•°å™¨ <code>c2</code> å’Œ <code>c1</code> é€æ­¥ç´¯ç§¯æ•°æ®ï¼Œå¹¶é€šè¿‡æ¡ä»¶åˆ¤æ–­æ›´æ–°çŠ¶æ€ã€‚è¿™ç§é€»è¾‘æ¸…æ™°ã€ç®€æ´ï¼Œé€‚åˆå¤æ‚é—®é¢˜åˆ†æ­¥è§£å†³ã€‚</p></li></ol><h2 id="å…­-Many-Replacement"><a href="#å…­-Many-Replacement" class="headerlink" title="å…­.Many Replacement"></a>å…­.Many Replacement</h2><h3 id="1-å¯¹åº”æ€è·¯-5"><a href="#1-å¯¹åº”æ€è·¯-5" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><ol><li><p>åˆå§‹åŒ–æ˜ å°„è¡¨ï¼š</p><p>åˆ›å»ºä¸€ä¸ª <code>mapping</code> æ•°ç»„ï¼Œé•¿åº¦ä¸º 26ï¼ˆè¡¨ç¤ºå­—æ¯è¡¨ï¼‰ï¼Œåˆå§‹åŒ–ä¸º <code>&#39;a&#39;</code> åˆ° <code>&#39;z&#39;</code> çš„å¯¹åº”å­—æ¯ã€‚è¿™ä¸ªè¡¨å°†ç”¨äºè®°å½•å­—æ¯æ›¿æ¢å…³ç³»ã€‚</p></li><li><p>å¤„ç†æ›¿æ¢æ“ä½œï¼š</p><p>å¯¹æ¯ä¸ªæ›¿æ¢æŒ‡ä»¤ <code>(c, d)</code>ï¼Œéå† <code>mapping</code> æ•°ç»„ï¼Œå°†æ‰€æœ‰å€¼ç­‰äº <code>c</code> çš„é¡¹æ›¿æ¢ä¸º <code>d</code>ã€‚</p><p>è¿™ç§æ–¹å¼ç¡®ä¿äº†é—´æ¥æ›¿æ¢é“¾æ¡ä¹Ÿèƒ½æ­£ç¡®ç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœå…ˆå°† <code>a</code> æ›¿æ¢ä¸º <code>b</code>ï¼Œå†å°† <code>b</code> æ›¿æ¢ä¸º <code>c</code>ï¼Œæœ€ç»ˆ <code>a</code> ä¹Ÿä¼šè¢«æ›¿æ¢ä¸º <code>c</code>ã€‚</p></li><li><p>ä¿®æ”¹å­—ç¬¦ä¸²ï¼š</p><p>éå†å­—ç¬¦ä¸² <code>S</code> çš„æ¯ä¸ªå­—ç¬¦ï¼Œæ ¹æ® <code>mapping</code> æ•°ç»„ä¸­çš„æ˜ å°„å…³ç³»ï¼Œå°†å­—ç¬¦æ›¿æ¢ä¸ºæœ€ç»ˆæ˜ å°„çš„ç›®æ ‡å­—ç¬¦ã€‚</p></li><li><p>è¾“å‡ºç»“æœï¼š</p><p>è¾“å‡ºä¿®æ”¹åçš„å­—ç¬¦ä¸² <code>S</code>ã€‚</p></li></ol><p>é€šè¿‡ä½¿ç”¨ <code>mapping</code> æ•°ç»„è®°å½•å…¨å±€æ˜ å°„å…³ç³»ï¼Œé¿å…ç›´æ¥ä¿®æ”¹å­—ç¬¦ä¸²å¤šæ¬¡ï¼Œæé«˜äº†å¤„ç†æ•ˆç‡ã€‚</p><h3 id="2-ä»£ç -5"><a href="#2-ä»£ç -5" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int N, Q;</span><br><span class="line">    cin &gt;&gt; N;</span><br><span class="line">    string S;</span><br><span class="line">    cin &gt;&gt; S;</span><br><span class="line">    cin &gt;&gt; Q;</span><br><span class="line"></span><br><span class="line">    vector&lt;char&gt; mapping(26);</span><br><span class="line">    for (int i = 0; i &lt; 26; i++) &#123;</span><br><span class="line">        mapping[i] = &#x27;a&#x27; + i; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; Q; i++) &#123;</span><br><span class="line">        char c, d;</span><br><span class="line">        cin &gt;&gt; c &gt;&gt; d;</span><br><span class="line">        for (int j = 0; j &lt; 26; j++) &#123;</span><br><span class="line">            if (mapping[j] == c) &#123;</span><br><span class="line">                mapping[j] = d;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (char &amp;ch : S) &#123;</span><br><span class="line">        ch = mapping[ch - &#x27;a&#x27;]; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; S &lt;&lt; endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-5"><a href="#3-å­¦ä¹ æ€»ç»“-5" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>1.é«˜æ•ˆå¤„ç†æ›¿æ¢é“¾ï¼š</p><p>  ä½¿ç”¨ä¸€ä¸ªæ˜ å°„è¡¨ (<code>mapping</code> æ•°ç»„) å°†å­—ç¬¦æ›¿æ¢é€»è¾‘ç»Ÿä¸€ç®¡ç†ï¼Œé¿å…äº†ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­è¿›è¡Œå¤šæ¬¡æ›¿æ¢æ“ä½œï¼Œé™ä½äº†æ—¶é—´å¤æ‚åº¦ã€‚</p><p>2.é—´æ¥æ›¿æ¢é“¾çš„å¤„ç†ï¼š</p><p>  é€šè¿‡åœ¨å¤„ç†æ›¿æ¢æŒ‡ä»¤æ—¶éå†æ•´ä¸ªæ˜ å°„è¡¨ï¼Œç¡®ä¿é“¾å¼æ›¿æ¢å¾—åˆ°æ­£ç¡®ç»“æœã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæœ‰ä¾èµ–å…³ç³»çš„æ›¿æ¢é—®é¢˜ã€‚</p><p>3.å¤æ‚åº¦ä¼˜åŒ–ï¼š</p><p>  æ›¿æ¢æ“ä½œéå† <code>mapping</code> çš„å¤æ‚åº¦ä¸º O(QÃ—26)O(Q \times 26)O(QÃ—26)ï¼Œå­—ç¬¦ä¸²æ›¿æ¢ä¸º O(N)O(N)O(N)ï¼Œæ•´ä½“å¤æ‚åº¦çº¦ä¸º O(Q+N)O(Q + N)O(Q+N)ï¼Œè¶³ä»¥å¤„ç†è¾ƒå¤§è¾“å…¥è§„æ¨¡ã€‚</p><p>4.è¾¹ç•Œæ¡ä»¶è€ƒè™‘ï¼š</p><p>  æ›¿æ¢å­—ç¬¦å¯ä»¥æ˜¯ç›¸åŒçš„ï¼ˆ<code>c = d</code>ï¼‰ï¼Œè¿™ç§æƒ…å†µä¸ä¼šå½±å“æ˜ å°„è¡¨ã€‚</p><p>  æŸäº›å­—ç¬¦å¯èƒ½ä¸å­˜åœ¨äºå­—ç¬¦ä¸²ä¸­ï¼Œä½†æ›¿æ¢é€»è¾‘ä¾ç„¶å¯ä»¥æ­£å¸¸å¤„ç†ã€‚</p><h2 id="æ›´å¥½çš„äº¤æ¢"><a href="#æ›´å¥½çš„äº¤æ¢" class="headerlink" title="æ›´å¥½çš„äº¤æ¢"></a>æ›´å¥½çš„äº¤æ¢</h2><h3 id="1-å¯¹åº”æ€è·¯-6"><a href="#1-å¯¹åº”æ€è·¯-6" class="headerlink" title="1.å¯¹åº”æ€è·¯"></a>1.å¯¹åº”æ€è·¯</h3><ol><li><p>è¾“å…¥ä¸åˆå§‹åŒ–ï¼š</p><p>è¯»å–çŸ©é˜µå¤§å° <code>n</code> å’Œæ“ä½œæ¬¡æ•° <code>m</code>ã€‚</p><p>è¯»å–çŸ©é˜µå†…å®¹å¹¶å­˜å‚¨åœ¨ <code>matrix</code> ä¸­ã€‚</p><p>åˆå§‹åŒ–ä¸¤ä¸ªæ•°ç»„ <code>row_map</code> å’Œ <code>col_map</code>ï¼Œåˆ†åˆ«è®°å½•è¡Œå’Œåˆ—çš„æ˜ å°„å…³ç³»ï¼Œåˆå§‹å€¼ä¸º <code>[0, 1, 2, ..., n-1]</code>ã€‚</p></li><li><p>æ“ä½œå¤„ç†ï¼š</p><p>éå†æ¯ä¸ªæ“ä½œï¼Œæ ¹æ®æ“ä½œç±»å‹ï¼š</p><p>  è‹¥ <code>op == 1</code>ï¼ˆäº¤æ¢è¡Œï¼‰ï¼Œåˆ™äº¤æ¢ <code>row_map[x]</code> å’Œ <code>row_map[y]</code>ã€‚</p><p>  è‹¥ <code>op == 0</code>ï¼ˆäº¤æ¢åˆ—ï¼‰ï¼Œåˆ™äº¤æ¢ <code>col_map[x]</code> å’Œ <code>col_map[y]</code>ã€‚</p><p>é€šè¿‡ä¿®æ”¹ <code>row_map</code> å’Œ <code>col_map</code> çš„æ˜ å°„å…³ç³»ï¼Œè€Œéç›´æ¥ä¿®æ”¹çŸ©é˜µï¼ŒèŠ‚çœäº†æ—¶é—´å¤æ‚åº¦ã€‚</p></li><li><p>è¾“å‡ºçŸ©é˜µï¼š</p><p>æ ¹æ®æœ€ç»ˆçš„ <code>row_map</code> å’Œ <code>col_map</code>ï¼Œé‡æ–°æŒ‰æ˜ å°„é¡ºåºè¾“å‡ºçŸ©é˜µã€‚<code>matrix[row_map[i]][col_map[j]]</code> å¾—åˆ°æ­£ç¡®çš„æ˜ å°„å€¼ã€‚</p></li></ol><p>é€šè¿‡è¿™ç§é—´æ¥æ˜ å°„æ³•ï¼Œé¿å…äº†æ¯æ¬¡äº¤æ¢ç›´æ¥æ“ä½œçŸ©é˜µï¼Œæé«˜äº†æ•ˆç‡ï¼Œé€‚åˆå¤§è§„æ¨¡è¾“å…¥ã€‚</p><h3 id="2-ä»£ç -6"><a href="#2-ä»£ç -6" class="headerlink" title="2.ä»£ç "></a>2.ä»£ç </h3><div class="code-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;vector&lt;int&gt;&gt; matrix(n, vector&lt;int&gt;(n));</span><br><span class="line">    for (int i = 0; i &lt; n; ++i) &#123;</span><br><span class="line">        for (int j = 0; j &lt; n; ++j) &#123;</span><br><span class="line">            cin &gt;&gt; matrix[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;int&gt; row_map(n), col_map(n);</span><br><span class="line">    for (int i = 0; i &lt; n; ++i) &#123;</span><br><span class="line">        row_map[i] = i; </span><br><span class="line">        col_map[i] = i; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; m; ++i) &#123;</span><br><span class="line">        int op, x, y;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        --x; </span><br><span class="line">        --y;</span><br><span class="line">        if (op == 1) &#123;</span><br><span class="line">            swap(row_map[x], row_map[y]); </span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            swap(col_map[x], col_map[y]); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; n; ++i) &#123;</span><br><span class="line">        for (int j = 0; j &lt; n; ++j) &#123;</span><br><span class="line">            cout &lt;&lt; matrix[row_map[i]][col_map[j]] &lt;&lt; &quot; &quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-å­¦ä¹ æ€»ç»“-6"><a href="#3-å­¦ä¹ æ€»ç»“-6" class="headerlink" title="3.å­¦ä¹ æ€»ç»“"></a>3.å­¦ä¹ æ€»ç»“</h3><p>é—´æ¥æ˜ å°„ä¼˜åŒ–ï¼š</p><p>â€‹    ç›´æ¥äº¤æ¢çŸ©é˜µè¡Œåˆ—ä¼šå¸¦æ¥é«˜æ˜‚çš„æ—¶é—´å¤æ‚åº¦ï¼Œé—´æ¥é€šè¿‡æ˜ å°„æ•°ç»„è°ƒæ•´é¡ºåºæ˜¯ä¸€ç§é«˜æ•ˆçš„è§£å†³æ–¹å¼ã€‚</p><p>ç©ºé—´ä¸æ—¶é—´çš„å¹³è¡¡ï¼š</p><p>â€‹    å¢åŠ ä¸¤ä¸ªæ˜ å°„æ•°ç»„ <code>row_map</code> å’Œ <code>col_map</code>ï¼Œç”¨ç©ºé—´æ¢å–äº†æ—¶é—´çš„ä¼˜åŒ–ã€‚</p><p>â€‹    åœ¨ mmm æ¬¡æ“ä½œå’Œ n2n^2n2 æ¬¡çŸ©é˜µè®¿é—®ä¸­ï¼Œå¤æ‚åº¦é™ä½ä¸º O(n2+m)O(n^2 + m)O(n2+m)ï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡ n,mn, mn,mã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>blogç”¨æ³•</title>
      <link href="/2025/02/06/blog%E7%94%A8%E6%B3%95/"/>
      <url>/2025/02/06/blog%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="æäº¤æ›´æ”¹"><a href="#æäº¤æ›´æ”¹" class="headerlink" title="æäº¤æ›´æ”¹"></a>æäº¤æ›´æ”¹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><h1 id="æœ¬åœ°ç½‘ç«™"><a href="#æœ¬åœ°ç½‘ç«™" class="headerlink" title="æœ¬åœ°ç½‘ç«™"></a>æœ¬åœ°ç½‘ç«™</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/02/06/hello-world/"/>
      <url>/2025/02/06/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a class="link"   href="https://hexo.io/" >Hexo<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>! This is your very first post. Check <a class="link"   href="https://hexo.io/docs/" >documentation<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> for more info. If you get any problems when using Hexo, you can find the answer in <a class="link"   href="https://hexo.io/docs/troubleshooting.html" >troubleshooting<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a> or you can ask me on <a class="link"   href="https://github.com/hexojs/hexo/issues" >GitHub<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure></div><p>More info: <a class="link"   href="https://hexo.io/docs/writing.html" >Writing<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></div><p>More info: <a class="link"   href="https://hexo.io/docs/server.html" >Server<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure></div><p>More info: <a class="link"   href="https://hexo.io/docs/generating.html" >Generating<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><div class="code-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure></div><p>More info: <a class="link"   href="https://hexo.io/docs/one-command-deployment.html" >Deployment<i class="fa-solid fa-arrow-up-right ml-[0.2em] font-light align-text-top text-[0.7em] link-icon"></i></a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
    
  
</search>
